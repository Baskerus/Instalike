/*! For license information please see main.ae1bc0ef.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,T=60114,S=60109,C=60110,N=60112,A=60113,R=60120,O=60115,P=60116,D=60121,L=60128,M=60129,U=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),_=j("react.portal"),I=j("react.fragment"),E=j("react.strict_mode"),T=j("react.profiler"),S=j("react.provider"),C=j("react.context"),N=j("react.forward_ref"),A=j("react.suspense"),R=j("react.suspense_list"),O=j("react.memo"),P=j("react.lazy"),D=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),U=j("react.offscreen"),F=j("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function H(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return G(e.type);case D:return G(e._render);case P:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Pe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Pe,Ue=!1,Fe=!1;function je(){null===Ce&&null===Ne||(Le(),Oe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(me){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,He=null,We=!1,Ge=null,Qe={onError:function(e){Ke=!0,He=e}};function Ye(e,t,n,r,i,a,o,u,s){Ke=!1,He=null,ze.apply(Qe,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Je(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),At=St("animationstart"),Rt=St("transitionend"),Ot=new Map,Pt=new Map,Dt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Ot.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ut(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ut(s),i=Mt):0!==(u&=a)&&(r=Ut(u),i=Mt)}else 0!==(a=n&~o)?(r=Ut(a),i=Mt):0!==u&&(r=Ut(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ut(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Vt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Vt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Wt|0)|0},Ht=Math.log,Wt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function Jt(e,t,n,r){Ue||Le();var i=$t,a=Ue;Ue=!0;try{De(i,e,t,n,r)}finally{(Ue=a)||je()}}function Xt(e,t,n,r){Qt(Gt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=mt(ut,e,t,n,r,i),!0;case"dragenter":return st=mt(st,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=sn(mn),gn=sn(i({},mn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),_n=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Nn),Rn=sn(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Dn),Mn=[9,13,27,32],Un=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var jn=f&&"TextEvent"in window&&!Fn,Vn=f&&(!Un||Fn&&8<Fn&&11>=Fn),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Ur(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Jn=null;function Xn(e){Nr(e,0)}function $n(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Jn=Yn=null)}function ar(e){if("value"===e.propertyName&&$n(Jn)){var t=[];if(Qn(t,Jn,e,Te(e)),e=Xn,Ue)e(t);else{Ue=!0;try{Pe(e,t)}finally{Ue=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Jn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Jn)}function sr(e,t){if("click"===e)return $n(t)}function cr(e,t){if("input"===e||"change"===e)return $n(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==$(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Ur(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Pt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=He;Ke=!1,He=null,We||(We=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(We)throw e=Ge,We=!1,Ge=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Rr]||(e[Rr]=!0,u.forEach((function(t){Sr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Dr(a,e,i,t),o.add(u))}function Dr(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Xt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Me(e,t,n)}finally{Fe=!1,je()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Ot.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=On;break;case Ct:case Nt:case At:s=wn;break;case Rt:s=Pn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Fr(d))p++;for(d=0,v=h;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)h=Fr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Fr(l),h=Fr(h)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Zn;else if(Gn(u))if(er)m=cr;else{m=ur;var y=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=sr);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ie(u,"number",u.value)),y=r?ii(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(kr=y,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Un)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(y=Ur(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Un&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Xr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[$r])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[$r]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ai=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Oi=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Ui={},Fi=void 0!==Ni?Ni:function(){},ji=null,Vi=null,Bi=!1,qi=Ai(),zi=1e4>qi?Ai:function(){return Ai()-qi};function Ki(){switch(Ri()){case Oi:return 99;case Pi:return 98;case Di:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Oi;case 98:return Pi;case 97:return Di;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Hi(e),Ei(e,t)}function Gi(e,t,n){return e=Hi(e),Ti(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Yi()}function Yi(){if(!Bi&&null!==ji){Bi=!0;var e=0;try{var t=ji;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ti(Oi,Qi),n}finally{Bi=!1}}}var Ji=b.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=$i.current;li($i),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Uo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Gs(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Js(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Gs(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Xs(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Gs(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Js(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(q(a))return m(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Na=ci(Ca),Aa=ci(Ca),Ra=ci(Ca);function Oa(e){if(e===Ca)throw Error(o(174));return e}function Pa(e,t){switch(fi(Ra,t),fi(Aa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Da(){li(Na),li(Aa),li(Ra)}function La(e){Oa(Ra.current);var t=Oa(Na.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Na,n))}function Ma(e){Aa.current===e&&(li(Na),li(Aa))}var Ua=ci(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Va=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(ja=e);qa(ja,n)}ja=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,ja=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Wa(e){if(e!==ja)return!1;if(!Ba)return Ha(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Va;t;)qa(e,t),t=Qr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=ja?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=ja=null,Ba=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ja=b.ReactCurrentDispatcher,Xa=b.ReactCurrentBatchConfig,$a=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if($a=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Po:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ja.current=Lo,e=n(r,i)}while(ro)}if(Ja.current=Oo,t=null!==eo&&null!==eo.next,$a=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if(($a&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Uo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Uo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($a&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Pu;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ja.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function mo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}Za.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Ro(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Oo={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,yo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Uo=!1;function Fo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Uo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ws(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Uo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Uo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Fo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Uo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Ho(e,t,n,r,i){if(yi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ma(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Xi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=mi(t,s=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Pa(e,t.containerInfo)}var Qo,Yo,Jo,Xo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,a=Ua.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Ua,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ws(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ws(o,u),null!==e?r=Ws(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ua.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Ua,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Oa(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oa(Na.current),Wa(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[$r]=t,r[Zr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":J(r),re(r,u,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[$r]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Ar(Tr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Jo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oa(Ra.current),Oa(Na.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return li(Ua),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ua.current)?0===Fu&&(Fu=3):(0!==Fu&&3!==Fu||(Fu=4),null===Pu||0===(134217727&Bu)&&0===(134217727&qu)||gs(Pu,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Ua),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Fu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Ua,1&Ua.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Wu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fa(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Ua.current,fi(Ua,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Ua),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ua),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Oa(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ju||(Ju=!0,Xu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$u?$u=new Set([this]):$u.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function mu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function yu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Us(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Us(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Iu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?ye(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hu=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Au=b.ReactCurrentDispatcher,Ru=b.ReactCurrentOwner,Ou=0,Pu=null,Du=null,Lu=0,Mu=0,Uu=ci(0),Fu=0,ju=null,Vu=0,Bu=0,qu=0,zu=0,Ku=null,Hu=0,Wu=1/0;function Gu(){Wu=zi()+500}var Qu,Yu=null,Ju=!1,Xu=null,$u=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Ou)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=Vu),0!==Ji.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ou)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Pu&&(qu|=t,4===Fu&&gs(e,Lu));var r=Ki();1===t?0!==(8&Ou)&&0===(48&Ou)?ks(e):(ms(e,n),0===Ou&&(Gu(),Qi())):(0===(4&Ou)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ms(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ms(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ut(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ft(e,e===Pu?Lu:0),t=Mt,0===r)null!==n&&(n!==Ui&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ui&&Si(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Vi=Ti(Oi,Yi)):ji.push(n),n=Ui):14===t?n=Gi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,ys.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ys(e){if(us=-1,cs=ss=0,0!==(48&Ou))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ft(e,e===Pu?Lu:0);if(0===n)return null;var r=n,i=Ou;Ou|=16;var a=Ts();for(Pu===e&&Lu===r||(Gu(),Is(e,r));;)try{Ns();break}catch(s){Es(e,s)}if(na(),Au.current=a,Ou=i,null!==Du?r=0:(Pu=null,Lu=0,r=Fu),0!==(Vu&qu))Is(e,0);else if(0!==r){if(2===r&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Ss(e,n))),1===r)throw t=ju,Is(e,0),gs(e,n),ms(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Os(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Hu+500-zi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Os.bind(null,e),r);break}Os(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Hr(Os.bind(null,e),n);break}Os(e);break;default:throw Error(o(329))}}return ms(e,zi()),e.callbackNode===t?ys.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ou))throw Error(o(327));if(Ls(),e===Pu&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(Vu&qu)&&(n=Ss(e,t=Ft(e,t)))}else n=Ss(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Ss(e,t))),1===n)throw n=ju,Is(e,0),gs(e,t),ms(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e),ms(e,zi()),null}function ws(e,t){var n=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=n)&&(Gu(),Qi())}}function bs(e,t){var n=Ou;Ou&=-2,Ou|=8;try{return e(t)}finally{0===(Ou=n)&&(Gu(),Qi())}}function xs(e,t){fi(Uu,Mu),Mu|=t,Vu|=t}function _s(){Mu=Uu.current,li(Uu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Da();break;case 13:case 19:li(Ua);break;case 10:ra(r);break;case 23:case 24:_s()}n=n.return}Pu=e,Du=Ws(e.current,null),Lu=Mu=Vu=t,Fu=0,ju=null,zu=qu=Bu=0}function Es(e,t){for(;;){var n=Du;try{if(na(),Ja.current=Oo,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if($a=0,to=eo=Za=null,ro=!1,Ru.current=null,null===n||null===n.return){Fu=1,ju=t,Du=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ua.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=Bs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fu&&(Fu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===$u||!$u.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Rs(n)}catch(_){t=_,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function Ts(){var e=Au.current;return Au.current=Oo,null===e?Oo:e}function Ss(e,t){var n=Ou;Ou|=16;var r=Ts();for(Pu===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Ou=n,Au.current=r,null!==Du)throw Error(o(261));return Pu=null,Lu=0,Fu}function Cs(){for(;null!==Du;)As(Du)}function Ns(){for(;null!==Du&&!Ci();)As(Du)}function As(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Rs(e):Du=t,Ru.current=null}function Rs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Du=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Du=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Fu&&(Fu=5)}function Os(e){var t=Ki();return Wi(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{Ls()}while(null!==es);if(0!==(48&Ou))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Pu&&(Du=Pu=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ou,Ou|=32,Ru.current=null,Br=Yt,yr(u=mr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=u,y=null;t:for(;;){for(var g;m!==s||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===u)break t;if(y===s&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Ds()}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ge(Yu.stateNode,""),128&k){var w=Yu.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xu(Yu),Yu.flags&=-3;break;case 6:xu(Yu),Yu.flags&=-3,Tu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Tu(Yu.alternate,Yu);break;case 4:Tu(Yu.alternate,Yu);break;case 8:Eu(u,s=Yu);var x=s.alternate;wu(s),null!==x&&wu(x)}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);if(b=qr,w=mr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&yr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!b.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Yt=!!Br,qr=Br=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var _=Yu.flags;if(36&_&&yu(k,Yu.alternate,Yu),128&_){w=void 0;var I=Yu.ref;if(null!==I){var E=Yu.stateNode;Yu.tag,w=E,"function"===typeof I?I(w):I.current=w}}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));Vs(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Fi(),Ou=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((_=Yu).sibling=null,_.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&($u=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(ms(e,zi()),Ju)throw Ju=!1,e=Xu,Xu=null,e;return 0!==(8&Ou)||Qi(),null}function Ds(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&mu(e,Yu),0===(512&t)||Zu||(Zu=!0,Gi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Wi(e,Fs)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Us(e,t){rs.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Fs(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ou))throw Error(o(331));var t=Ou;Ou|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ou=t,Qi(),!0}function js(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ms(e,t))}function Vs(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$u||!$u.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ms(n,i);else if("function"===typeof r.componentDidCatch&&(null===$u||!$u.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Lu&n)===n&&(4===Fu||3===Fu&&(62914560&Lu)===Lu&&500>zi()-Hu?Is(e,0):zu|=n),ms(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=Vu),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ms(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Hs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Hs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Ks(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case A:return(e=Ks(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case R:return(e=Ks(19,n,t,i)).elementType=R,e.lanes=a,e;case U:return Ys(n,i,a,t);case F:return(e=Ks(24,n,t,i)).elementType=F,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case N:u=11;break e;case O:u=14;break e;case P:u=16,r=null;break e;case D:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=U,e.lanes=n,e}function Js(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Xs(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $s(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(yi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $s(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Uo=!0;else{if(0===(n&r)){switch(Uo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:yi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(fi(Ua,1&Ua.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Ua,1&Ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Ua,Ua.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Uo=0!==(16384&e.flags)}else Uo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ma(t,r,u,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===O)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return $o(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi($i,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Vo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=ws,De=function(e,t,n,r,i){var a=Ou;Ou|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ou=a)&&(Gu(),Qi())}},Le=function(){0===(49&Ou)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ms(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Ou;Ou|=2;try{return e(t)}finally{0===(Ou=n)&&(Gu(),Qi())}};var sc={Events:[ri,ii,ai,Re,Oe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ii=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ou;if(0!==(48&n))return e(t);Ou|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ou=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function R(){var e=A.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,s(x,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?b.postMessage(null):(v=!1,m=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,b.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,N=null,A=3,R=!1,O=!1,P=!1;function D(e){for(var t=_(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,x(T,t)}t=_(S)}}function L(e){if(P=!1,D(e),!O)if(null!==_(T))O=!0,n(M);else{var t=_(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,P&&(P=!1,i()),R=!0;var a=A;try{for(D(n),N=_(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===_(T)&&I(T),D(n)}else I(T);N=_(T)}if(null!==N)var s=!0;else{var c=_(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{N=null,A=a,R=!1}}var U=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||R||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(S,e),null===_(T)&&e===_(S)&&(P?i():P=!0,r(L,o-u))):(e.sortIndex=s,x(T,e),O||R||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return X},SDK_VERSION:function(){return Je},_DEFAULT_ENTRY_NAME:function(){return Le},_addComponent:function(){return je},_addOrOverwriteComponent:function(){return Ve},_apps:function(){return Ue},_clearComponents:function(){return Ke},_components:function(){return Fe},_getProvider:function(){return qe},_registerComponent:function(){return Be},_removeServiceInstance:function(){return ze},deleteApp:function(){return et},getApp:function(){return $e},getApps:function(){return Ze},initializeApp:function(){return Xe},onLog:function(){return rt},registerVersion:function(){return nt},setLogLevel:function(){return it}});var t=n(791),r=n(164);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}var c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=t.createContext&&t.createContext(c),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function d(e){return e&&e.map((function(e,n){return t.createElement(e.tag,f({key:n},e.attr),d(e.child))}))}function p(e){return function(n){return t.createElement(v,f({attr:f({},e.attr)},n),d(e.child))}}function v(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,u=h(e,["attr","size","title"]),s=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,u,{className:r,style:f(f({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==l?t.createElement(l.Consumer,null,(function(e){return n(e)})):n(c)}function m(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}function y(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 3L4 9v12h5v-7h6v7h5V9z"}}]})(e)}function g(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)}function k(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}}]})(e)}function w(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}},{tag:"polyline",attr:{points:"16 17 21 12 16 7"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"}}]})(e)}function b(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function N(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function P(e,t){if(t&&("object"===O(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function D(e){var t=R();return function(){var n,r=A(e);if(t){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function L(e,t,n){return L=R()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&C(i,n.prototype),i},L.apply(null,arguments)}function M(e){var t="function"===typeof Map?new Map:void 0;return M=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return L(e,arguments,A(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),C(n,e)},M(e)}var U=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},F={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(U(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},j=function(e){return function(e){var t=U(e);return F.encodeByteArray(t,!0)}(e).replace(/\./g,"")},V=function(e){try{return F.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function B(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=B(e[n],t[n]));return e}var q=function(){function e(){var t=this;_(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return E(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function z(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[j(JSON.stringify({alg:"none",type:"JWT"})),j(JSON.stringify(a)),""].join(".")}function K(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function H(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(K())}function W(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function G(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Q(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Y(){var e=K();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function J(){return"object"===typeof indexedDB}var X=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(S(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(S(a),$.prototype.create),a}return E(n)}(M(Error)),$=function(){function e(t,n,r){_(this,e),this.service=t,this.serviceName=n,this.errors=r}return E(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Z(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new X(n,a,t);return o}}]),e}();function Z(e,t){return e.replace(ee,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ee=/\{\$([^}]+)}/g;function te(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ne(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(re(u)&&re(s)){if(!ne(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function re(e){return null!==e&&"object"===typeof e}function ie(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ae(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function oe(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ue(e,t){var n=new se(e,t);return n.subscribe.bind(n)}var se=function(){function e(t,n){var r=this;_(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return E(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ce),void 0===r.error&&(r.error=ce),void 0===r.complete&&(r.complete=ce);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ce(){}function le(e){return e&&e._delegate?e._delegate:e}function fe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function he(e){return function(e){if(Array.isArray(e))return a(e)}(e)||fe(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){de(a,r,i,o,u,"next",e)}function u(e){de(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ve=n(757),me=n.n(ve),ye=function(){function e(t,n,r){_(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return E(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ge="[DEFAULT]",ke=function(){function e(t,n){_(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return E(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new q;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ge})}catch(c){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=pe(ve.mark((function e(){var t;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(he(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),he(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=T(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(dy){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ge?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(dy){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;return this.component?this.component.multipleInstances?e:ge:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var we,be,xe=function(){function e(t){_(this,e),this.name=t,this.providers=new Map}return E(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ke(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),_e=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(be||(be={}));var Ie,Ee,Te={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},Se=be.INFO,Ce=(x(we={},be.DEBUG,"log"),x(we,be.VERBOSE,"log"),x(we,be.INFO,"info"),x(we,be.WARN,"warn"),x(we,be.ERROR,"error"),we),Ne=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ce[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ae=function(){function e(t){_(this,e),this.name=t,this._logLevel=Se,this._logHandler=Ne,this._userLogHandler=null,_e.push(this)}return E(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in be))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Te[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,be.DEBUG].concat(t)),this._logHandler.apply(this,[this,be.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,be.VERBOSE].concat(t)),this._logHandler.apply(this,[this,be.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,be.INFO].concat(t)),this._logHandler.apply(this,[this,be.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,be.WARN].concat(t)),this._logHandler.apply(this,[this,be.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,be.ERROR].concat(t)),this._logHandler.apply(this,[this,be.ERROR].concat(t))}}]),e}();var Re=function(){function e(t){_(this,e),this.container=t}return E(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Oe="@firebase/app",Pe="0.7.17",De=new Ae("@firebase/app"),Le="[DEFAULT]",Me=(x(Ie={},Oe,"fire-core"),x(Ie,"@firebase/app-compat","fire-core-compat"),x(Ie,"@firebase/analytics","fire-analytics"),x(Ie,"@firebase/analytics-compat","fire-analytics-compat"),x(Ie,"@firebase/app-check","fire-app-check"),x(Ie,"@firebase/app-check-compat","fire-app-check-compat"),x(Ie,"@firebase/auth","fire-auth"),x(Ie,"@firebase/auth-compat","fire-auth-compat"),x(Ie,"@firebase/database","fire-rtdb"),x(Ie,"@firebase/database-compat","fire-rtdb-compat"),x(Ie,"@firebase/functions","fire-fn"),x(Ie,"@firebase/functions-compat","fire-fn-compat"),x(Ie,"@firebase/installations","fire-iid"),x(Ie,"@firebase/installations-compat","fire-iid-compat"),x(Ie,"@firebase/messaging","fire-fcm"),x(Ie,"@firebase/messaging-compat","fire-fcm-compat"),x(Ie,"@firebase/performance","fire-perf"),x(Ie,"@firebase/performance-compat","fire-perf-compat"),x(Ie,"@firebase/remote-config","fire-rc"),x(Ie,"@firebase/remote-config-compat","fire-rc-compat"),x(Ie,"@firebase/storage","fire-gcs"),x(Ie,"@firebase/storage-compat","fire-gcs-compat"),x(Ie,"@firebase/firestore","fire-fst"),x(Ie,"@firebase/firestore-compat","fire-fst-compat"),x(Ie,"fire-js","fire-js"),x(Ie,"firebase","fire-js-all"),Ie),Ue=new Map,Fe=new Map;function je(e,t){try{e.container.addComponent(t)}catch(n){De.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ve(e,t){e.container.addOrOverwriteComponent(t)}function Be(e){var t=e.name;if(Fe.has(t))return De.debug("There were multiple attempts to register component ".concat(t,".")),!1;Fe.set(t,e);var n,r=T(Ue.values());try{for(r.s();!(n=r.n()).done;){je(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function qe(e,t){return e.container.getProvider(t)}function ze(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le;qe(e,t).clearInstance(n)}function Ke(){Fe.clear()}var He,We,Ge=(x(Ee={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),x(Ee,"bad-app-name","Illegal App name: '{$appName}"),x(Ee,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),x(Ee,"app-deleted","Firebase App named '{$appName}' already deleted"),x(Ee,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),x(Ee,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ee),Qe=new $("app","Firebase",Ge),Ye=function(){function e(t,n,r){var i=this;_(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ye("app",(function(){return i}),"PUBLIC"))}return E(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Qe.create("app-deleted",{appName:this._name})}}]),e}(),Je="9.6.7";function Xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Le,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Qe.create("bad-app-name",{appName:String(i)});var a=Ue.get(i);if(a){if(ne(e,a.options)&&ne(r,a.config))return a;throw Qe.create("duplicate-app",{appName:i})}var o,u=new xe(i),s=T(Fe.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ye(e,r,u);return Ue.set(i,l),l}function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=Ue.get(e);if(!t)throw Qe.create("no-app",{appName:e});return t}function Ze(){return Array.from(Ue.values())}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=pe(ve.mark((function e(t){var n;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ue.has(n)){e.next=6;break}return Ue.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t,n){var r,i=null!==(r=Me[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void De.warn(u.join(" "))}Be(new ye("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function rt(e,t){if(null!==e&&"function"!==typeof e)throw Qe.create("invalid-log-argument");!function(e,t){var n,r=T(_e);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Te[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:be[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function it(e){var t;t=e,_e.forEach((function(e){e.setLogLevel(t)}))}He="",Be(new ye("platform-logger",(function(e){return new Re(e)}),"PRIVATE")),nt(Oe,Pe,He),nt(Oe,Pe,"esm2017"),nt("fire-js","");var at=function(){function e(t,n){var r=this;_(this,e),this._delegate=t,this.firebase=n,je(t,new ye("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return E(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),et(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){je(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ve(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ot=(x(We={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),x(We,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),We),ut=new $("app-compat","Firebase",ot);var st=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Xe(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(te(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:nt,setLogLevel:it,onLog:rt,apps:null,SDK_VERSION:Je,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Be(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw ut.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&B(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!te(n,e=e||Le))throw ut.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(at);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){B(n,e)},createSubscribe:ue,ErrorFactory:$,deepExtend:B}),n}(),ct=new Ae("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ct.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&ct.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ft=st;!function(e){nt("@firebase/app-compat","0.1.18",e)}();ft.registerVersion("firebase","9.6.7","app-compat");var ht="firebasestorage.googleapis.com",dt=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,pt(e),"Firebase Storage: ".concat(r," (").concat(pt(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(S(i),n.prototype),i}return E(n,[{key:"_codeEquals",value:function(e){return pt(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(X);function pt(e){return"storage/"+e}function vt(){return new dt("unknown","An unknown error occurred, please check the error payload for server response.")}function mt(){return new dt("canceled","User canceled the upload/download.")}function yt(){return new dt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gt(e){return new dt("invalid-argument",e)}function kt(){return new dt("app-deleted","The Firebase app was deleted.")}function wt(e){return new dt("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bt(e,t){return new dt("invalid-format","String does not match format '"+e+"': "+t)}function xt(e){throw new dt("internal-error","Internal error: "+e)}var _t,It=function(){function e(t,n){_(this,e),this.bucket=t,this.path_=n}return E(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new dt("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===ht?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new dt("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Et=function(){function e(t){_(this,e),this.promise_=Promise.reject(t)}return E(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Tt(e){return"string"===typeof e||e instanceof String}function St(e){return Ct()&&e instanceof Blob}function Ct(){return"undefined"!==typeof Blob}function Nt(e,t,n,r){if(r<t)throw gt("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw gt("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function At(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Rt(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(_t||(_t={}));var Ot=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;_(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return E(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=vt();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?kt():mt());else i(new dt("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Pt(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Pt(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===_t.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new Pt(o,r))}else{var u=r.getErrorCode()===_t.ABORT;t(!1,new Pt(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),Pt=E((function e(t,n,r){_(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Dt(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Lt(){for(var e=Dt(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Ct())return new Blob(n);throw new dt("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Mt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ut=E((function e(t,n){_(this,e),this.data=t,this.contentType=n||null}));function Ft(e,t){switch(e){case Mt.RAW:return new Ut(jt(t));case Mt.BASE64:case Mt.BASE64URL:return new Ut(Vt(e,t));case Mt.DATA_URL:return new Ut(function(e){var t=new Bt(e);return t.base64?Vt(Mt.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw bt(Mt.DATA_URL,"Malformed data URL.")}return jt(t)}(t.rest)}(t),new Bt(t).contentType)}throw vt()}function jt(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Vt(e,t){switch(e){case Mt.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw bt(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Mt.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw bt(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw bt(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Bt=E((function e(t){_(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw bt(Mt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var qt=function(){function e(t,n){_(this,e);var r=0,i="";St(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return E(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(St(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Ct()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Lt.apply(null,i))}var a=n.map((function(e){return Tt(e)?Ft(Mt.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function zt(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Kt(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ht(e,t){return t}var Wt=E((function e(t,n,r,i){_(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Ht})),Gt=null;function Qt(){if(Gt)return Gt;var e=[];e.push(new Wt("bucket")),e.push(new Wt("generation")),e.push(new Wt("metageneration")),e.push(new Wt("name","fullPath",!0));var t=new Wt("name");t.xform=function(e,t){return function(e){return!Tt(e)||e.length<2?e:Kt(e)}(t)},e.push(t);var n=new Wt("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Wt("timeCreated")),e.push(new Wt("updated")),e.push(new Wt("md5Hash",null,!0)),e.push(new Wt("cacheControl",null,!0)),e.push(new Wt("contentDisposition",null,!0)),e.push(new Wt("contentEncoding",null,!0)),e.push(new Wt("contentLanguage",null,!0)),e.push(new Wt("contentType",null,!0)),e.push(new Wt("metadata","customMetadata",!0)),Gt=e}function Yt(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new It(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Jt(e,t,n){var r=zt(t);return null===r?null:Yt(e,r,n)}function Xt(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function $t(e,t,n){var r=zt(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=T(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new It(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=T(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new It(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var Zt=E((function e(t,n,r,i){_(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function en(e){if(!e)throw vt()}function tn(e,t){return function(n,r){var i=Jt(e,r,t);return en(null!==i),i}}function nn(e,t){return function(n,r){var i=Jt(e,r,t);return en(null!==i),function(e,t,n,r){var i=zt(t);if(null===i)return null;if(!Tt(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return At("/b/"+o(i)+"/o/"+o(a),n,r)+Rt({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function rn(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new dt("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new dt("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new dt("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new dt("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function an(e){var t=rn(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new dt("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function on(e,t,n){var r=At(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Zt(r,"GET",tn(e,n),i);return a.errorHandler=an(t),a}function un(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=At(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new Zt(o,"GET",function(e,t){return function(n,r){var i=$t(e,t,r);return en(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=rn(t),s}function sn(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function cn(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=sn(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Xt(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=qt.getBlob(c,r,l);if(null===f)throw yt();var h={name:s.fullPath},d=At(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Zt(d,"POST",tn(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=rn(t),v}var ln=E((function e(t,n,r,i){_(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function fn(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){en(!1)}return en(!!n&&-1!==(t||["active"]).indexOf(n)),n}var hn=262144;function dn(e,t,n,r,i,a,o,u){var s=new ln(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new dt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw yt();var v=t.maxUploadRetryTime,m=new Zt(n,"POST",(function(e,n){var i,o=fn(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?tn(t,a)(e,n):null,new ln(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=rn(e),m}var pn={STATE_CHANGED:"state_changed"},vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mn(e){switch(e){case"running":case"pausing":case"canceling":return vn.RUNNING;case"paused":return vn.PAUSED;case"success":return vn.SUCCESS;case"canceled":return vn.CANCELED;default:return vn.ERROR}}var yn=E((function e(t,n,r){_(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function gn(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var kn=function(){function e(){var t=this;_(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_t.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=_t.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=_t.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return E(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw xt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw xt("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw xt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw xt("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw xt("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),wn=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(kn);function bn(){return new wn}var xn=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Qt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return E(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=sn(t,r,i),u={name:o.fullPath},s=At(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Xt(o,n),f=e.maxUploadRetryTime,h=new Zt(s,"POST",(function(e){var t;fn(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){en(!1)}return en(Tt(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=rn(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,bn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Zt(n,"POST",(function(e){var t=fn(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){en(!1)}n||en(!1);var i=Number(n);return en(!isNaN(i)),new ln(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=rn(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,bn,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=hn*this._chunkMultiplier,n=new ln(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=dn(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,bn,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){hn*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=on(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,bn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=cn(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,bn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mt(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=mn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new yn(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(mn(this._state)){case vn.SUCCESS:gn(this._resolve.bind(null,this.snapshot))();break;case vn.CANCELED:case vn.ERROR:gn(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(mn(this._state)){case vn.RUNNING:case vn.PAUSED:e.next&&gn(e.next.bind(e,this.snapshot))();break;case vn.SUCCESS:e.complete&&gn(e.complete.bind(e))();break;default:e.error&&gn(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),_n=function(){function e(t,n){_(this,e),this._service=t,this._location=n instanceof It?n:It.makeFromUrl(n,t.host)}return E(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new It(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Kt(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new It(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw wt(e)}}]),e}();function In(e,t,n){return En.apply(this,arguments)}function En(){return(En=pe(me().mark((function e(t,n,r){var i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Tn(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,he(u.prefixes)),(a=n.items).push.apply(a,he(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,In(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tn(e,t){null!=t&&"number"===typeof t.maxResults&&Nt("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=un(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,bn)}function Sn(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=At(t.fullServerUrl(),e.host,e._protocol),a=Xt(n,r),o=e.maxOperationRetryTime,u=new Zt(i,"PATCH",tn(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=an(t),u}(e.storage,e._location,t,Qt());return e.storage.makeRequestWithTokens(n,bn)}function Cn(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=At(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Zt(r,"GET",nn(e,n),i);return a.errorHandler=an(t),a}(e.storage,e._location,Qt());return e.storage.makeRequestWithTokens(t,bn).then((function(e){if(null===e)throw new dt("no-download-url","The given file does not have any download URLs.");return e}))}function Nn(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=At(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Zt(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=an(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,bn)}function An(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new It(e._location.bucket,n);return new _n(e.storage,r)}function Rn(e,t){if(e instanceof Ln){var n=e;if(null==n._bucket)throw new dt("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new _n(n,n._bucket);return null!=t?Rn(r,t):r}return void 0!==t?An(e,t):e}function On(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Ln)return new _n(e,t);throw gt("To use ref(service, url), the first argument must be a Storage instance.")}return Rn(e,t)}function Pn(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:It.makeFromBucketSpec(n,e)}function Dn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:z(i,e.app.options.projectId))}var Ln=function(){function e(t,n,r,i,a){_(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ht,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?It.makeFromBucketSpec(i,this._host):Pn(this._host,this.app.options)}return E(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=It.makeFromBucketSpec(this._url,e):this._bucket=Pn(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Nt("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Nt("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=pe(me().mark((function e(){var t,n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=pe(me().mark((function e(){var t,n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new _n(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new Et(kt());var a=function(e,t,n,r,i,a){var o=Rt(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new Ot(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=pe(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Mn="@firebase/storage",Un="0.9.2",Fn="storage";function jn(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new xn(e,new qt(t),n)}(e=le(e),t,n)}function Vn(e){return function(e){e._throwIfRoot("getMetadata");var t=on(e.storage,e._location,Qt());return e.storage.makeRequestWithTokens(t,bn)}(e=le(e))}function Bn(e){return function(e){var t={prefixes:[],items:[]};return In(e,t).then((function(){return t}))}(e=le(e))}function qn(e,t){return On(e=le(e),t)}function zn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Dn(e,t,n,r)}function Kn(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Ln(r,i,a,n,Je)}function Hn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function Wn(){return Wn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Hn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Wn.apply(this,arguments)}Be(new ye(Fn,Kn,"PUBLIC").setMultipleInstances(!0)),nt(Mn,Un,""),nt(Mn,Un,"esm2017");var Gn,Qn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Yn={},Jn=Jn||{},Xn=Qn||self;function $n(){}function Zn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function er(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var tr="closure_uid_"+(1e9*Math.random()>>>0),nr=0;function rr(e,t,n){return e.call.apply(e.bind,arguments)}function ir(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ar(e,t,n){return(ar=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rr:ir).apply(null,arguments)}function or(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ur(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function sr(){this.s=this.s,this.o=this.o}var cr={};sr.prototype.s=!1,sr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,tr)&&e[tr]||(e[tr]=++nr)}(this);delete cr[e]}},sr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var lr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},fr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function hr(e){return Array.prototype.concat.apply([],arguments)}function dr(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function pr(e){return/^[\s\xa0]*$/.test(e)}var vr,mr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function yr(e,t){return-1!=e.indexOf(t)}function gr(e,t){return e<t?-1:e>t?1:0}e:{var kr=Xn.navigator;if(kr){var wr=kr.userAgent;if(wr){vr=wr;break e}}vr=""}function br(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function xr(e){var t={};for(var n in e)t[n]=e[n];return t}var _r="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ir(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<_r.length;a++)n=_r[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Er(e){return Er[" "](e),e}Er[" "]=$n;var Tr,Sr=yr(vr,"Opera"),Cr=yr(vr,"Trident")||yr(vr,"MSIE"),Nr=yr(vr,"Edge"),Ar=Nr||Cr,Rr=yr(vr,"Gecko")&&!(yr(vr.toLowerCase(),"webkit")&&!yr(vr,"Edge"))&&!(yr(vr,"Trident")||yr(vr,"MSIE"))&&!yr(vr,"Edge"),Or=yr(vr.toLowerCase(),"webkit")&&!yr(vr,"Edge");function Pr(){var e=Xn.document;return e?e.documentMode:void 0}e:{var Dr="",Lr=function(){var e=vr;return Rr?/rv:([^\);]+)(\)|;)/.exec(e):Nr?/Edge\/([\d\.]+)/.exec(e):Cr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Or?/WebKit\/(\S+)/.exec(e):Sr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Lr&&(Dr=Lr?Lr[1]:""),Cr){var Mr=Pr();if(null!=Mr&&Mr>parseFloat(Dr)){Tr=String(Mr);break e}}Tr=Dr}var Ur,Fr={};function jr(){return function(e){var t=Fr;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=mr(String(Tr)).split("."),n=mr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=gr(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||gr(0==a[2].length,0==o[2].length)||gr(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Xn.document&&Cr){var Vr=Pr();Ur=Vr||(parseInt(Tr,10)||void 0)}else Ur=void 0;var Br=Ur,qr=function(){if(!Xn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Xn.addEventListener("test",$n,t),Xn.removeEventListener("test",$n,t)}catch(n){}return e}();function zr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Kr(e,t){if(zr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rr){e:{try{Er(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Hr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Kr.Z.h.call(this)}}zr.prototype.h=function(){this.defaultPrevented=!0},ur(Kr,zr);var Hr={2:"touch",3:"pen",4:"mouse"};Kr.prototype.h=function(){Kr.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Wr="closure_listenable_"+(1e6*Math.random()|0),Gr=0;function Qr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Gr,this.ca=this.fa=!1}function Yr(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Jr(e){this.src=e,this.g={},this.h=0}function Xr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=lr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Yr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $r(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Jr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=$r(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Qr(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Zr="closure_lm_"+(1e6*Math.random()|0),ei={};function ti(e,t,n,r,i){if(r&&r.once)return ri(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ti(e,t[a],n,r,i);return null}return n=li(n),e&&e[Wr]?e.N(t,n,er(r)?!!r.capture:!!r,i):ni(e,t,n,!1,r,i)}function ni(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=er(i)?!!i.capture:!!i,u=si(e);if(u||(e[Zr]=u=new Jr(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ui;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)qr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(oi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ri(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ri(e,t[a],n,r,i);return null}return n=li(n),e&&e[Wr]?e.O(t,n,er(r)?!!r.capture:!!r,i):ni(e,t,n,!0,r,i)}function ii(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ii(e,t[a],n,r,i);else r=er(r)?!!r.capture:!!r,n=li(n),e&&e[Wr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$r(a=e.g[t],n,r,i))&&(Yr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=si(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$r(t,n,r,i)),(n=-1<e?t[e]:null)&&ai(n))}function ai(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Wr])Xr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=si(t))?(Xr(n,e),0==n.h&&(n.src=null,t[Zr]=null)):Yr(e)}}}function oi(e){return e in ei?ei[e]:ei[e]="on"+e}function ui(e,t){if(e.ca)e=!0;else{t=new Kr(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ai(e),e=n.call(r,t)}return e}function si(e){return(e=e[Zr])instanceof Jr?e:null}var ci="__closure_events_fn_"+(1e9*Math.random()>>>0);function li(e){return"function"===typeof e?e:(e[ci]||(e[ci]=function(t){return e.handleEvent(t)}),e[ci])}function fi(){sr.call(this),this.i=new Jr(this),this.P=this,this.I=null}function hi(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new zr(t,e);else if(t instanceof zr)t.target=t.target||e;else{var i=t;Ir(t=new zr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=di(o,r,!0,t)&&i}if(i=di(o=t.g=e,r,!0,t)&&i,i=di(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=di(o=t.g=n[a],r,!1,t)&&i}function di(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Xr(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ur(fi,sr),fi.prototype[Wr]=!0,fi.prototype.removeEventListener=function(e,t,n,r){ii(this,e,t,n,r)},fi.prototype.M=function(){if(fi.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Yr(n[r]);delete t.g[e],t.h--}}this.I=null},fi.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},fi.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var pi=Xn.JSON.stringify;function vi(){var e=_i,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var mi,yi=function(){function e(){_(this,e),this.h=this.g=null}return E(e,[{key:"add",value:function(e,t){var n=gi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),gi=new(function(){function e(t,n){_(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return E(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ki}),(function(e){return e.reset()})),ki=function(){function e(){_(this,e),this.next=this.g=this.h=null}return E(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function wi(e){Xn.setTimeout((function(){throw e}),0)}function bi(e,t){mi||function(){var e=Xn.Promise.resolve(void 0);mi=function(){e.then(Ii)}}(),xi||(mi(),xi=!0),_i.add(e,t)}var xi=!1,_i=new yi;function Ii(){for(var e;e=vi();){try{e.h.call(e.g)}catch(n){wi(n)}var t=gi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}xi=!1}function Ei(e,t){fi.call(this),this.h=e||1,this.g=t||Xn,this.j=ar(this.kb,this),this.l=Date.now()}function Ti(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Si(e,t,n){if("function"===typeof e)n&&(e=ar(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ar(e.handleEvent,e)}return 2147483647<Number(t)?-1:Xn.setTimeout(e,t||0)}function Ci(e){e.g=Si((function(){e.g=null,e.i&&(e.i=!1,Ci(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ur(Ei,fi),(Gn=Ei.prototype).da=!1,Gn.S=null,Gn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),hi(this,"tick"),this.da&&(Ti(this),this.start()))}},Gn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Gn.M=function(){Ei.Z.M.call(this),Ti(this),delete this.g};var Ni=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return E(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ci(this)}},{key:"M",value:function(){Wn(A(n.prototype),"M",this).call(this),this.g&&(Xn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(sr);function Ai(e){sr.call(this),this.h=e,this.g={}}ur(Ai,sr);var Ri=[];function Oi(e,t,n,r){Array.isArray(n)||(n&&(Ri[0]=n.toString()),n=Ri);for(var i=0;i<n.length;i++){var a=ti(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Pi(e){br(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ai(e)}),e),e.g={}}function Di(){this.g=!0}function Li(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return pi(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ai.prototype.M=function(){Ai.Z.M.call(this),Pi(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Di.prototype.Aa=function(){this.g=!1},Di.prototype.info=function(){};var Mi={},Ui=null;function Fi(){return Ui=Ui||new fi}function ji(e){zr.call(this,Mi.Ma,e)}function Vi(e){var t=Fi();hi(t,new ji(t,e))}function Bi(e,t){zr.call(this,Mi.STAT_EVENT,e),this.stat=t}function qi(e){var t=Fi();hi(t,new Bi(t,e))}function zi(e,t){zr.call(this,Mi.Na,e),this.size=t}function Ki(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Xn.setTimeout((function(){e()}),t)}Mi.Ma="serverreachability",ur(ji,zr),Mi.STAT_EVENT="statevent",ur(Bi,zr),Mi.Na="timingevent",ur(zi,zr);var Hi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Wi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Gi(){}function Qi(e){return e.h||(e.h=e.i())}function Yi(){}Gi.prototype.h=null;var Ji,Xi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function $i(){zr.call(this,"d")}function Zi(){zr.call(this,"c")}function ea(){}function ta(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ai(this),this.P=ra,e=Ar?125:void 0,this.W=new Ei(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new na}function na(){this.i=null,this.g="",this.h=!1}ur($i,zr),ur(Zi,zr),ur(ea,Gi),ea.prototype.g=function(){return new XMLHttpRequest},ea.prototype.i=function(){return{}},Ji=new ea;var ra=45e3,ia={},aa={};function oa(e,t,n){e.K=1,e.v=Na(_a(t)),e.s=n,e.U=!0,ua(e,null)}function ua(e,t){e.F=Date.now(),fa(e),e.A=_a(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),qa(n.h,"t",r),e.C=0,n=e.l.H,e.h=new na,e.g=Ho(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ni(ar(e.Ia,e,e.g),e.O)),Oi(e.V,e.g,"readystatechange",e.gb),t=e.H?xr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Vi(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function sa(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function ca(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=la(e,n))==aa){4==t&&(e.o=4,qi(14),i=!1),Li(e.j,e.m,null,"[Incomplete Response]");break}if(r==ia){e.o=4,qi(15),Li(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Li(e.j,e.m,r,null),ma(e,r)}sa(e)&&r!=aa&&r!=ia&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,qi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Uo(t),t.L=!0,qi(11))):(Li(e.j,e.m,n,"[Invalid Chunked Response]"),va(e),pa(e))}function la(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?aa:(n=Number(t.substring(n,r)),isNaN(n)?ia:(r+=1)+n>t.length?aa:(t=t.substr(r,n),e.C=r+n,t))}function fa(e){e.Y=Date.now()+e.P,ha(e,e.P)}function ha(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ki(ar(e.eb,e),t)}function da(e){e.B&&(Xn.clearTimeout(e.B),e.B=null)}function pa(e){0==e.l.G||e.I||Vo(e.l,e)}function va(e){da(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ti(e.W),Pi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ma(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ja(n.i,e)))if(n.I=e.N,!e.J&&Ja(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;jo(n),Co(n)}Mo(n),qi(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ki(ar(n.ab,n),6e3));if(1>=Ya(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else qo(n,11)}else if((e.J||n.g==e)&&jo(n),!pr(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(yr(l,"spdy")||yr(l,"quic")||yr(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Xa(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Ca(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ko(r,r.H?r.la:null,r.W),d.J){$a(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(da(p),fa(p)),r.g=d}else Lo(r);0<n.l.length&&Ro(n)}else"stop"!=a[0]&&"close"!=a[0]||qo(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?qo(n,7):So(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Vi(4)}catch(a){}}function ya(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Zn(e)||"string"===typeof e)fr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Zn(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Zn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function ga(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ga)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ka(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];wa(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)wa(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function wa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Gn=ta.prototype).setTimeout=function(e){this.P=e},Gn.gb=function(e){e=e.target;var t=this.L;t&&3==xo(e)?t.l():this.Ia(e)},Gn.Ia=function(e){try{if(e==this.g)e:{var t=xo(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ar||this.g&&(this.h.h||this.g.ga()||_o(this.g)))){this.I||4!=t||7==n||Vi(8==n||0>=r?3:2),da(this);var i=this.g.ba();this.N=i;t:if(sa(this)){var a=_o(this.g);e="";var o=a.length,u=4==xo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){va(this),pa(this);var s="";break t}this.h.i=new Xn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pr(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,qi(12),va(this),pa(this);break e}Li(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ma(this,i)}this.U?(ca(this,t,s),Ar&&this.i&&3==t&&(Oi(this.V,this.W,"tick",this.fb),this.W.start())):(Li(this.j,this.m,s,null),ma(this,s)),4==t&&va(this),this.i&&!this.I&&(4==t?Vo(this.l,this):(this.i=!1,fa(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,qi(12)):(this.o=0,qi(13)),va(this),pa(this)}}}catch(t){}},Gn.fb=function(){if(this.g){var e=xo(this.g),t=this.g.ga();this.C<t.length&&(da(this),ca(this,e,t),this.i&&4!=e&&fa(this))}},Gn.cancel=function(){this.I=!0,va(this)},Gn.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Vi(3),qi(17)),va(this),this.o=2,pa(this)):ha(this,this.Y-e)},(Gn=ga.prototype).R=function(){ka(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Gn.T=function(){return ka(this),this.g.concat()},Gn.get=function(e,t){return wa(this.h,e)?this.h[e]:t},Gn.set=function(e,t){wa(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Gn.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var ba=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xa(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof xa){this.g=void 0!==t?t:e.g,Ia(this,e.j),this.s=e.s,Ea(this,e.i),Ta(this,e.m),this.l=e.l,t=e.h;var n=new Fa;n.i=t.i,t.g&&(n.g=new ga(t.g),n.h=t.h),Sa(this,n),this.o=e.o}else e&&(n=String(e).match(ba))?(this.g=!!t,Ia(this,n[1]||"",!0),this.s=Aa(n[2]||""),Ea(this,n[3]||"",!0),Ta(this,n[4]),this.l=Aa(n[5]||"",!0),Sa(this,n[6]||"",!0),this.o=Aa(n[7]||"")):(this.g=!!t,this.h=new Fa(null,this.g))}function _a(e){return new xa(e)}function Ia(e,t,n){e.j=n?Aa(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ea(e,t,n){e.i=n?Aa(t,!0):t}function Ta(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Sa(e,t,n){t instanceof Fa?(e.h=t,function(e,t){t&&!e.j&&(ja(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Va(this,t),qa(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ra(t,Ma)),e.h=new Fa(t,e.g))}function Ca(e,t,n){e.h.set(t,n)}function Na(e){return Ca(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Aa(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ra(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Oa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Oa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ra(t,Pa,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ra(t,Pa,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ra(n,"/"==n.charAt(0)?La:Da,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ra(n,Ua)),e.join("")};var Pa=/[#\/\?@]/g,Da=/[#\?:]/g,La=/[#\?]/g,Ma=/[#\?@]/g,Ua=/#/g;function Fa(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ja(e){e.g||(e.g=new ga,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Va(e,t){ja(e),t=za(e,t),wa(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,wa((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ka(e)))}function Ba(e,t){return ja(e),t=za(e,t),wa(e.g.h,t)}function qa(e,t,n){Va(e,t),0<n.length&&(e.i=null,e.g.set(za(e,t),dr(n)),e.h+=n.length)}function za(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Gn=Fa.prototype).add=function(e,t){ja(this),this.i=null,e=za(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Gn.forEach=function(e,t){ja(this),this.g.forEach((function(n,r){fr(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Gn.T=function(){ja(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Gn.R=function(e){ja(this);var t=[];if("string"===typeof e)Ba(this,e)&&(t=hr(t,this.g.get(za(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=hr(t,e[n])}return t},Gn.set=function(e,t){return ja(this),this.i=null,Ba(this,e=za(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Gn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Gn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Ka=E((function e(t,n){_(this,e),this.h=t,this.g=n}));function Ha(e){this.l=e||Ga,Xn.PerformanceNavigationTiming?e=0<(e=Xn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Xn.g&&Xn.g.Ea&&Xn.g.Ea()&&Xn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Wa,Ga=10;function Qa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ya(e){return e.h?1:e.g?e.g.size:0}function Ja(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Xa(e,t){e.g?e.g.add(t):e.h=t}function $a(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Za(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return dr(e.i)}function eo(){}function to(){this.g=new eo}function no(e,t,n){var r=n||"";try{ya(e,(function(e,n){var i=e;er(e)&&(i=pi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ro(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function io(e){this.l=e.$b||null,this.j=e.ib||!1}function ao(e,t){fi.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=oo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ha.prototype.cancel=function(){if(this.i=Za(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},eo.prototype.stringify=function(e){return Xn.JSON.stringify(e,void 0)},eo.prototype.parse=function(e){return Xn.JSON.parse(e,void 0)},ur(io,Gi),io.prototype.g=function(){return new ao(this.l,this.j)},io.prototype.i=(Wa={},function(){return Wa}),ur(ao,fi);var oo=0;function uo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function so(e){e.readyState=4,e.l=null,e.j=null,e.A=null,co(e)}function co(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Gn=ao.prototype).open=function(e,t){if(this.readyState!=oo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,co(this)},Gn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Xn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Gn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,so(this)),this.readyState=oo},Gn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Xn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Gn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?so(this):co(this),3==this.readyState&&uo(this)}},Gn.Ua=function(e){this.g&&(this.response=this.responseText=e,so(this))},Gn.Ta=function(e){this.g&&(this.response=e,so(this))},Gn.ha=function(){this.g&&so(this)},Gn.setRequestHeader=function(e,t){this.v.append(e,t)},Gn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Gn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ao.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var lo=Xn.JSON.parse;function fo(e){fi.call(this),this.headers=new ga,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ho,this.K=this.L=!1}ur(fo,fi);var ho="",po=/^https?$/i,vo=["POST","PUT"];function mo(e){return"content-type"==e.toLowerCase()}function yo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,go(e),wo(e)}function go(e){e.D||(e.D=!0,hi(e,"complete"),hi(e,"error"))}function ko(e){if(e.h&&"undefined"!=typeof Jn&&(!e.C[1]||4!=xo(e)||2!=e.ba()))if(e.v&&4==xo(e))Si(e.Fa,0,e);else if(hi(e,"readystatechange"),4==xo(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ba)[1]||null;if(!a&&Xn.self&&Xn.self.location){var o=Xn.self.location.protocol;a=o.substr(0,o.length-1)}i=!po.test(a?a.toLowerCase():"")}t=i}if(t)hi(e,"complete"),hi(e,"success");else{e.m=6;try{var u=2<xo(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",go(e)}}finally{wo(e)}}}function wo(e,t){if(e.g){bo(e);var n=e.g,r=e.C[0]?$n:null;e.g=null,e.C=null,t||hi(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function bo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Xn.clearTimeout(e.A),e.A=null)}function xo(e){return e.g?e.g.readyState:0}function _o(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ho:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Io(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return br(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ca(e,t,n))}function Eo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function To(e){this.za=0,this.l=[],this.h=new Di,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Eo("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Eo("baseRetryDelayMs",5e3,e),this.$a=Eo("retryDelaySeedMs",1e4,e),this.Ya=Eo("forwardChannelMaxRetries",2,e),this.ra=Eo("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ha(e&&e.concurrentRequestLimit),this.Ca=new to,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function So(e){if(No(e),3==e.G){var t=e.V++,n=_a(e.F);Ca(n,"SID",e.J),Ca(n,"RID",t),Ca(n,"TYPE","terminate"),Po(e,n),(t=new ta(e,e.h,t,void 0)).K=2,t.v=Na(_a(n)),n=!1,Xn.navigator&&Xn.navigator.sendBeacon&&(n=Xn.navigator.sendBeacon(t.v.toString(),"")),!n&&Xn.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ho(t.l,null),t.g.ea(t.v)),t.F=Date.now(),fa(t)}zo(e)}function Co(e){e.g&&(Uo(e),e.g.cancel(),e.g=null)}function No(e){Co(e),e.u&&(Xn.clearTimeout(e.u),e.u=null),jo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Xn.clearTimeout(e.m),e.m=null)}function Ao(e,t){e.l.push(new Ka(e.Za++,t)),3==e.G&&Ro(e)}function Ro(e){Qa(e.i)||e.m||(e.m=!0,bi(e.Ha,e),e.C=0)}function Oo(e,t){var n;n=t?t.m:e.V++;var r=_a(e.F);Ca(r,"SID",e.J),Ca(r,"RID",n),Ca(r,"AID",e.U),Po(e,r),e.o&&e.s&&Io(r,e.o,e.s),n=new ta(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Do(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Xa(e.i,n),oa(n,r,t)}function Po(e,t){e.j&&ya({},(function(e,n){Ca(t,n,e)}))}function Do(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ar(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{no(l,o,"req"+c+"_")}catch(ku){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Lo(e){e.g||e.u||(e.Y=1,bi(e.Ga,e),e.A=0)}function Mo(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Ki(ar(e.Ga,e),Bo(e,e.A)),e.A++,!0)}function Uo(e){null!=e.B&&(Xn.clearTimeout(e.B),e.B=null)}function Fo(e){e.g=new ta(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=_a(e.oa);Ca(t,"RID","rpc"),Ca(t,"SID",e.J),Ca(t,"CI",e.N?"0":"1"),Ca(t,"AID",e.U),Po(e,t),Ca(t,"TYPE","xmlhttp"),e.o&&e.s&&Io(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Na(_a(t)),n.s=null,n.U=!0,ua(n,e)}function jo(e){null!=e.v&&(Xn.clearTimeout(e.v),e.v=null)}function Vo(e,t){var n=null;if(e.g==t){jo(e),Uo(e),e.g=null;var r=2}else{if(!Ja(e.i,t))return;n=t.D,$a(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;hi(r=Fi(),new zi(r,n,t,i)),Ro(e)}else Lo(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ya(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Ki(ar(e.Ha,e,t),Bo(e,e.C)),e.C++,!0))}(e,t)||2==r&&Mo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qo(e,5);break;case 4:qo(e,10);break;case 3:qo(e,6);break;default:qo(e,2)}}function Bo(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function qo(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ar(e.jb,e);n||(n=new xa("//www.google.com/images/cleardot.gif"),Xn.location&&"http"==Xn.location.protocol||Ia(n,"https"),Na(n)),function(e,t){var n=new Di;if(Xn.Image){var r=new Image;r.onload=or(ro,n,r,"TestLoadImage: loaded",!0,t),r.onerror=or(ro,n,r,"TestLoadImage: error",!1,t),r.onabort=or(ro,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=or(ro,n,r,"TestLoadImage: timeout",!1,t),Xn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else qi(2);e.G=0,e.j&&e.j.va(t),zo(e),No(e)}function zo(e){e.G=0,e.I=-1,e.j&&(0==Za(e.i).length&&0==e.l.length||(e.i.i.length=0,dr(e.l),e.l.length=0),e.j.ua())}function Ko(e,t,n){var r=function(e){return e instanceof xa?_a(e):new xa(e,void 0)}(n);if(""!=r.i)t&&Ea(r,t+"."+r.i),Ta(r,r.m);else{var i=Xn.location;r=function(e,t,n,r){var i=new xa(null,void 0);return e&&Ia(i,e),t&&Ea(i,t),n&&Ta(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&br(e.aa,(function(e,t){Ca(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ca(r,t,n),Ca(r,"VER",e.ma),Po(e,r),r}function Ho(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new fo(new io({ib:!0})):new fo(e.qa)).L=e.H,t}function Wo(){}function Go(){if(Cr&&!(10<=Number(Br)))throw Error("Environmental error: no available transport.")}function Qo(e,t){fi.call(this),this.g=new To(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!pr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!pr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Xo(this)}function Yo(e){$i.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Jo(){Zi.call(this),this.status=1}function Xo(e){this.g=e}(Gn=fo.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ji.g(),this.C=this.u?Qi(this.u):Qi(Ji),this.g.onreadystatechange=ar(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void yo(this,a)}e=n||"";var i=new ga(this.headers);r&&ya(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=mo,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Xn.FormData&&e instanceof Xn.FormData,!(0<=lr(vo,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bo(this),0<this.B&&((this.K=function(e){return Cr&&jr()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ar(this.pa,this)):this.A=Si(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){yo(this,a)}},Gn.pa=function(){"undefined"!=typeof Jn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hi(this,"timeout"),this.abort(8))},Gn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hi(this,"complete"),hi(this,"abort"),wo(this))},Gn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wo(this,!0)),fo.Z.M.call(this)},Gn.Fa=function(){this.s||(this.F||this.v||this.l?ko(this):this.cb())},Gn.cb=function(){ko(this)},Gn.ba=function(){try{return 2<xo(this)?this.g.status:-1}catch(Wa){return-1}},Gn.ga=function(){try{return this.g?this.g.responseText:""}catch(Wa){return""}},Gn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),lo(t)}},Gn.Da=function(){return this.m},Gn.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Gn=To.prototype).ma=8,Gn.G=1,Gn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Gn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ta(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Ir(n=xr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Do(this,t,r),Ca(i=_a(this.F),"RID",e),Ca(i,"CVER",22),this.D&&Ca(i,"X-HTTP-Session-Id",this.D),Po(this,i),this.o&&n&&Io(i,this.o,n),Xa(this.i,t),this.Ra&&Ca(i,"TYPE","init"),this.ja?(Ca(i,"$req",r),Ca(i,"SID","null"),t.$=!0,oa(t,i,null)):oa(t,i,r),this.G=2}}else 3==this.G&&(e?Oo(this,e):0==this.l.length||Qa(this.i)||Oo(this))},Gn.Ga=function(){if(this.u=null,Fo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ki(ar(this.bb,this),e)}},Gn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qi(10),Co(this),Fo(this))},Gn.ab=function(){null!=this.v&&(this.v=null,Co(this),Mo(this),qi(19))},Gn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),qi(2)):(this.h.info("Failed to ping google.com"),qi(1))},(Gn=Wo.prototype).xa=function(){},Gn.wa=function(){},Gn.va=function(){},Gn.ua=function(){},Gn.Oa=function(){},Go.prototype.g=function(e,t){return new Qo(e,t)},ur(Qo,fi),Qo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),bi(ar(e.hb,e,t))),qi(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ko(e,null,e.W),Ro(e)},Qo.prototype.close=function(){So(this.g)},Qo.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ao(this.g,t)}else this.v?((t={}).__data__=pi(e),Ao(this.g,t)):Ao(this.g,e)},Qo.prototype.M=function(){this.g.j=null,delete this.j,So(this.g),delete this.g,Qo.Z.M.call(this)},ur(Yo,$i),ur(Jo,Zi),ur(Xo,Wo),Xo.prototype.xa=function(){hi(this.g,"a")},Xo.prototype.wa=function(e){hi(this.g,new Yo(e))},Xo.prototype.va=function(e){hi(this.g,new Jo(e))},Xo.prototype.ua=function(){hi(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Qo.prototype.send=Qo.prototype.u,Qo.prototype.open=Qo.prototype.m,Qo.prototype.close=Qo.prototype.close,Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,Wi.COMPLETE="complete",Yi.EventType=Xi,Xi.OPEN="a",Xi.CLOSE="b",Xi.ERROR="c",Xi.MESSAGE="d",fi.prototype.listen=fi.prototype.N,fo.prototype.listenOnce=fo.prototype.O,fo.prototype.getLastError=fo.prototype.La,fo.prototype.getLastErrorCode=fo.prototype.Da,fo.prototype.getStatus=fo.prototype.ba,fo.prototype.getResponseJson=fo.prototype.Qa,fo.prototype.getResponseText=fo.prototype.ga,fo.prototype.send=fo.prototype.ea;var $o=Yn.createWebChannelTransport=function(){return new Go},Zo=Yn.getStatEventTarget=function(){return Fi()},eu=Yn.ErrorCode=Hi,tu=Yn.EventType=Wi,nu=Yn.Event=Mi,ru=Yn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},iu=Yn.FetchXmlHttpFactory=io,au=Yn.WebChannel=Yi,ou=Yn.XhrIo=fo,uu="@firebase/firestore",su=function(){function e(t){_(this,e),this.uid=t}return E(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();su.UNAUTHENTICATED=new su(null),su.GOOGLE_CREDENTIALS=new su("google-credentials-uid"),su.FIRST_PARTY=new su("first-party-uid"),su.MOCK_USER=new su("mock-user");var cu="9.6.7",lu=new Ae("@firebase/firestore");function fu(){return lu.logLevel}function hu(e){if(lu.logLevel<=be.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vu);lu.debug.apply(lu,["Firestore (".concat(cu,"): ").concat(e)].concat(he(i)))}}function du(e){if(lu.logLevel<=be.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vu);lu.error.apply(lu,["Firestore (".concat(cu,"): ").concat(e)].concat(he(i)))}}function pu(e){if(lu.logLevel<=be.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vu);lu.warn.apply(lu,["Firestore (".concat(cu,"): ").concat(e)].concat(he(i)))}}function vu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function mu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(cu,") INTERNAL ASSERTION FAILED: ")+e;throw du(t),new Error(t)}function yu(e,t){e||mu()}function gu(e,t){return e}var ku={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},wu=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return E(n)}(X),bu=E((function e(){var t=this;_(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),xu=E((function e(t,n){_(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),_u=function(){function e(){_(this,e)}return E(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(su.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Iu=function(){function e(t){_(this,e),this.token=t,this.changeListener=null}return E(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Eu=function(){function e(t){_(this,e),this.t=t,this.currentUser=su.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new bu;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new bu,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){hu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(hu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bu)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(hu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(yu("string"==typeof n.accessToken),new xu(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return yu(null===e||"string"==typeof e),new su(e)}}]),e}(),Tu=E((function e(t,n,r){_(this,e),this.type="FirstParty",this.user=su.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Su=function(){function e(t,n,r){_(this,e),this.h=t,this.l=n,this.m=r}return E(e,[{key:"getToken",value:function(){return Promise.resolve(new Tu(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(su.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Cu=E((function e(t){_(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Nu=function(){function e(t){_(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&hu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,hu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){hu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):hu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(yu("string"==typeof t.token),e.p=t.token,new Cu(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Au=function(){function e(t,n){var r=this;_(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return E(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Ru(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Au.A=-1;var Ou=function(){function e(){_(this,e)}return E(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Ru(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Pu(e,t){return e<t?-1:e>t?1:0}function Du(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Lu(e){return e+"\0"}var Mu=function(){function e(t,n){if(_(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new wu(ku.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new wu(ku.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new wu(ku.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new wu(ku.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return E(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Pu(this.nanoseconds,e.nanoseconds):Pu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Uu=function(){function e(t){_(this,e),this.timestamp=t}return E(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Mu(0,0))}}]),e}();function Fu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ju(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Bu=function(){function e(t,n,r){_(this,e),void 0===n?n=0:n>t.length&&mu(),void 0===r?r=t.length-n:r>t.length-n&&mu(),this.segments=t,this.offset=n,this.len=r}return E(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),qu=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new wu(ku.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,he(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Bu),zu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ku=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return zu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new wu(ku.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new wu(ku.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new wu(ku.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new wu(ku.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Bu),Hu=function(){function e(t){_(this,e),this.fields=t,t.sort(Ku.comparator)}return E(e,[{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Du(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Wu=function(e){function t(e){_(this,t),this.binaryString=e}return E(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Pu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Wu.EMPTY_BYTE_STRING=new Wu("");var Gu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qu(e){if(yu(!!e),"string"==typeof e){var t=0,n=Gu.exec(e);if(yu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Yu(e.seconds),nanos:Yu(e.nanos)}}function Yu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ju(e){return"string"==typeof e?Wu.fromBase64String(e):Wu.fromUint8Array(e)}function Xu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $u(e){var t=e.mapValue.fields.__previous_value__;return Xu(t)?$u(t):t}function Zu(e){var t=Qu(e.mapValue.fields.__local_write_time__.timestampValue);return new Mu(t.seconds,t.nanos)}var es=E((function e(t,n,r,i,a,o,u,s){_(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ts=function(){function e(t,n){_(this,e),this.projectId=t,this.database=n||"(default)"}return E(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function ns(e){return null==e}function rs(e){return 0===e&&1/e==-1/0}function is(e){return"number"==typeof e&&Number.isInteger(e)&&!rs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var as=function(){function e(t){_(this,e),this.path=t}return E(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===qu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(qu.fromString(t))}},{key:"fromName",value:function(t){return new e(qu.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(qu.emptyPath())}},{key:"comparator",value:function(e,t){return qu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new qu(t.slice()))}}]),e}(),os={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function us(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xu(e)?4:10:mu()}function ss(e,t){if(e===t)return!0;var n=us(e);if(n!==us(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zu(e).isEqual(Zu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Qu(e.timestampValue),r=Qu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ju(e.bytesValue).isEqual(Ju(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yu(e.geoPointValue.latitude)===Yu(t.geoPointValue.latitude)&&Yu(e.geoPointValue.longitude)===Yu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yu(e.integerValue)===Yu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Yu(e.doubleValue),r=Yu(t.doubleValue);return n===r?rs(n)===rs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Du(e.arrayValue.values||[],t.arrayValue.values||[],ss);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fu(n)!==Fu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ss(n[i],r[i])))return!1;return!0}(e,t);default:return mu()}}function cs(e,t){return void 0!==(e.values||[]).find((function(e){return ss(e,t)}))}function ls(e,t){if(e===t)return 0;var n=us(e),r=us(t);if(n!==r)return Pu(n,r);switch(n){case 0:return 0;case 1:return Pu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Yu(e.integerValue||e.doubleValue),r=Yu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fs(e.timestampValue,t.timestampValue);case 4:return fs(Zu(e),Zu(t));case 5:return Pu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Ju(e),r=Ju(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Pu(n[i],r[i]);if(0!==a)return a}return Pu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Pu(Yu(e.latitude),Yu(t.latitude));return 0!==n?n:Pu(Yu(e.longitude),Yu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ls(n[i],r[i]);if(a)return a}return Pu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Pu(r[o],a[o]);if(0!==u)return u;var s=ls(n[r[o]],i[a[o]]);if(0!==s)return s}return Pu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw mu()}}function fs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pu(e,t);var n=Qu(e),r=Qu(t),i=Pu(n.seconds,r.seconds);return 0!==i?i:Pu(n.nanos,r.nanos)}function hs(e){return ds(e)}function ds(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Qu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ju(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,as.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ds(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ds(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):mu();var t,n}function ps(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vs(e){return!!e&&"integerValue"in e}function ms(e){return!!e&&"arrayValue"in e}function ys(e){return!!e&&"nullValue"in e}function gs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ks(e){return!!e&&"mapValue"in e}function ws(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ju(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ws(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ws(e.arrayValue.values[r]);return n}return Object.assign({},e)}var bs=function(){function e(t){_(this,e),this.value=t}return E(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ks(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ws(t)}},{key:"setAll",value:function(e){var t=this,n=Ku.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ws(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ks(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ss(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ks(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ju(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ws(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function xs(e){var t=[];return ju(e.fields,(function(e,n){var r=new Ku([e]);if(ks(n)){var i=xs(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=T(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Hu(t)}var _s=function(){function e(t,n,r,i,a,o){_(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return E(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bs.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bs.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Uu.min(),Uu.min(),bs.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Uu.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Uu.min(),bs.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Uu.min(),bs.empty(),2)}}]),e}(),Is=E((function e(t,n,r,i){_(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Is.UNKNOWN_ID=-1;var Es=E((function e(t,n){_(this,e),this.fieldPath=t,this.kind=n})),Ts=function(){function e(t,n){_(this,e),this.sequenceNumber=t,this.offset=n}return E(e,null,[{key:"empty",value:function(){return new e(0,Ss.min())}}]),e}(),Ss=function(){function e(t,n,r){_(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return E(e,null,[{key:"min",value:function(){return new e(Uu.min(),as.empty(),-1)}}]),e}(),Cs=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;_(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Ns(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Cs(e,t,n,r,i,a,o)}function As(e){var t=gu(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+hs(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ns(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return hs(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return hs(e)})).join(",")),t.P=n}return t.P}function Rs(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ks(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!ss(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ws(e.startAt,t.startAt)&&Ws(e.endAt,t.endAt)}function Os(e){return as.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Ps=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(ls(t,this.value)):null!==t&&us(this.value)===us(t)&&this.V(ls(t,this.value))}},{key:"V",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mu()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new Ds(e,t,r):"array-contains"===t?new Fs(e,r):"in"===t?new js(e,r):"not-in"===t?new Vs(e,r):"array-contains-any"===t?new Bs(e,r):new n(e,t,r)}},{key:"v",value:function(e,t,n){return"in"===t?new Ls(e,n):new Ms(e,n)}}]),n}(function(){return E((function e(){_(this,e)}))}()),Ds=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,i)).key=as.fromName(i.referenceValue),a}return E(n,[{key:"matches",value:function(e){var t=as.comparator(e.key,this.key);return this.V(t)}}]),n}(Ps),Ls=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,"in",r)).keys=Us("in",r),i}return E(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ps),Ms=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,"not-in",r)).keys=Us("not-in",r),i}return E(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ps);function Us(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return as.fromName(e.referenceValue)}))}var Fs=function(e){N(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"array-contains",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ms(t)&&cs(t.arrayValue,this.value)}}]),n}(Ps),js=function(e){N(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"in",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&cs(this.value.arrayValue,t)}}]),n}(Ps),Vs=function(e){N(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"not-in",r)}return E(n,[{key:"matches",value:function(e){if(cs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!cs(this.value.arrayValue,t)}}]),n}(Ps),Bs=function(e){N(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"array-contains-any",r)}return E(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ms(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return cs(t.value.arrayValue,e)}))}}]),n}(Ps),qs=E((function e(t,n){_(this,e),this.position=t,this.inclusive=n})),zs=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";_(this,e),this.field=t,this.dir=n}));function Ks(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Hs(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?as.comparator(as.fromName(o.referenceValue),n.key):ls(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ws(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ss(e.position[n],t.position[n]))return!1;return!0}var Gs=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;_(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Qs(e,t,n,r,i,a,o,u){return new Gs(e,t,n,r,i,a,o,u)}function Ys(e){return new Gs(e)}function Js(e){return!ns(e.limit)&&"F"===e.limitType}function Xs(e){return!ns(e.limit)&&"L"===e.limitType}function $s(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Zs(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ec(e){return null!==e.collectionGroup}function tc(e){var t=gu(e);if(null===t.D){t.D=[];var n=Zs(t),r=$s(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new zs(n)),t.D.push(new zs(Ku.keyField(),"asc"));else{var i,a=!1,o=T(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new zs(Ku.keyField(),s))}}}return t.D}function nc(e){var t=gu(e);if(!t.C)if("F"===t.limitType)t.C=Ns(t.path,t.collectionGroup,tc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=T(tc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new zs(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new qs(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new qs(t.startAt.position,!t.startAt.inclusive):null;t.C=Ns(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function rc(e,t,n){return new Gs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ic(e,t){return Rs(nc(e),nc(t))&&e.limitType===t.limitType}function ac(e){return"".concat(As(nc(e)),"|lt:").concat(e.limitType)}function oc(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(hs(t.value));var t})).join(", "),"]")),ns(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return hs(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return hs(e)})).join(",")),"Target(".concat(t,")")}(nc(e)),"; limitType=").concat(e.limitType,")")}function uc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):as.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Hs(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,tc(e),t))&&!(e.endAt&&!function(e,t,n){var r=Hs(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,tc(e),t))}(e,t)}function sc(e){return function(t,n){var r,i=!1,a=T(tc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=cc(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function cc(e,t,n){var r=e.field.isKeyField()?as.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ls(r,i):mu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return mu()}}function lc(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rs(t)?"-0":t}}function fc(e){return{integerValue:""+e}}function hc(e,t){return is(t)?fc(t):lc(e,t)}var dc=E((function e(){_(this,e),this._=void 0}));function pc(e,t,n){return e instanceof yc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof gc?kc(e,t):e instanceof wc?bc(e,t):function(e,t){var n=mc(e,t),r=_c(n)+_c(e.k);return vs(n)&&vs(e.k)?fc(r):lc(e.O,r)}(e,t)}function vc(e,t,n){return e instanceof gc?kc(e,t):e instanceof wc?bc(e,t):n}function mc(e,t){return e instanceof xc?vs(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var yc=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n)}(dc),gc=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).elements=e,r}return E(n)}(dc);function kc(e,t){var n,r=Ic(t),i=T(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return ss(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var wc=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).elements=e,r}return E(n)}(dc);function bc(e,t){var n,r=Ic(t),i=T(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!ss(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var xc=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).O=e,i.k=r,i}return E(n)}(dc);function _c(e){return Yu(e.integerValue||e.doubleValue)}function Ic(e){return ms(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ec=E((function e(t,n){_(this,e),this.field=t,this.transform=n}));var Tc=E((function e(t,n){_(this,e),this.version=t,this.transformResults=n})),Sc=function(){function e(t,n){_(this,e),this.updateTime=t,this.exists=n}return E(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Cc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Nc=E((function e(){_(this,e)}));function Ac(e,t,n){e instanceof Lc?function(e,t,n){var r=e.value.clone(),i=Fc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Mc?function(e,t,n){if(Cc(e.precondition,t)){var r=Fc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Uc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Rc(e,t,n){e instanceof Lc?function(e,t,n){if(Cc(e.precondition,t)){var r=e.value.clone(),i=jc(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Dc(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Mc?function(e,t,n){if(Cc(e.precondition,t)){var r=jc(e.fieldTransforms,n,t),i=t.data;i.setAll(Uc(e)),i.setAll(r),t.convertToFoundDocument(Dc(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Cc(e.precondition,t)&&t.convertToNoDocument(Uu.min())}(e,t)}function Oc(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=mc(a.transform,o||null);null!=u&&(null==r&&(r=bs.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Pc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Du(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gc&&t instanceof gc||e instanceof wc&&t instanceof wc?Du(e.elements,t.elements,ss):e instanceof xc&&t instanceof xc?ss(e.k,t.k):e instanceof yc&&t instanceof yc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Dc(e){return e.isFoundDocument()?e.version:Uu.min()}var Lc=function(e){N(n,e);var t=D(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return _(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return E(n)}(Nc),Mc=function(e){N(n,e);var t=D(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return _(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return E(n)}(Nc);function Uc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Fc(e,t,n){var r=new Map;yu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,vc(o,u,n[i]))}return r}function jc(e,t,n){var r,i=new Map,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,pc(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Vc,Bc,qc=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return E(n)}(Nc),zc=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return E(n)}(Nc),Kc=E((function e(t){_(this,e),this.count=t}));function Hc(e){switch(e){default:return mu();case ku.CANCELLED:case ku.UNKNOWN:case ku.DEADLINE_EXCEEDED:case ku.RESOURCE_EXHAUSTED:case ku.INTERNAL:case ku.UNAVAILABLE:case ku.UNAUTHENTICATED:return!1;case ku.INVALID_ARGUMENT:case ku.NOT_FOUND:case ku.ALREADY_EXISTS:case ku.PERMISSION_DENIED:case ku.FAILED_PRECONDITION:case ku.ABORTED:case ku.OUT_OF_RANGE:case ku.UNIMPLEMENTED:case ku.DATA_LOSS:return!0}}function Wc(e){if(void 0===e)return du("GRPC error has no .code"),ku.UNKNOWN;switch(e){case Vc.OK:return ku.OK;case Vc.CANCELLED:return ku.CANCELLED;case Vc.UNKNOWN:return ku.UNKNOWN;case Vc.DEADLINE_EXCEEDED:return ku.DEADLINE_EXCEEDED;case Vc.RESOURCE_EXHAUSTED:return ku.RESOURCE_EXHAUSTED;case Vc.INTERNAL:return ku.INTERNAL;case Vc.UNAVAILABLE:return ku.UNAVAILABLE;case Vc.UNAUTHENTICATED:return ku.UNAUTHENTICATED;case Vc.INVALID_ARGUMENT:return ku.INVALID_ARGUMENT;case Vc.NOT_FOUND:return ku.NOT_FOUND;case Vc.ALREADY_EXISTS:return ku.ALREADY_EXISTS;case Vc.PERMISSION_DENIED:return ku.PERMISSION_DENIED;case Vc.FAILED_PRECONDITION:return ku.FAILED_PRECONDITION;case Vc.ABORTED:return ku.ABORTED;case Vc.OUT_OF_RANGE:return ku.OUT_OF_RANGE;case Vc.UNIMPLEMENTED:return ku.UNIMPLEMENTED;case Vc.DATA_LOSS:return ku.DATA_LOSS;default:return mu()}}(Bc=Vc||(Vc={}))[Bc.OK=0]="OK",Bc[Bc.CANCELLED=1]="CANCELLED",Bc[Bc.UNKNOWN=2]="UNKNOWN",Bc[Bc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bc[Bc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bc[Bc.NOT_FOUND=5]="NOT_FOUND",Bc[Bc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bc[Bc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bc[Bc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bc[Bc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bc[Bc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bc[Bc.ABORTED=10]="ABORTED",Bc[Bc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bc[Bc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bc[Bc.INTERNAL=13]="INTERNAL",Bc[Bc.UNAVAILABLE=14]="UNAVAILABLE",Bc[Bc.DATA_LOSS=15]="DATA_LOSS";var Gc=function(){function e(t,n){_(this,e),this.comparator=t,this.root=n||Yc.EMPTY}return E(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Yc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Qc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Qc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Qc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Qc(this.root,e,this.comparator,!0)}}]),e}(),Qc=function(){function e(t,n,r,i){_(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return E(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Yc=function(){function e(t,n,r,i,a){_(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return E(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw mu();if(this.right.isRed())throw mu();var e=this.left.check();if(e!==this.right.check())throw mu();return e+(this.isRed()?0:1)}}]),e}();Yc.EMPTY=null,Yc.RED=!0,Yc.BLACK=!1,Yc.EMPTY=new(function(){function e(){_(this,e),this.size=0}return E(e,[{key:"key",get:function(){throw mu()}},{key:"value",get:function(){throw mu()}},{key:"color",get:function(){throw mu()}},{key:"left",get:function(){throw mu()}},{key:"right",get:function(){throw mu()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Yc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Jc=function(){function e(t){_(this,e),this.comparator=t,this.data=new Gc(this.comparator)}return E(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Xc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Xc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Xc=function(){function e(t){_(this,e),this.iter=t}return E(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function $c(e){return e.hasNext()?e.getNext():void 0}var Zc=new Gc(as.comparator);function el(){return Zc}var tl=new Gc(as.comparator);function nl(){return tl}var rl=new Gc(as.comparator),il=new Jc(as.comparator);function al(){for(var e=il,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var ol=new Jc(Pu);function ul(){return ol}var sl=function(){function e(t,n,r,i,a){_(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return E(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,cl.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Uu.min(),r,ul(),el(),al())}}]),e}(),cl=function(){function e(t,n,r,i,a){_(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return E(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Wu.EMPTY_BYTE_STRING,n,al(),al(),al())}}]),e}(),ll=E((function e(t,n,r,i){_(this,e),this.M=t,this.removedTargetIds=n,this.key=r,this.$=i})),fl=E((function e(t,n){_(this,e),this.targetId=t,this.F=n})),hl=E((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),dl=function(){function e(){_(this,e),this.B=0,this.L=ml(),this.U=Wu.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return E(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=al(),t=al(),n=al();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:mu()}})),new cl(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=ml()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),pl=function(){function e(t){_(this,e),this.nt=t,this.st=new Map,this.it=el(),this.rt=vl(),this.ot=new Jc(Pu)}return E(e,[{key:"ct",value:function(e){var t,n=T(e.M);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.at(r,e.key,e.$)}}catch(u){n.e(u)}finally{n.f()}var i,a=T(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:mu()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var i=r.target;if(Os(i))if(0===n){var a=new as(i.path);this.at(t,a,_s.newNoDocument(a,Uu.min()))}else yu(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Os(a.target)){var o=new as(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.at(i,o,_s.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=al();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new sl(e,n,this.ot,this.it,r);return this.it=el(),this.rt=vl(),this.ot=new Jc(Pu),i}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new dl,this.st.set(e,t)),t}},{key:"Et",value:function(e){var t=this.rt.get(e);return t||(t=new Jc(Pu),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||hu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new dl),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function vl(){return new Gc(as.comparator)}function ml(){return new Gc(as.comparator)}var yl={asc:"ASCENDING",desc:"DESCENDING"},gl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kl=E((function e(t,n){_(this,e),this.databaseId=t,this.N=n}));function wl(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bl(e,t){return e.N?t.toBase64():t.toUint8Array()}function xl(e,t){return wl(e,t.toTimestamp())}function _l(e){return yu(!!e),Uu.fromTimestamp(function(e){var t=Qu(e);return new Mu(t.seconds,t.nanos)}(e))}function Il(e,t){return function(e){return new qu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function El(e){var t=qu.fromString(e);return yu(Ql(t)),t}function Tl(e,t){return Il(e.databaseId,t.path)}function Sl(e,t){var n=El(t);if(n.get(1)!==e.databaseId.projectId)throw new wu(ku.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wu(ku.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new as(Rl(n))}function Cl(e,t){return Il(e.databaseId,t)}function Nl(e){var t=El(e);return 4===t.length?qu.emptyPath():Rl(t)}function Al(e){return new qu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rl(e){return yu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ol(e,t,n){return{name:Tl(e,t),fields:n.value.mapValue.fields}}function Pl(e,t,n){var r=Sl(e,t.name),i=_l(t.updateTime),a=new bs({mapValue:{fields:t.fields}}),o=_s.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Dl(e,t){return"found"in t?function(e,t){yu(!!t.found),t.found.name,t.found.updateTime;var n=Sl(e,t.found.name),r=_l(t.found.updateTime),i=new bs({mapValue:{fields:t.found.fields}});return _s.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){yu(!!t.missing),yu(!!t.readTime);var n=Sl(e,t.missing),r=_l(t.readTime);return _s.newNoDocument(n,r)}(e,t):mu()}function Ll(e,t){var n;if(t instanceof Lc)n={update:Ol(e,t.key,t.value)};else if(t instanceof qc)n={delete:Tl(e,t.key)};else if(t instanceof Mc)n={update:Ol(e,t.key,t.data),updateMask:Gl(t.fieldMask)};else{if(!(t instanceof zc))return mu();n={verify:Tl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof yc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof wc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof xc)return{fieldPath:t.field.canonicalString(),increment:n.k};throw mu()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:xl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:mu()}(e,t.precondition)),n}function Ml(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Sc.updateTime(_l(e.updateTime)):void 0!==e.exists?Sc.exists(e.exists):Sc.none()}(t.currentDocument):Sc.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)yu("REQUEST_TIME"===t.setToServerValue),n=new yc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new gc(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new wc(i)}else"increment"in t?n=new xc(e,t.increment):mu();var a=Ku.fromServerFormat(t.fieldPath);return new Ec(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Sl(e,t.update.name),a=new bs({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Hu(t.map((function(e){return Ku.fromServerFormat(e)})))}(t.updateMask);return new Mc(i,a,o,n,r)}return new Lc(i,a,n,r)}if(t.delete){var u=Sl(e,t.delete);return new qc(u,n)}if(t.verify){var s=Sl(e,t.verify);return new zc(s,n)}return mu()}function Ul(e,t){return{documents:[Cl(e,t.path)]}}function Fl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Cl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Cl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(gs(e.value))return{unaryFilter:{field:zl(e.field),op:"IS_NAN"}};if(ys(e.value))return{unaryFilter:{field:zl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gs(e.value))return{unaryFilter:{field:zl(e.field),op:"IS_NOT_NAN"}};if(ys(e.value))return{unaryFilter:{field:zl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(e.field),op:ql(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:zl(e.field),direction:Bl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||ns(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function jl(e){var t=Nl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Vl(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new zs(Kl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return ns(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new qs(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new qs(n,t)}(n.endAt)),Qs(t,i,u,o,s,"F",c,l)}function Vl(e){return e?void 0!==e.unaryFilter?[Wl(e)]:void 0!==e.fieldFilter?[Hl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Vl(e)})).reduce((function(e,t){return e.concat(t)})):mu():[]}function Bl(e){return yl[e]}function ql(e){return gl[e]}function zl(e){return{fieldPath:e.canonicalString()}}function Kl(e){return Ku.fromServerFormat(e.fieldPath)}function Hl(e){return Ps.create(Kl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mu()}}(e.fieldFilter.op),e.fieldFilter.value)}function Wl(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Kl(e.unaryFilter.field);return Ps.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Kl(e.unaryFilter.field);return Ps.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Kl(e.unaryFilter.field);return Ps.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Kl(e.unaryFilter.field);return Ps.create(i,"!=",{nullValue:"NULL_VALUE"});default:return mu()}}function Gl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ql(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Yl(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Xl(t)),t=Jl(e.get(n),t);return Xl(t)}function Jl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Xl(e){return e+"\x01\x01"}function $l(e){var t=e.length;if(yu(t>=2),2===t)return yu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),qu.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&mu(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:mu()}a=o+2}return new qu(r)}var Zl=E((function e(t,n){_(this,e),this.seconds=t,this.nanoseconds=n})),ef=E((function e(t,n,r){_(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));ef.store="owner",ef.key="owner";var tf=E((function e(t,n,r){_(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));tf.store="mutationQueues",tf.keyPath="userId";var nf=E((function e(t,n,r,i,a){_(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));nf.store="mutations",nf.keyPath="batchId",nf.userMutationsIndex="userMutationsIndex",nf.userMutationsKeyPath=["userId","batchId"];var rf=function(){function e(){_(this,e)}return E(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Yl(t)]}},{key:"key",value:function(e,t,n){return[e,Yl(t),n]}}]),e}();rf.store="documentMutations",rf.PLACEHOLDER=new rf;var af=E((function e(t,n){_(this,e),this.path=t,this.readTime=n})),of=E((function e(t,n){_(this,e),this.path=t,this.version=n})),uf=E((function e(t,n,r,i,a,o){_(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));uf.store="remoteDocuments",uf.readTimeIndex="readTimeIndex",uf.readTimeIndexPath="readTime",uf.collectionReadTimeIndex="collectionReadTimeIndex",uf.collectionReadTimeIndexPath=["parentPath","readTime"];var sf=E((function e(t){_(this,e),this.byteSize=t}));sf.store="remoteDocumentGlobal",sf.key="remoteDocumentGlobalKey";var cf=E((function e(t,n,r,i,a,o,u){_(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u}));cf.store="targets",cf.keyPath="targetId",cf.queryTargetsIndexName="queryTargetsIndex",cf.queryTargetsKeyPath=["canonicalId","targetId"];var lf=E((function e(t,n,r){_(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));lf.store="targetDocuments",lf.keyPath=["targetId","path"],lf.documentTargetsIndex="documentTargetsIndex",lf.documentTargetsKeyPath=["path","targetId"];var ff=E((function e(t,n,r,i){_(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));ff.key="targetGlobalKey",ff.store="targetGlobal";var hf=E((function e(t,n){_(this,e),this.collectionId=t,this.parent=n}));hf.store="collectionParents",hf.keyPath=["collectionId","parent"];var df=E((function e(t,n,r,i){_(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));df.store="clientMetadata",df.keyPath="clientId";var pf=E((function e(t,n,r){_(this,e),this.bundleId=t,this.createTime=n,this.version=r}));pf.store="bundles",pf.keyPath="bundleId";var vf=E((function e(t,n,r){_(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));vf.store="namedQueries",vf.keyPath="name";var mf=E((function e(t,n,r){_(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r}));mf.store="indexConfiguration",mf.keyPath="indexId",mf.collectionGroupIndex="collectionGroupIndex",mf.collectionGroupIndexPath="collectionGroup";var yf=E((function e(t,n,r,i,a,o){_(this,e),this.indexId=t,this.uid=n,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=o}));yf.store="indexState",yf.keyPath=["indexId","uid"],yf.sequenceNumberIndex="sequenceNumberIndex",yf.sequenceNumberIndexPath=["uid","sequenceNumber"];var gf=E((function e(t,n,r,i,a){_(this,e),this.indexId=t,this.uid=n,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}));gf.store="indexEntries",gf.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],gf.documentKeyIndex="documentKeyIndex",gf.documentKeyIndexPath=["indexId","uid","documentKey"];var kf=E((function e(t,n,r,i,a,o){_(this,e),this.userId=t,this.collectionPath=n,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=o}));kf.store="documentOverlays",kf.keyPath=["userId","collectionPath","documentId"],kf.collectionPathOverlayIndex="collectionPathOverlayIndex",kf.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],kf.collectionGroupOverlayIndex="collectionGroupOverlayIndex",kf.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];var wf=[tf.store,nf.store,rf.store,uf.store,cf.store,ef.store,ff.store,lf.store].concat([df.store]).concat([sf.store]).concat([hf.store]).concat([pf.store,vf.store]),bf=[].concat(he(wf),[kf.store]),xf=[].concat(he(bf),[mf.store,yf.store,gf.store]),_f="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",If=function(){function e(){_(this,e),this.onCommittedListeners=[]}return E(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Ef=function(){function e(t){var n=this;_(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return E(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&mu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Tf=function(){function e(t,n){var r=this;_(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new bu,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Nf(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Df(e.target.error);r.At.reject(new Nf(t,n))}}return E(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(hu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Rf(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Nf(n,t)}}}]),e}(),Sf=function(){function e(t,n,r){_(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.vt(K())&&du("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return E(e,[{key:"xt",value:function(){var e=pe(me().mark((function e(t){var n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return hu("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Nf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new wu(ku.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new wu(ku.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Nf(t,n))},i.onupgradeneeded=function(e){hu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){hu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Ot&&(this.db.onversionchange=function(e){return n.Ot(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mt",value:function(e){this.Ot=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=pe(me().mark((function e(t,n,r,i){var a,o,u,s,c=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(me().mark((function e(){var n,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.xt(t);case 2:return c.db=e.sent,n=Tf.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),Ef.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,hu("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return hu("SimpleDb","Removing database:",e),Of(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Vt",value:function(){if(!J())return!1;if(e.St())return!0;var t=K(),n=e.vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"Nt",value:function(e,t){return e.store(t)}},{key:"vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Cf=function(){function e(t){_(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return E(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Of(this.$t.delete())}}]),e}(),Nf=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,ku.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return E(n)}(wu);function Af(e){return"IndexedDbTransactionError"===e.name}var Rf=function(){function e(t){_(this,e),this.store=t}return E(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(hu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(hu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Of(n)}},{key:"add",value:function(e){return hu("SimpleDb","ADD",this.store.name,e,e),Of(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Of(this.store.get(e)).next((function(n){return void 0===n&&(n=null),hu("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return hu("SimpleDb","DELETE",this.store.name,e),Of(this.store.delete(e))}},{key:"count",value:function(){return hu("SimpleDb","COUNT",this.store.name),Of(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ef((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){hu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Qt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"Wt",value:function(e){var t=this.cursor({});return new Ef((function(n,r){t.onerror=function(e){var t=Df(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Ef((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Cf(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ef){var u=o.catch((function(e){return a.done(),Ef.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Ef.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Of(e){return new Ef((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Df(e.target.error);n(t)}}))}var Pf=!1;function Df(e){var t=Sf.vt(K());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new wu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Pf||(Pf=!0,setTimeout((function(){throw r}),0)),r}}return e}var Lf=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).zt=e,i.currentSequenceNumber=r,i}return E(n)}(If);function Mf(e,t){var n=gu(e);return Sf.Nt(n.zt,t)}var Uf=function(){function e(t,n,r,i){_(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return E(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ac(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=T(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Rc(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=T(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Rc(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Uu.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),al())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Du(this.mutations,e.mutations,(function(e,t){return Pc(e,t)}))&&Du(this.baseMutations,e.baseMutations,(function(e,t){return Pc(e,t)}))}}]),e}(),Ff=function(){function e(t,n,r,i){_(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return E(e,null,[{key:"from",value:function(t,n,r){yu(t.mutations.length===r.length);for(var i=rl,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),jf=function(){function e(t,n){_(this,e),this.largestBatchId=t,this.mutation=n}return E(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Vf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Uu.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Uu.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wu.EMPTY_BYTE_STRING;_(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return E(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Bf=E((function e(t){_(this,e),this.Ht=t}));function qf(e,t){var n;if(t.document)n=Pl(e.Ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=as.fromSegments(t.noDocument.path),i=Gf(t.noDocument.readTime);n=_s.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return mu();var a=as.fromSegments(t.unknownDocument.path),o=Gf(t.unknownDocument.version);n=_s.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(Hf(t.readTime)),n}function zf(e,t){var n=Kf(t.readTime),r=t.key.path.popLast().toArray();if(t.isFoundDocument()){var i=function(e,t){return{name:Tl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:wl(e,t.version.toTimestamp())}}(e.Ht,t),a=t.hasCommittedMutations;return new uf(null,null,i,a,n,r)}if(t.isNoDocument()){var o=t.key.path.toArray(),u=Wf(t.version),s=t.hasCommittedMutations;return new uf(null,new af(o,u),null,s,n,r)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=Wf(t.version);return new uf(new of(c,l),null,null,!0,n,r)}return mu()}function Kf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Hf(e){var t=new Mu(e[0],e[1]);return Uu.fromTimestamp(t)}function Wf(e){var t=e.toTimestamp();return new Zl(t.seconds,t.nanoseconds)}function Gf(e){var t=new Mu(e.seconds,e.nanoseconds);return Uu.fromTimestamp(t)}function Qf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ml(e.Ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Ml(e.Ht,t)})),u=Mu.fromMillis(t.localWriteTimeMs);return new Uf(t.batchId,u,n,o)}function Yf(e){var t,n,r=Gf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Gf(e.lastLimboFreeSnapshotVersion):Uu.min();return void 0!==e.query.documents?(yu(1===(n=e.query).documents.length),t=nc(Ys(Nl(n.documents[0])))):t=function(e){return nc(jl(e))}(e.query),new Vf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Wu.fromBase64String(e.resumeToken))}function Jf(e,t){var n,r=Wf(t.snapshotVersion),i=Wf(t.lastLimboFreeSnapshotVersion);n=Os(t.target)?Ul(e.Ht,t.target):Fl(e.Ht,t.target);var a=t.resumeToken.toBase64();return new cf(t.targetId,As(t.target),r,a,t.sequenceNumber,i,n)}function Xf(e){var t=jl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?rc(t,t.limit,"L"):t}function $f(e,t){return new jf(t.largestBatchId,Ml(e.Ht,t.overlayMutation))}function Zf(e,t){var n=t.path.lastSegment();return[e,Yl(t.path.popLast()),n]}var eh=function(){function e(){_(this,e)}return E(e,[{key:"getBundleMetadata",value:function(e,t){return th(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Gf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return th(e).put({bundleId:(n=t).id,createTime:Wf(_l(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return nh(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Xf(t.bundledQuery),readTime:Gf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return nh(e).put(function(e){return{name:e.name,readTime:Wf(_l(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function th(e){return Mf(e,pf.store)}function nh(e){return Mf(e,vf.store)}var rh=function(){function e(t,n){_(this,e),this.O=t,this.userId=n}return E(e,[{key:"getOverlay",value:function(e,t){var n=this;return ih(e).get(Zf(this.userId,t)).next((function(e){return e?$f(n.O,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n){var a=new jf(t,n);i.push(r.Yt(e,a))})),Ef.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Yl(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(ih(e).Gt(kf.collectionPathOverlayIndex,i))})),Ef.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=new Map,a=Yl(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ih(e).qt(kf.collectionPathOverlayIndex,o).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=$f(r.O,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=new Map,u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ih(e).Qt({index:kf.collectionGroupOverlayIndex,range:u},(function(e,t,n){var u=$f(a.O,t);o.size<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Yt",value:function(e,t){return ih(e).put(function(e,t,n){var r=s(Zf(t,n.mutation.key),3),i=(r[0],r[1]),a=r[2];return new kf(t,i,a,n.mutation.key.getCollectionGroup(),n.largestBatchId,Ll(e.Ht,n.mutation))}(this.O,this.userId,t))}}],[{key:"Jt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ih(e){return Mf(e,kf.store)}var ah=function(){function e(){_(this,e)}return E(e,[{key:"Xt",value:function(e,t){this.Zt(e,t),t.te()}},{key:"Zt",value:function(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(Yu(e.integerValue));else if("doubleValue"in e){var n=Yu(e.doubleValue);isNaN(n)?this.ee(t,13):(this.ee(t,15),rs(n)?t.ne(0):t.ne(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se("".concat(r.seconds||"")),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Ju(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ee(t,45),t.ne(i.latitude||0),t.ne(i.longitude||0)}else"mapValue"in e?ss(e,os)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):mu()}},{key:"ie",value:function(e,t){this.ee(t,25),this.he(e,t)}},{key:"he",value:function(e,t){t.se(e)}},{key:"ue",value:function(e,t){var n=e.fields||{};this.ee(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ie(a,t),this.Zt(n[a],t)}}},{key:"ae",value:function(e,t){var n=e.values||[];this.ee(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Zt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ce",value:function(e,t){var n=this;this.ee(t,37),as.fromName(e).path.forEach((function(e){n.ee(t,60),n.he(e,t)}))}},{key:"ee",value:function(e,t){e.ne(t)}},{key:"re",value:function(e){e.ne(2)}}]),e}();function oh(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function uh(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=oh(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ah.le=new ah;var sh=function(){function e(){_(this,e),this.buffer=new Uint8Array(1024),this.position=0}return E(e,[{key:"fe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.de(n.value),n=t.next();this._e()}},{key:"we",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.me(n.value),n=t.next();this.ge()}},{key:"ye",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.de(i);else if(i<2048)this.de(960|i>>>6),this.de(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.de(480|i>>>12),this.de(128|63&i>>>6),this.de(128|63&i);else{var a=r.codePointAt(0);this.de(240|a>>>18),this.de(128|63&a>>>12),this.de(128|63&a>>>6),this.de(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this._e()}},{key:"pe",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.me(i);else if(i<2048)this.me(960|i>>>6),this.me(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.me(480|i>>>12),this.me(128|63&i>>>6),this.me(128|63&i);else{var a=r.codePointAt(0);this.me(240|a>>>18),this.me(128|63&a>>>12),this.me(128|63&a>>>6),this.me(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ge()}},{key:"Ie",value:function(e){var t=this.Ee(e),n=uh(t);this.Te(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ae",value:function(e){var t=this.Ee(e),n=uh(t);this.Te(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Re",value:function(){this.Pe(255),this.Pe(255)}},{key:"be",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ve",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"de",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"me",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"_e",value:function(){this.Pe(0),this.Pe(1)}},{key:"ge",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Te(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Te(1),this.buffer[this.position++]=~e}},{key:"Te",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),ch=function(){function e(t){_(this,e),this.Se=t}return E(e,[{key:"oe",value:function(e){this.Se.fe(e)}},{key:"se",value:function(e){this.Se.ye(e)}},{key:"ne",value:function(e){this.Se.Ie(e)}},{key:"te",value:function(){this.Se.Re()}}]),e}(),lh=function(){function e(t){_(this,e),this.Se=t}return E(e,[{key:"oe",value:function(e){this.Se.we(e)}},{key:"se",value:function(e){this.Se.pe(e)}},{key:"ne",value:function(e){this.Se.Ae(e)}},{key:"te",value:function(){this.Se.be()}}]),e}(),fh=function(){function e(){_(this,e),this.Se=new sh,this.De=new ch(this.Se),this.Ce=new lh(this.Se)}return E(e,[{key:"seed",value:function(e){this.Se.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.De:this.Ce}},{key:"Ve",value:function(){return this.Se.Ve()}},{key:"reset",value:function(){this.Se.reset()}}]),e}(),hh=E((function e(t,n,r,i){_(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}));function dh(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=as.comparator(e.documentKey,t.documentKey))?n:0!==(n=ph(e.arrayValue,t.arrayValue))?n:ph(e.directionalValue,t.directionalValue)}function ph(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var vh=function(){function e(){_(this,e),this.xe=new mh}return E(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.xe.add(t),Ef.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ef.resolve(this.xe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ef.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ef.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return Ef.resolve(al())}},{key:"getFieldIndex",value:function(e,t){return Ef.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Ef.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ef.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Ef.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ef.resolve()}}]),e}(),mh=function(){function e(){_(this,e),this.index={}}return E(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Jc(qu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Jc(qu.comparator)).toArray()}}]),e}(),yh=function(){function e(t){_(this,e),this.user=t,this.ke=new mh,this.uid=t.uid||""}return E(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.ke.add(t)}));var a={collectionId:r,parent:Yl(i)};return gh(e).put(a)}return Ef.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Lu(t),""],!1,!0);return gh(e).qt(r).next((function(e){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push($l(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=wh(e),r=function(e){return new mf(e.indexId,e.collectionGroup,e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]})))}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=wh(e),r=bh(e),i=kh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return Ef.resolve(al())}},{key:"getFieldIndex",value:function(e,t){return Ef.resolve(null)}},{key:"Oe",value:function(e,t){var n,r=new fh,i=T(function(e){return e.fields.filter((function(e){return 2!==e.kind}))}(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);ah.le.Xt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Ve()}},{key:"Me",value:function(e){var t=new fh;return ah.le.Xt(e,t.Ne(0)),t.Ve()}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=wh(e),i=bh(e);return(t?r.qt(mf.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Ef.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Ts(t.sequenceNumber,new Ss(Gf(t.readTime),new as($l(t.documentKey)),t.largestBatchId)):Ts.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Es(Ku.fromServerFormat(n),r)}));return new Is(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){return e.indexState.sequenceNumber-t.indexState.sequenceNumber})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=wh(e),a=bh(e);return this.$e(e).next((function(e){return i.qt(mf.collectionGroupIndex,IDBKeyRange.bound(t,t)).next((function(t){return Ef.forEach(t,(function(t){return a.put(function(e,t,n,r){return new yf(e,t.uid||"",n,Wf(r.readTime),Yl(r.documentKey.path),r.largestBatchId)}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ef.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ef.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ef.forEach(a,(function(r){return n.Fe(e,t,r).next((function(t){var a=n.Be(i,r);return t.isEqual(a)?Ef.resolve():n.Le(e,i,t,a)}))}))}))}))}},{key:"Ue",value:function(e,t,n){return kh(e).put(new gf(n.indexId,this.uid,n.arrayValue,n.directionalValue,Yl(t.key.path)))}},{key:"qe",value:function(e,t,n){return kh(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,Yl(t.key.path)])}},{key:"Fe",value:function(e,t,n){var r=kh(e),i=new Jc(dh);return r.Qt({index:gf.documentKeyIndex,range:IDBKeyRange.only([n.indexId,this.uid,Yl(t.path)])},(function(e,r){i=i.add(new hh(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"Be",value:function(e,t){var n=new Jc(dh),r=this.Oe(t,e);if(null==r)return n;var i=function(e){return e.fields.find((function(e){return 2===e.kind}))}(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ms(a)){var o,u=T(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new hh(t.indexId,e.key,this.Me(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new hh(t.indexId,e.key,new Uint8Array,r));return n}},{key:"Le",value:function(e,t,n,r){var i=this;hu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=$c(a),s=$c(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=$c(o)):l?(i(u),u=$c(a)):(u=$c(a),s=$c(o))}}(n,r,dh,(function(n){a.push(i.Ue(e,t,n))}),(function(n){a.push(i.qe(e,t,n))})),Ef.waitFor(a)}},{key:"$e",value:function(e){var t=1;return bh(e).Qt({index:yf.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}}]),e}();function gh(e){return Mf(e,hf.store)}function kh(e){return Mf(e,gf.store)}function wh(e){return Mf(e,mf.store)}function bh(e){return Mf(e,yf.store)}var xh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_h=function(){function e(t,n,r){_(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return E(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ih(e,t,n){var r=e.store(nf.store),i=e.store(rf.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Qt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){yu(1===u)})));var c,l=[],f=T(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=rf.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Ef.waitFor(a).next((function(){return l}))}function Eh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw mu();t=e.noDocument}return JSON.stringify(t).length}_h.DEFAULT_COLLECTION_PERCENTILE=10,_h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_h.DEFAULT=new _h(41943040,_h.DEFAULT_COLLECTION_PERCENTILE,_h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_h.DISABLED=new _h(-1,0,0);var Th=function(){function e(t,n,r,i){_(this,e),this.userId=t,this.O=n,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}return E(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ch(e).Qt({index:nf.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Nh(e),o=Ch(e);return o.add({}).next((function(u){yu("number"==typeof u);var s,c=new Uf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ll(e.Ht,t)})),i=n.mutations.map((function(t){return Ll(e.Ht,t)}));return new nf(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.O,i.userId,c),f=[],h=new Jc((function(e,t){return Pu(e.canonicalString(),t.canonicalString())})),d=T(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=rf.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,rf.PLACEHOLDER))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Ke[u]=c.keys()})),Ef.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ch(e).get(t).next((function(e){return e?(yu(e.userId===n.userId),Qf(n.O,e)):null}))}},{key:"Ge",value:function(e,t){var n=this;return this.Ke[t]?Ef.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Ke[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ch(e).Qt({index:nf.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(yu(t.batchId>=r),a=Qf(n.O,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ch(e).Qt({index:nf.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ch(e).qt(nf.userMutationsIndex,n).next((function(e){return e.map((function(e){return Qf(t.O,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=rf.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Nh(e).Qt({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=$l(l);if(c===n.userId&&t.path.isEqual(h))return Ch(e).get(f).next((function(e){if(!e)throw mu();yu(e.userId===n.userId),a.push(Qf(n.O,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Jc(Pu),i=[];return t.forEach((function(t){var a=rf.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Nh(e).Qt({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=$l(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Ef.waitFor(i).next((function(){return n.je(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=rf.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Jc(Pu);return Nh(e).Qt({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=$l(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.je(e,u)}))}},{key:"je",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ch(e).get(t).next((function(e){if(null===e)throw mu();yu(e.userId===n.userId),r.push(Qf(n.O,e))})))})),Ef.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ih(e.zt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Qe(t.batchId)})),Ef.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Qe",value:function(e){delete this.Ke[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ef.resolve();var r=IDBKeyRange.lowerBound(rf.prefixForUser(t.userId)),i=[];return Nh(e).Qt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=$l(e[1]);i.push(a)}else r.done()})).next((function(){yu(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Sh(e,this.userId,t)}},{key:"We",value:function(e){var t=this;return Ah(e).get(this.userId).next((function(e){return e||new tf(t.userId,-1,"")}))}}],[{key:"Jt",value:function(t,n,r,i){return yu(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Sh(e,t,n){var r=rf.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Nh(e).Qt({range:a,jt:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Ch(e){return Mf(e,nf.store)}function Nh(e){return Mf(e,rf.store)}function Ah(e){return Mf(e,tf.store)}var Rh=function(){function e(t){_(this,e),this.ze=t}return E(e,[{key:"next",value:function(){return this.ze+=2,this.ze}}],[{key:"He",value:function(){return new e(0)}},{key:"Je",value:function(){return new e(-1)}}]),e}(),Oh=function(){function e(t,n){_(this,e),this.referenceDelegate=t,this.O=n}return E(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ye(e).next((function(n){var r=new Rh(n.highestTargetId);return n.highestTargetId=r.next(),t.Xe(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ye(e).next((function(e){return Uu.fromTimestamp(new Mu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ye(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ye(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Xe(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ze(e,t).next((function(){return n.Ye(e).next((function(r){return r.targetCount+=1,n.tn(t,r),n.Xe(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ze(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ph(e).delete(t.targetId)})).next((function(){return n.Ye(e)})).next((function(t){return yu(t.targetCount>0),t.targetCount-=1,n.Xe(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ph(e).Qt((function(o,u){var s=Yf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ef.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Ph(e).Qt((function(e,n){var r=Yf(n);t(r)}))}},{key:"Ye",value:function(e){return Dh(e).get(ff.key).next((function(e){return yu(null!==e),e}))}},{key:"Xe",value:function(e,t){return Dh(e).put(ff.key,t)}},{key:"Ze",value:function(e,t){return Ph(e).put(Jf(this.O,t))}},{key:"tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ye(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=As(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ph(e).Qt({range:r,index:cf.queryTargetsIndexName},(function(e,n,r){var a=Yf(n);Rs(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Lh(e);return t.forEach((function(t){var o=Yl(t.path);i.push(a.put(new lf(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Ef.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Lh(e);return Ef.forEach(t,(function(t){var a=Yl(t.path);return Ef.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Lh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Lh(e),i=al();return r.Qt({range:n,jt:!0},(function(e,t,n){var r=$l(e[1]),a=new as(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Yl(t.path),r=IDBKeyRange.bound([n],[Lu(n)],!1,!0),i=0;return Lh(e).Qt({index:lf.documentTargetsIndex,jt:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Tt",value:function(e,t){return Ph(e).get(t).next((function(e){return e?Yf(e):null}))}}]),e}();function Ph(e){return Mf(e,cf.store)}function Dh(e){return Mf(e,ff.store)}function Lh(e){return Mf(e,lf.store)}function Mh(e){return Uh.apply(this,arguments)}function Uh(){return Uh=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ku.FAILED_PRECONDITION&&t.message===_f){e.next=2;break}throw t;case 2:hu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Uh.apply(this,arguments)}function Fh(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=Pu(r,o);return 0===c?Pu(i,u):c}var jh=function(){function e(t){_(this,e),this.en=t,this.buffer=new Jc(Fh),this.nn=0}return E(e,[{key:"sn",value:function(){return++this.nn}},{key:"rn",value:function(e){var t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Fh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Vh=function(){function e(t,n){_(this,e),this.garbageCollector=t,this.asyncQueue=n,this.on=!1,this.cn=null}return E(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}},{key:"stop",value:function(){this.cn&&(this.cn.cancel(),this.cn=null)}},{key:"started",get:function(){return null!==this.cn}},{key:"un",value:function(e){var t=this,n=this.on?3e5:6e4;hu("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,pe(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.cn=null,t.on=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Af(n.t0)){n.next=12;break}hu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Mh(n.t0);case 14:return n.next=16,t.un(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Bh=function(){function e(t,n){_(this,e),this.an=t,this.params=n}return E(e,[{key:"calculateTargetCount",value:function(e,t){return this.an.hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ef.resolve(Au.A);var r=new jh(t);return this.an.forEachTarget(e,(function(e){return r.rn(e.sequenceNumber)})).next((function(){return n.an.ln(e,(function(e){return r.rn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.an.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.an.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(hu("LruGarbageCollector","Garbage collection skipped; disabled"),Ef.resolve(xh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(hu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),xh):n.fn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.an.getCacheSize(e)}},{key:"fn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(hu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),fu()<=be.DEBUG&&hu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ef.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),qh=function(){function e(t,n){_(this,e),this.db=t,this.garbageCollector=function(e,t){return new Bh(e,t)}(this,n)}return E(e,[{key:"hn",value:function(e){var t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"dn",value:function(e){var t=0;return this.ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ln",value:function(e,t){return this._n(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return zh(e,n)}},{key:"removeReference",value:function(e,t,n){return zh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return zh(e,t)}},{key:"wn",value:function(e,t){return function(e,t){var n=!1;return Ah(e).Wt((function(r){return Sh(e,r,t).next((function(e){return e&&(n=!0),Ef.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this._n(e,(function(o,u){if(u<=t){var s=n.wn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Uu.min()),Lh(e).delete([0,Yl(o.path)])}))}));i.push(s)}})).next((function(){return Ef.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return zh(e,t)}},{key:"_n",value:function(e,t){var n,r=Lh(e),i=Au.A;return r.Qt({index:lf.documentTargetsIndex},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Au.A&&t(new as($l(n)),i),i=c,n=u):i=Au.A})).next((function(){i!==Au.A&&t(new as($l(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function zh(e,t){return Lh(e).put(function(e,t){return new lf(0,Yl(e.path),t)}(t,e.currentSequenceNumber))}var Kh=function(){function e(t,n){_(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return E(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){ju(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Vu(this.inner)}}]),e}(),Hh=function(){function e(){_(this,e),this.changes=new Kh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return E(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,_s.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ef.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Wh=function(){function e(t){_(this,e),this.O=t}return E(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Yh(e).put(Jh(t),n)}},{key:"removeEntry",value:function(e,t){var n=Yh(e),r=Jh(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.mn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Yh(e).get(Jh(t)).next((function(e){return n.gn(t,e)}))}},{key:"yn",value:function(e,t){var n=this;return Yh(e).get(Jh(t)).next((function(e){return{document:n.gn(t,e),size:Eh(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=el();return this.pn(e,t,(function(e,t){var i=n.gn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"In",value:function(e,t){var n=this,r=el(),i=new Gc(as.comparator);return this.pn(e,t,(function(e,t){var a=n.gn(e,t);r=r.insert(e,a),i=i.insert(e,Eh(t))})).next((function(){return{documents:r,En:i}}))}},{key:"pn",value:function(e,t,n){if(t.isEmpty())return Ef.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Yh(e).Qt({range:r},(function(e,t,r){for(var o=as.fromSegments(e);a&&as.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Ut(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getAll",value:function(e,t,n){var r=this,i=el(),a=t.length+1,o={};if(n.isEqual(Uu.min())){var u=t.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.toArray(),c=Kf(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=uf.collectionReadTimeIndex}return Yh(e).Qt(o,(function(e,n,o){if(e.length===a){var u=r.gn(as.fromSegments(e),n);t.isPrefixOf(u.key.path)?i=i.insert(u.key,u):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Gh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Qh(e).get(sf.key).next((function(e){return yu(!!e),e}))}},{key:"mn",value:function(e,t){return Qh(e).put(sf.key,t)}},{key:"gn",value:function(e,t){if(t){var n=qf(this.O,t);if(!n.isNoDocument()||!n.version.isEqual(Uu.min()))return n}return _s.newInvalidDocument(e)}}]),e}(),Gh=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).Tn=e,i.trackRemovals=r,i.An=new Kh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return E(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Jc((function(e,t){return Pu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.An.get(a);if(o.isValidDocument()){var s=zf(t.Tn.O,o);i=i.add(a.path.popLast());var c=Eh(s);r+=c-u,n.push(t.Tn.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=zf(t.Tn.O,o.convertToNoDocument(Uu.min()));n.push(t.Tn.addEntry(e,a,l))}else n.push(t.Tn.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Tn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Tn.updateMetadata(e,r)),Ef.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Tn.yn(e,t).next((function(e){return n.An.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Tn.In(e,t).next((function(e){var t=e.documents;return e.En.forEach((function(e,t){n.An.set(e,t)})),t}))}}]),n}(Hh);function Qh(e){return Mf(e,sf.store)}function Yh(e){return Mf(e,uf.store)}function Jh(e){return e.path.toArray()}var Xh=function(){function e(t){_(this,e),this.O=t}return E(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Tf("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ef.store)}(e),function(e){e.createObjectStore(tf.store,{keyPath:tf.keyPath}),e.createObjectStore(nf.store,{keyPath:nf.keyPath,autoIncrement:!0}).createIndex(nf.userMutationsIndex,nf.userMutationsKeyPath,{unique:!0}),e.createObjectStore(rf.store)}(e),$h(e),function(e){e.createObjectStore(uf.store)}(e));var o=Ef.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(lf.store),e.deleteObjectStore(cf.store),e.deleteObjectStore(ff.store)}(e),$h(e)),o=o.next((function(){return function(e){var t=e.store(ff.store),n=new ff(0,0,Uu.min().toTimestamp(),0);return t.put(ff.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(nf.store).qt().next((function(n){e.deleteObjectStore(nf.store),e.createObjectStore(nf.store,{keyPath:nf.keyPath,autoIncrement:!0}).createIndex(nf.userMutationsIndex,nf.userMutationsKeyPath,{unique:!0});var r=t.store(nf.store),i=n.map((function(e){return r.put(e)}));return Ef.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(df.store,{keyPath:df.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Rn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(sf.store)}(e),i.Pn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.bn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.vn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(uf.store);t.createIndex(uf.readTimeIndex,uf.readTimeIndexPath,{unique:!1}),t.createIndex(uf.collectionReadTimeIndex,uf.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Vn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(pf.store,{keyPath:pf.keyPath})}(e),function(e){e.createObjectStore(vf.store,{keyPath:vf.keyPath})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore(kf.store,{keyPath:kf.keyPath});t.createIndex(kf.collectionPathOverlayIndex,kf.collectionPathOverlayIndexPath,{unique:!1}),t.createIndex(kf.collectionGroupOverlayIndex,kf.collectionGroupOverlayIndexPath,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){!function(e){e.createObjectStore(mf.store,{keyPath:mf.keyPath,autoIncrement:!0}).createIndex(mf.collectionGroupIndex,mf.collectionGroupIndexPath,{unique:!1}),e.createObjectStore(yf.store,{keyPath:yf.keyPath}).createIndex(yf.sequenceNumberIndex,yf.sequenceNumberIndexPath,{unique:!1}),e.createObjectStore(gf.store,{keyPath:gf.keyPath}).createIndex(gf.documentKeyIndex,gf.documentKeyIndexPath,{unique:!1})}(e)}))),o}},{key:"Pn",value:function(e){var t=0;return e.store(uf.store).Qt((function(e,n){t+=Eh(n)})).next((function(){var n=new sf(t);return e.store(sf.store).put(sf.key,n)}))}},{key:"Rn",value:function(e){var t=this,n=e.store(tf.store),r=e.store(nf.store);return n.qt().next((function(n){return Ef.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt(nf.userMutationsIndex,i).next((function(r){return Ef.forEach(r,(function(r){yu(r.userId===n.userId);var i=Qf(t.O,r);return Ih(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"bn",value:function(e){var t=e.store(lf.store),n=e.store(uf.store);return e.store(ff.store).get(ff.key).next((function(e){var r=[];return n.Qt((function(n,i){var a=new qu(n),o=function(e){return[0,Yl(e)]}(a);r.push(t.get(o).next((function(n){return n?Ef.resolve():function(n){return t.put(new lf(0,Yl(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Ef.waitFor(r)}))}))}},{key:"vn",value:function(e,t){e.createObjectStore(hf.store,{keyPath:hf.keyPath});var n=t.store(hf.store),r=new mh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Yl(i)})}};return t.store(uf.store).Qt({jt:!0},(function(e,t){var n=new qu(e);return i(n.popLast())})).next((function(){return t.store(rf.store).Qt({jt:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],$l(r));return i(a.popLast())}))}))}},{key:"Vn",value:function(e){var t=this,n=e.store(cf.store);return n.Qt((function(e,r){var i=Yf(r),a=Jf(t.O,i);return n.put(a)}))}}]),e}();function $h(e){e.createObjectStore(lf.store,{keyPath:lf.keyPath}).createIndex(lf.documentTargetsIndex,lf.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(cf.store,{keyPath:cf.keyPath}).createIndex(cf.queryTargetsIndexName,cf.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ff.store)}var Zh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ed=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if(_(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Sn=a,this.window=o,this.document=u,this.Dn=c,this.Cn=l,this.schemaVersion=f,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=function(e){return Promise.resolve()},!e.Vt())throw new wu(ku.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qh(this,i),this.Bn=n+"main",this.O=new Bf(s),this.Ln=new Sf(this.Bn,this.schemaVersion,new Xh(this.O)),this.Un=new Oh(this.referenceDelegate,this.O),this.qn=function(e){return new Wh(e)}(this.O),this.Kn=new eh,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===l&&du("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return E(e,[{key:"start",value:function(){var e=this;return this.jn().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new wu(ku.FAILED_PRECONDITION,Zh);return e.Qn(),e.Wn(),e.zn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Un.getHighestSequenceNumber(t)}))})).then((function(t){e.Nn=new Au(t,e.Dn)})).then((function(){e.xn=!0})).catch((function(t){return e.Ln&&e.Ln.close(),Promise.reject(t)}))}},{key:"Hn",value:function(e){var t=this;return this.Fn=function(){var n=pe(me().mark((function n(r){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ln.Mt(function(){var t=pe(me().mark((function t(n){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget(pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.jn();case 4:case"end":return e.stop()}}),e)})))))}},{key:"jn",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return nd(t).put(new df(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Jn(t).next((function(t){t||(e.isPrimary=!1,e.Sn.enqueueRetryable((function(){return e.Fn(!1)})))}))})).next((function(){return e.Yn(t)})).next((function(n){return e.isPrimary&&!n?e.Xn(t).next((function(){return!1})):!!n&&e.Zn(t).next((function(){return!0}))}))})).catch((function(t){if(Af(t))return hu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return hu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Sn.enqueueRetryable((function(){return e.Fn(t)})),e.isPrimary=t}))}},{key:"Jn",value:function(e){var t=this;return td(e).get(ef.key).next((function(e){return Ef.resolve(t.ts(e))}))}},{key:"es",value:function(e){return nd(e).delete(this.clientId)}},{key:"ns",value:function(){var e=pe(me().mark((function e(){var t,n,r,i,a=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.ss(this.$n,18e5)){e.next=6;break}return this.$n=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Mf(e,df.store);return t.qt().next((function(e){var n=a.rs(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ef.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Gn){n=T(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Gn.removeItem(this.os(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"zn",value:function(){var e=this;this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.jn().then((function(){return e.ns()})).then((function(){return e.zn()}))}))}},{key:"ts",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Yn",value:function(e){var t=this;return this.Cn?Ef.resolve(!0):td(e).get(ef.key).next((function(n){if(null!==n&&t.ss(n.leaseTimestampMs,5e3)&&!t.cs(n.ownerId)){if(t.ts(n)&&t.networkEnabled)return!0;if(!t.ts(n)){if(!n.allowTabSynchronization)throw new wu(ku.FAILED_PRECONDITION,Zh);return!1}}return!(!t.networkEnabled||!t.inForeground)||nd(e).qt().next((function(e){return void 0===t.rs(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&hu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=pe(me().mark((function e(){var t=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xn=!1,this.us(),this.Mn&&(this.Mn.cancel(),this.Mn=null),this.hs(),this.ls(),e.next=7,this.Ln.runTransaction("shutdown","readwrite",[ef.store,df.store],(function(e){var n=new Lf(e,Au.A);return t.Xn(n).next((function(){return t.es(n)}))}));case 7:this.Ln.close(),this.fs();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rs",value:function(e,t){var n=this;return e.filter((function(e){return n.ss(e.updateTimeMs,t)&&!n.cs(e.clientId)}))}},{key:"ds",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return nd(t).qt().next((function(t){return e.rs(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xn}},{key:"getMutationQueue",value:function(e,t){return Th.Jt(e,this.O,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getIndexManager",value:function(e){return new yh(e)}},{key:"getDocumentOverlayCache",value:function(e){return rh.Jt(this.O,e)}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;hu("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=13===(i=this.schemaVersion)?xf:12===i?bf:11===i?wf:void mu();return this.Ln.runTransaction(e,o,u,(function(i){return a=new Lf(i,r.Nn?r.Nn.next():Au.A),"readwrite-primary"===t?r.Jn(a).next((function(e){return!!e||r.Yn(a)})).next((function(t){if(!t)throw du("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Sn.enqueueRetryable((function(){return r.Fn(!1)})),new wu(ku.FAILED_PRECONDITION,_f);return n(a)})).next((function(e){return r.Zn(a).next((function(){return e}))})):r._s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"_s",value:function(e){var t=this;return td(e).get(ef.key).next((function(e){if(null!==e&&t.ss(e.leaseTimestampMs,5e3)&&!t.cs(e.ownerId)&&!t.ts(e)&&!(t.Cn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new wu(ku.FAILED_PRECONDITION,Zh)}))}},{key:"Zn",value:function(e){var t=new ef(this.clientId,this.allowTabSynchronization,Date.now());return td(e).put(ef.key,t)}},{key:"Xn",value:function(e){var t=this,n=td(e);return n.get(ef.key).next((function(e){return t.ts(e)?(hu("IndexedDbPersistence","Releasing primary lease."),n.delete(ef.key)):Ef.resolve()}))}},{key:"ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(du("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Qn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=function(){e.Sn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.jn()}))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}},{key:"hs",value:function(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}},{key:"Wn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=function(){t.us(),!W()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Sn.enterRestrictedMode(!0),t.Sn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.kn))}},{key:"ls",value:function(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}},{key:"cs",value:function(e){var t;try{var n=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return hu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return du("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"us",value:function(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(ur){du("Failed to set zombie client id.",ur)}}},{key:"fs",value:function(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(ur){}}},{key:"os",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Vt",value:function(){return Sf.Vt()}}]),e}();function td(e){return Mf(e,ef.store)}function nd(e){return Mf(e,df.store)}function rd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var id=E((function e(t,n){_(this,e),this.progress=t,this.ws=n})),ad=function(){function e(t,n,r){_(this,e),this.qn=t,this.gs=n,this.indexManager=r}return E(e,[{key:"ys",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.ps(e,t,r)}))}},{key:"ps",value:function(e,t,n){return this.qn.getEntry(e,t).next((function(e){var t,r=T(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Is",value:function(e,t){e.forEach((function(e,n){var r,i=T(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Es",value:function(e,t){var n=this;return this.qn.getEntries(e,t).next((function(t){return n.Ts(e,t).next((function(){return t}))}))}},{key:"Ts",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Is(t,e)}))}},{key:"As",value:function(e,t,n){return function(e){return as.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Rs(e,t.path):ec(t)?this.Ps(e,t,n):this.bs(e,t,n)}},{key:"Rs",value:function(e,t){return this.ys(e,new as(t)).next((function(e){var t=nl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ps",value:function(e,t,n){var r=this,i=t.collectionGroup,a=nl();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ef.forEach(o,(function(o){var u=function(e,t){return new Gs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.bs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"bs",value:function(e,t,n){var r,i=this;return this.qn.getAll(e,t.path,n).next((function(n){return r=n,i.gs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=T(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=_s.newInvalidDocument(s),r=r.insert(s,c)),Rc(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){uc(t,n)||(r=r.remove(e))})),r}))}}]),e}(),od=function(){function e(t,n,r,i){_(this,e),this.targetId=t,this.fromCache=n,this.vs=r,this.Vs=i}return E(e,null,[{key:"Ss",value:function(t,n){var r,i=al(),a=al(),o=T(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ud=function(){function e(){_(this,e)}return E(e,[{key:"Ds",value:function(e){this.Cs=e}},{key:"As",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Uu.min())?this.Ns(e,t):this.Cs.Es(e,r).next((function(a){var o=i.xs(t,a);return(Js(t)||Xs(t))&&i.ks(t.limitType,o,r,n)?i.Ns(e,t):(fu()<=be.DEBUG&&hu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),oc(t)),i.Cs.As(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"xs",value:function(e,t){var n=new Jc(sc(e));return t.forEach((function(t,r){uc(e,r)&&(n=n.add(r))})),n}},{key:"ks",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ns",value:function(e,t){return fu()<=be.DEBUG&&hu("QueryEngine","Using full collection scan to execute query:",oc(t)),this.Cs.As(e,t,Uu.min())}}]),e}(),sd=function(){function e(t,n,r,i){_(this,e),this.persistence=t,this.Os=n,this.O=i,this.Ms=new Gc(Pu),this.$s=new Kh((function(e){return As(e)}),Rs),this.Fs=Uu.min(),this.Bs=t.getRemoteDocumentCache(),this.Un=t.getTargetCache(),this.Kn=t.getBundleCache(),this.Ls(r)}return E(e,[{key:"Ls",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new ad(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ms)}))}}]),e}();function cd(e,t,n,r){return new sd(e,t,n,r)}function ld(e,t){return fd.apply(this,arguments)}function fd(){return fd=pe(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.gs.getAllMutationBatches(e).next((function(i){return t=i,r.Ls(n),r.gs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=al(),s=T(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=T(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=T(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=T(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.Us.Es(e,u).next((function(e){return{qs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),fd.apply(this,arguments)}function hd(e,t){var n=gu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ef.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);yu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.gs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}function dd(e){var t=gu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Un.getLastRemoteSnapshotVersion(e)}))}function pd(e,t){var n=gu(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.Ms;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Un.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Un.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Wu.EMPTY_BYTE_STRING,Uu.min()).withLastLimboFreeSnapshotVersion(Uu.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Un.updateTargetData(e,c))}}));var u=el();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(vd(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Uu.min())){var s=n.Un.getLastRemoteSnapshotVersion(e).next((function(t){return n.Un.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Ef.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Us.Ts(e,u)})).next((function(){return u}))})).then((function(e){return n.Ms=i,e}))}function vd(e,t,n){var r=al();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=el();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Uu.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):hu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function md(e,t){var n=gu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.gs.getNextMutationBatchAfterBatchId(e,t)}))}function yd(e,t){var n=gu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Un.getTargetData(e,t).next((function(i){return i?(r=i,Ef.resolve(r)):n.Un.allocateTargetId(e).next((function(i){return r=new Vf(t,i,0,e.currentSequenceNumber),n.Un.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.$s.set(t,e.targetId)),e}))}function gd(e,t,n){return kd.apply(this,arguments)}function kd(){return kd=pe(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gu(t),a=i.Ms.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Af(e.t1)){e.next=12;break}throw e.t1;case 12:hu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ms=i.Ms.remove(n),i.$s.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),kd.apply(this,arguments)}function wd(e,t,n){var r=gu(e),i=Uu.min(),a=al();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=gu(e),i=r.$s.get(n);return void 0!==i?Ef.resolve(r.Ms.get(i)):r.Un.getTargetData(t,n)}(r,e,nc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Os.As(e,t,n?i:Uu.min(),n?a:al())})).next((function(e){return{documents:e,Ks:a}}))}))}function bd(e,t){var n=gu(e),r=gu(n.Un),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Tt(e,t).next((function(e){return e?e.target:null}))}))}function xd(e){var t=gu(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=gu(e),i=el(),a=Kf(n),o=Yh(t),u=IDBKeyRange.lowerBound(a,!0);return o.Qt({index:uf.readTimeIndex,range:u},(function(e,t){var n=qf(r.O,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{ws:i,readTime:Hf(a)}}))}(t.Bs,e,t.Fs)})).then((function(e){var n=e.ws,r=e.readTime;return t.Fs=r,n}))}function _d(e){return Id.apply(this,arguments)}function Id(){return Id=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gu(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Yh(e),n=Uu.min();return t.Qt({index:uf.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Hf(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.Fs=e})));case 2:case"end":return e.stop()}}),e)}))),Id.apply(this,arguments)}function Ed(e,t,n,r){return Td.apply(this,arguments)}function Td(){return Td=pe(me().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=gu(t),o=al(),u=el(),s=T(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Gs(l.metadata.name),l.document&&(o=o.add(f)),(h=n.js(l)).setReadTime(n.Qs(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Bs.newChangeBuffer({trackRemovals:!0}),e.next=7,yd(a,function(e){return nc(Ys(qu.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return vd(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Un.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Un.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Us.Ts(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Td.apply(this,arguments)}function Sd(e,t){return Cd.apply(this,arguments)}function Cd(){return Cd=pe(me().mark((function e(t,n){var r,i,a,o=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:al(),e.next=3,yd(t,nc(Xf(n.bundledQuery)));case 3:return i=e.sent,a=gu(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=_l(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Kn.saveNamedQuery(e,n);var o=i.withResumeToken(Wu.EMPTY_BYTE_STRING,t);return a.Ms=a.Ms.insert(o.targetId,o),a.Un.updateTargetData(e,o).next((function(){return a.Un.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Un.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Kn.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Cd.apply(this,arguments)}var Nd=function(){function e(t){_(this,e),this.O=t,this.Ws=new Map,this.zs=new Map}return E(e,[{key:"getBundleMetadata",value:function(e,t){return Ef.resolve(this.Ws.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Ws.set(t.id,{id:(n=t).id,version:n.version,createTime:_l(n.createTime)}),Ef.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ef.resolve(this.zs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.zs.set(t.name,function(e){return{name:e.name,query:Xf(e.bundledQuery),readTime:_l(e.readTime)}}(t)),Ef.resolve()}}]),e}(),Ad=function(){function e(){_(this,e),this.overlays=new Gc(as.comparator),this.Hs=new Map}return E(e,[{key:"getOverlay",value:function(e,t){return Ef.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n){r.Yt(e,t,n)})),Ef.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Hs.delete(n)),Ef.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=new Map,i=t.length+1,a=new as(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ef.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Gc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=new Map,i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=new Map,c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(t,e)})),!(s.size>=r)););return Ef.resolve(s)}},{key:"Yt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);null!==r&&this.Hs.get(r.largestBatchId).delete(n.key),this.overlays=this.overlays.insert(n.key,new jf(t,n));var i=this.Hs.get(t);void 0===i&&(i=new Set,this.Hs.set(t,i)),i.add(n.key)}}}]),e}(),Rd=function(){function e(){_(this,e),this.Js=new Jc(Od.Ys),this.Xs=new Jc(Od.Zs)}return E(e,[{key:"isEmpty",value:function(){return this.Js.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Od(e,t);this.Js=this.Js.add(n),this.Xs=this.Xs.add(n)}},{key:"ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ei(new Od(e,t))}},{key:"ni",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"si",value:function(e){var t=this,n=new as(new qu([])),r=new Od(n,e),i=new Od(n,e+1),a=[];return this.Xs.forEachInRange([r,i],(function(e){t.ei(e),a.push(e.key)})),a}},{key:"ii",value:function(){var e=this;this.Js.forEach((function(t){return e.ei(t)}))}},{key:"ei",value:function(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}},{key:"ri",value:function(e){var t=new as(new qu([])),n=new Od(t,e),r=new Od(t,e+1),i=al();return this.Xs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Od(e,0),n=this.Js.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Od=function(){function e(t,n){_(this,e),this.key=t,this.oi=n}return E(e,null,[{key:"Ys",value:function(e,t){return as.comparator(e.key,t.key)||Pu(e.oi,t.oi)}},{key:"Zs",value:function(e,t){return Pu(e.oi,t.oi)||as.comparator(e.key,t.key)}}]),e}(),Pd=function(){function e(t,n){_(this,e),this.indexManager=t,this.referenceDelegate=n,this.gs=[],this.ci=1,this.ui=new Jc(Od.Ys)}return E(e,[{key:"checkEmpty",value:function(e){return Ef.resolve(0===this.gs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];var a=new Uf(i,t,n,r);this.gs.push(a);var o,u=T(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ui=this.ui.add(new Od(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ef.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ef.resolve(this.ai(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.hi(n),i=r<0?0:r;return Ef.resolve(this.gs.length>i?this.gs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ef.resolve(0===this.gs.length?-1:this.ci-1)}},{key:"getAllMutationBatches",value:function(e){return Ef.resolve(this.gs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Od(t,0),i=new Od(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],(function(e){var t=n.ai(e.oi);a.push(t)})),Ef.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Jc(Pu);return t.forEach((function(e){var t=new Od(e,0),i=new Od(e,Number.POSITIVE_INFINITY);n.ui.forEachInRange([t,i],(function(e){r=r.add(e.oi)}))})),Ef.resolve(this.li(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;as.isDocumentKey(i)||(i=i.child(""));var a=new Od(new as(i),0),o=new Jc(Pu);return this.ui.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.oi)),!0)}),a),Ef.resolve(this.li(o))}},{key:"li",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ai(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;yu(0===this.fi(t.batchId,"removed")),this.gs.shift();var r=this.ui;return Ef.forEach(t.mutations,(function(i){var a=new Od(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ui=r}))}},{key:"Qe",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Od(t,0),r=this.ui.firstAfterOrEqual(n);return Ef.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.gs.length,Ef.resolve()}},{key:"fi",value:function(e,t){return this.hi(e)}},{key:"hi",value:function(e){return 0===this.gs.length?0:e-this.gs[0].batchId}},{key:"ai",value:function(e){var t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}]),e}(),Dd=function(){function e(t){_(this,e),this.di=t,this.docs=new Gc(as.comparator),this.size=0}return E(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.di(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ef.resolve(n?n.document.mutableCopy():_s.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=el();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():_s.newInvalidDocument(e))})),Ef.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=el(),i=new as(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||s.readTime.compareTo(n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Ef.resolve(r)}},{key:"_i",value:function(e,t){return Ef.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ld(this)}},{key:"getSize",value:function(e){return Ef.resolve(this.size)}}]),e}(),Ld=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).Tn=e,r}return E(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Tn.addEntry(e,i)):t.Tn.removeEntry(r)})),Ef.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Tn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Tn.getEntries(e,t)}}]),n}(Hh),Md=function(){function e(t){_(this,e),this.persistence=t,this.wi=new Kh((function(e){return As(e)}),Rs),this.lastRemoteSnapshotVersion=Uu.min(),this.highestTargetId=0,this.mi=0,this.gi=new Rd,this.targetCount=0,this.yi=Rh.He()}return E(e,[{key:"forEachTarget",value:function(e,t){return this.wi.forEach((function(e,n){return t(n)})),Ef.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ef.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ef.resolve(this.mi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.yi.next(),Ef.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.mi&&(this.mi=t),Ef.resolve()}},{key:"Ze",value:function(e){this.wi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.yi=new Rh(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ze(t),this.targetCount+=1,Ef.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ze(t),Ef.resolve()}},{key:"removeTargetData",value:function(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Ef.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.wi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.wi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ef.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ef.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.wi.get(t)||null;return Ef.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.gi.ti(t,n),Ef.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.gi.ni(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ef.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.gi.si(t),Ef.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.gi.ri(t);return Ef.resolve(n)}},{key:"containsKey",value:function(e,t){return Ef.resolve(this.gi.containsKey(t))}}]),e}(),Ud=function(){function e(t,n){var r=this;_(this,e),this.pi={},this.overlays={},this.Nn=new Au(0),this.xn=!1,this.xn=!0,this.referenceDelegate=t(this),this.Un=new Md(this),this.indexManager=new vh,this.qn=new Dd((function(e){return r.referenceDelegate.Ii(e)})),this.O=new Bf(n),this.Kn=new Nd(this.O)}return E(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xn=!1,Promise.resolve()}},{key:"started",get:function(){return this.xn}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ad,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.pi[e.toKey()];return n||(n=new Pd(t,this.referenceDelegate),this.pi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;hu("MemoryPersistence","Starting transaction:",e);var i=new Fd(this.Nn.next());return this.referenceDelegate.Ei(),n(i).next((function(e){return r.referenceDelegate.Ti(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ai",value:function(e,t){return Ef.or(Object.values(this.pi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Fd=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return E(n)}(If),jd=function(){function e(t){_(this,e),this.persistence=t,this.Ri=new Rd,this.Pi=null}return E(e,[{key:"vi",get:function(){if(this.Pi)return this.Pi;throw mu()}},{key:"addReference",value:function(e,t,n){return this.Ri.addReference(n,t),this.vi.delete(n.toString()),Ef.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ri.removeReference(n,t),this.vi.add(n.toString()),Ef.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.vi.add(t.toString()),Ef.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ri.si(t.targetId).forEach((function(e){return n.vi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ei",value:function(){this.Pi=new Set}},{key:"Ti",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ef.forEach(this.vi,(function(r){var i=as.fromPath(r);return t.Vi(e,i).next((function(e){e||n.removeEntry(i,Uu.min())}))})).next((function(){return t.Pi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Vi(e,t).next((function(e){e?n.vi.delete(t.toString()):n.vi.add(t.toString())}))}},{key:"Ii",value:function(e){return 0}},{key:"Vi",value:function(e,t){var n=this;return Ef.or([function(){return Ef.resolve(n.Ri.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ai(e,t)}])}}],[{key:"bi",value:function(t){return new e(t)}}]),e}();function Vd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Bd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function qd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var zd=function(){function e(t,n,r,i){_(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return E(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new wu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(du("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Kd=function(){function e(t,n,r){_(this,e),this.targetId=t,this.state=n,this.error=r}return E(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new wu(i.error.code,i.error.message))),a?new e(t,i.state,r):(du("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Hd=function(){function e(t,n){_(this,e),this.clientId=t,this.activeTargetIds=n}return E(e,null,[{key:"Si",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ul(),o=0;i&&o<r.activeTargetIds.length;++o)i=is(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(du("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Wd=function(){function e(t,n){_(this,e),this.clientId=t,this.onlineState=n}return E(e,null,[{key:"Si",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(du("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Gd=function(){function e(){_(this,e),this.activeTargetIds=ul()}return E(e,[{key:"Ci",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ni",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Di",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Qd=function(){function e(t,n,r,i,a){_(this,e),this.window=t,this.Sn=n,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Gc(Pu),this.started=!1,this.$i=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=Vd(this.persistenceKey,this.xi),this.Bi=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Mi=this.Mi.insert(this.xi,new Gd),this.Li=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ui=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.qi=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ki=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Gi=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}return E(e,[{key:"start",value:function(){var e=pe(me().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ds();case 2:t=e.sent,n=T(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.xi){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Vd(this.persistenceKey,i)))&&(o=Hd.Si(i,a))&&(this.Mi=this.Mi.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.ji(),(u=this.storage.getItem(this.Ki))&&(s=this.Qi(u))&&this.Wi(s),c=T(this.$i);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Oi(f)}catch(d){c.e(d)}finally{c.f()}this.$i=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Bi,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.zi(this.Mi)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Mi.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Hi(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Hi(e,t,n),this.Ji(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(qd(this.persistenceKey,e));if(n){var r=Kd.Si(e,n);r&&(t=r.state)}}return this.Yi.Ci(e),this.ji(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Yi.Ni(e),this.ji()}},{key:"isLocalQueryTarget",value:function(e){return this.Yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(qd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Xi(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ji(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Zi(e)}},{key:"notifyBundleLoaded",value:function(){this.tr()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return hu("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){hu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){hu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Oi",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(hu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Fi)return void du("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable(pe(me().mark((function e(){var r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Li.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.er(n.key),e.abrupt("return",t.nr(r,null));case 6:if(!(i=t.sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.nr(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Ui.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.ir(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.rr(a));case 16:e.next=39;break;case 18:if(!t.qi.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.ur(o));case 23:e.next=39;break;case 25:if(n.key!==t.Ki){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Qi(n.newValue))){e.next=30;break}return e.abrupt("return",t.Wi(u));case 30:e.next=39;break;case 32:if(n.key!==t.Bi){e.next=37;break}s=function(e){var t=Au.A;if(null!=e)try{var n=JSON.parse(e);yu("number"==typeof n),t=n}catch(e){du("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Au.A&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Gi){e.next=39;break}return e.abrupt("return",t.syncEngine.ar());case 39:e.next=42;break;case 41:t.$i.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"Yi",get:function(){return this.Mi.get(this.xi)}},{key:"ji",value:function(){this.setItem(this.Fi,this.Yi.Di())}},{key:"Hi",value:function(e,t,n){var r=new zd(this.currentUser,e,t,n),i=Bd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Di())}},{key:"Ji",value:function(e){var t=Bd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Zi",value:function(e){var t={clientId:this.xi,onlineState:e};this.storage.setItem(this.Ki,JSON.stringify(t))}},{key:"Xi",value:function(e,t,n){var r=qd(this.persistenceKey,e),i=new Kd(e,t,n);this.setItem(r,i.Di())}},{key:"tr",value:function(){this.setItem(this.Gi,"value-not-used")}},{key:"er",value:function(e){var t=this.Li.exec(e);return t?t[1]:null}},{key:"sr",value:function(e,t){var n=this.er(e);return Hd.Si(n,t)}},{key:"ir",value:function(e,t){var n=this.Ui.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zd.Si(new su(i),r,t)}},{key:"cr",value:function(e,t){var n=this.qi.exec(e),r=Number(n[1]);return Kd.Si(r,t)}},{key:"Qi",value:function(e){return Wd.Si(e)}},{key:"rr",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.hr(t.batchId,t.state,t.error));case 2:hu("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ur",value:function(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}},{key:"nr",value:function(e,t){var n=this,r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.dr(o,u).then((function(){n.Mi=r}))}},{key:"Wi",value:function(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"zi",value:function(e){var t=ul();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Yd=function(){function e(){_(this,e),this._r=new Gd,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return E(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this._r.Ci(e),this.wr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.wr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this._r.Ni(e)}},{key:"isLocalQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.wr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this._r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"start",value:function(){return this._r=new Gd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Jd=function(){function e(){_(this,e)}return E(e,[{key:"mr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Xd=function(){function e(){var t=this;_(this,e),this.gr=function(){return t.yr()},this.pr=function(){return t.Ir()},this.Er=[],this.Tr()}return E(e,[{key:"mr",value:function(e){this.Er.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}},{key:"Tr",value:function(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}},{key:"yr",value:function(){hu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ir",value:function(){hu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"Vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),$d={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Zd=function(){function e(t){_(this,e),this.Ar=t.Ar,this.Rr=t.Rr}return E(e,[{key:"Pr",value:function(e){this.br=e}},{key:"vr",value:function(e){this.Vr=e}},{key:"onMessage",value:function(e){this.Sr=e}},{key:"close",value:function(){this.Rr()}},{key:"send",value:function(e){this.Ar(e)}},{key:"Dr",value:function(){this.br()}},{key:"Cr",value:function(e){this.Vr(e)}},{key:"Nr",value:function(e){this.Sr(e)}}]),e}(),ep=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return E(n,[{key:"Br",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ou;o.listenOnce(tu.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case eu.NO_ERROR:var t=o.getResponseJson();hu("Connection","XHR received:",JSON.stringify(t)),i(t);break;case eu.TIMEOUT:hu("Connection",'RPC "'+e+'" timed out'),a(new wu(ku.DEADLINE_EXCEEDED,"Request time out"));break;case eu.HTTP_ERROR:var n=o.getStatus();if(hu("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ku).indexOf(t)>=0?t:ku.UNKNOWN}(r.status);a(new wu(u,r.message))}else a(new wu(ku.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new wu(ku.UNAVAILABLE,"Connection failed."));break;default:mu()}}finally{hu("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Ur",value:function(e,t,n){var r=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=$o(),a=Zo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new iu({})),this.Fr(o.initMessageHeaders,t,n),H()||Q()||K().indexOf("Electron/")>=0||Y()||K().indexOf("MSAppHost/")>=0||G()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");hu("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Zd({Ar:function(e){l?hu("Connection","Not sending because WebChannel is closed:",e):(c||(hu("Connection","Opening WebChannel transport."),s.open(),c=!0),hu("Connection","WebChannel sending:",e),s.send(e))},Rr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,au.EventType.OPEN,(function(){l||hu("Connection","WebChannel transport opened.")})),h(s,au.EventType.CLOSE,(function(){l||(l=!0,hu("Connection","WebChannel transport closed"),f.Cr())})),h(s,au.EventType.ERROR,(function(e){l||(l=!0,pu("Connection","WebChannel transport errored:",e),f.Cr(new wu(ku.UNAVAILABLE,"The operation could not be completed")))})),h(s,au.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];yu(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){hu("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Vc[e];if(void 0!==t)return Wc(t)}(a),u=i.message;void 0===o&&(o=ku.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Cr(new wu(o,u)),s.close()}else hu("Connection","WebChannel received:",n),f.Nr(n)}})),h(a,nu.STAT_EVENT,(function(e){e.stat===ru.PROXY?hu("Connection","Detected buffering proxy"):e.stat===ru.NOPROXY&&hu("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Dr()}),0),f}}]),n}(function(){function e(t){_(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.kr=n+"://"+t.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return E(e,[{key:"Mr",value:function(e,t,n,r,i){var a=this.$r(e,t);hu("RestConnection","Sending: ",a,n);var o={};return this.Fr(o,r,i),this.Br(e,a,o,n).then((function(e){return hu("RestConnection","Received: ",e),e}),(function(t){throw pu("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"Lr",value:function(e,t,n,r,i){return this.Mr(e,t,n,r,i)}},{key:"Fr",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+cu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"$r",value:function(e,t){var n=$d[e];return"".concat(this.kr,"/v1/").concat(t,":").concat(n)}}]),e}());function tp(){return"undefined"!=typeof window?window:null}function np(){return"undefined"!=typeof document?document:null}function rp(e){return new kl(e,!0)}var ip=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;_(this,e),this.Sn=t,this.timerId=n,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}return E(e,[{key:"reset",value:function(){this.jr=0}},{key:"zr",value:function(){this.jr=this.Gr}},{key:"Hr",value:function(e){var t=this;this.cancel();var n=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,n-r);i>0&&hu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.jr," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,(function(){return t.Wr=Date.now(),e()})),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}},{key:"Yr",value:function(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}},{key:"cancel",value:function(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}},{key:"Jr",value:function(){return(Math.random()-.5)*this.jr}}]),e}(),ap=function(){function e(t,n,r,i,a,o,u,s){_(this,e),this.Sn=t,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new ip(t,n)}return E(e,[{key:"oo",value:function(){return 1===this.state||5===this.state||this.co()}},{key:"co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.uo()}},{key:"stop",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.oo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ao",value:function(){this.state=0,this.ro.reset()}},{key:"ho",value:function(){var e=this;this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,(function(){return e.lo()})))}},{key:"fo",value:function(e){this._o(),this.stream.send(e)}},{key:"lo",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_o",value:function(){this.so&&(this.so.cancel(),this.so=null)}},{key:"wo",value:function(){this.io&&(this.io.cancel(),this.io=null)}},{key:"close",value:function(){var e=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._o(),this.wo(),this.ro.cancel(),this.no++,4!==t?this.ro.reset():n&&n.code===ku.RESOURCE_EXHAUSTED?(du(n.toString()),du("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):n&&n.code===ku.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.mo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.vr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"mo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.yo(this.no),n=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.no===n&&e.po(i,a)}),(function(n){t((function(){var t=new wu(ku.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Io(t)}))}))}},{key:"po",value:function(e,t){var n=this,r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr((function(){r((function(){return n.state=2,n.io=n.Sn.enqueueAfterDelay(n.Zr,1e4,(function(){return n.co()&&(n.state=3),Promise.resolve()})),n.listener.Pr()}))})),this.stream.vr((function(e){r((function(){return n.Io(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"uo",value:function(){var e=this;this.state=5,this.ro.Hr(pe(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Io",value:function(e){return hu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"yo",value:function(e){var t=this;return function(n){t.Sn.enqueueAndForget((function(){return t.no===e?n():(hu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),op=function(e){N(n,e);var t=D(n);function n(e,r,i,a,o,u){var s;return _(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).O=o,s}return E(n,[{key:"Eo",value:function(e,t){return this.eo.Ur("Listen",e,t)}},{key:"onMessage",value:function(e){this.ro.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:mu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(yu(void 0===t||"string"==typeof t),Wu.fromBase64String(t||"")):(yu(void 0===t||t instanceof Uint8Array),Wu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?ku.UNKNOWN:Wc(e.code);return new wu(t,e.message||"")}(o);n=new hl(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Sl(e,s.document.name),l=_l(s.document.updateTime),f=new bs({mapValue:{fields:s.document.fields}}),h=_s.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new ll(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Sl(e,v.document),y=v.readTime?_l(v.readTime):Uu.min(),g=_s.newNoDocument(m,y),k=v.removedTargetIds||[];n=new ll([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Sl(e,w.document),x=w.removedTargetIds||[];n=new ll([],x,b,null)}else{if(!("filter"in t))return mu();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new Kc(I),T=_.targetId;n=new fl(T,E)}return n}(this.O,e),n=function(e){if(!("targetChange"in e))return Uu.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Uu.min():t.readTime?_l(t.readTime):Uu.min()}(e);return this.listener.To(t,n)}},{key:"Ao",value:function(e){var t={};t.database=Al(this.O),t.addTarget=function(e,t){var n,r=t.target;return(n=Os(r)?{documents:Ul(e,r)}:{query:Fl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=bl(e,t.resumeToken):t.snapshotVersion.compareTo(Uu.min())>0&&(n.readTime=wl(e,t.snapshotVersion.toTimestamp())),n}(this.O,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.O,e);n&&(t.labels=n),this.fo(t)}},{key:"Ro",value:function(e){var t={};t.database=Al(this.O),t.removeTarget=e,this.fo(t)}}]),n}(ap),up=function(e){N(n,e);var t=D(n);function n(e,r,i,a,o,u){var s;return _(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).O=o,s.Po=!1,s}return E(n,[{key:"bo",get:function(){return this.Po}},{key:"start",value:function(){this.Po=!1,this.lastStreamToken=void 0,Wn(A(n.prototype),"start",this).call(this)}},{key:"mo",value:function(){this.Po&&this.vo([])}},{key:"Eo",value:function(e,t){return this.eo.Ur("Write",e,t)}},{key:"onMessage",value:function(e){if(yu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();var t=function(e,t){return e&&e.length>0?(yu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?_l(e.updateTime):_l(t);return n.isEqual(Uu.min())&&(n=_l(t)),new Tc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=_l(e.commitTime);return this.listener.Vo(n,t)}return yu(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}},{key:"Do",value:function(){var e={};e.database=Al(this.O),this.fo(e)}},{key:"vo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ll(t.O,e)}))};this.fo(n)}}]),n}(ap),sp=function(e){N(n,e);var t=D(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.eo=i,o.O=a,o.Co=!1,o}return E(n,[{key:"No",value:function(){if(this.Co)throw new wu(ku.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Mr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.eo.Mr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ku.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new wu(ku.UNKNOWN,e.toString())}))}},{key:"Lr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.eo.Lr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ku.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new wu(ku.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Co=!0}}]),n}(function(){return E((function e(){_(this,e)}))}()),cp=function(){function e(t,n){_(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}return E(e,[{key:"Mo",value:function(){var e=this;0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ko=null,e.Fo("Backend didn't respond within 10 seconds."),e.$o("Offline"),Promise.resolve()})))}},{key:"Bo",value:function(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.$o("Offline")))}},{key:"set",value:function(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}},{key:"$o",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Fo",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Oo?(du(t),this.Oo=!1):hu("OnlineStateTracker",t)}},{key:"Lo",value:function(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}]),e}(),lp=E((function e(t,n,r,i,a){var o=this;_(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr((function(e){r.enqueueAndForget(pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=bp(o),!e.t0){e.next=5;break}return hu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gu(t)).Ko.add(4),e.next=4,dp(n);case 4:return n.Qo.set("Unknown"),n.Ko.delete(4),e.next=8,fp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Qo=new cp(r,i)}));function fp(e){return hp.apply(this,arguments)}function hp(){return hp=pe(me().mark((function e(t){var n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bp(t)){e.next=18;break}n=T(t.Go),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),hp.apply(this,arguments)}function dp(e){return pp.apply(this,arguments)}function pp(){return pp=pe(me().mark((function e(t){var n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.Go),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),pp.apply(this,arguments)}function vp(e,t){var n=gu(e);n.qo.has(t.targetId)||(n.qo.set(t.targetId,t),wp(n)?kp(n):Jp(n).co()&&yp(n,t))}function mp(e,t){var n=gu(e),r=Jp(n);n.qo.delete(t),r.co()&&gp(n,t),0===n.qo.size&&(r.co()?r.ho():bp(n)&&n.Qo.set("Unknown"))}function yp(e,t){e.Wo.Z(t.targetId),Jp(e).Ao(t)}function gp(e,t){e.Wo.Z(t),Jp(e).Ro(t)}function kp(e){e.Wo=new pl({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Tt:function(t){return e.qo.get(t)||null}}),Jp(e).start(),e.Qo.Mo()}function wp(e){return bp(e)&&!Jp(e).oo()&&e.qo.size>0}function bp(e){return 0===gu(e).Ko.size}function xp(e){e.Wo=void 0}function _p(e){return Ip.apply(this,arguments)}function Ip(){return Ip=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.qo.forEach((function(e,n){yp(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Ip.apply(this,arguments)}function Ep(e,t){return Tp.apply(this,arguments)}function Tp(){return Tp=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xp(t),wp(t)?(t.Qo.Bo(n),kp(t)):t.Qo.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Tp.apply(this,arguments)}function Sp(e,t,n){return Cp.apply(this,arguments)}function Cp(){return Cp=pe(me().mark((function e(t,n,r){var i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Qo.set("Online"),!(n instanceof hl&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=pe(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qo.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qo.delete(o),t.Wo.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),hu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Np(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ll?t.Wo.ct(n):n instanceof fl?t.Wo._t(n):t.Wo.ht(n),r.isEqual(Uu.min())){e.next=29;break}return e.prev=14,e.next=17,dd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Wo.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qo.get(r);i&&e.qo.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.qo.get(t);if(n){e.qo.set(t,n.withResumeToken(Wu.EMPTY_BYTE_STRING,n.snapshotVersion)),gp(e,t);var r=new Vf(n.target,t,1,n.sequenceNumber);yp(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),hu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Np(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Cp.apply(this,arguments)}function Np(e,t,n){return Ap.apply(this,arguments)}function Ap(){return Ap=pe(me().mark((function e(t,n,r){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Af(n)){e.next=2;break}throw n;case 2:return t.Ko.add(1),e.next=5,dp(t);case 5:t.Qo.set("Offline"),r||(r=function(){return dd(t.localStore)}),t.asyncQueue.enqueueRetryable(pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Ko.delete(1),e.next=6,fp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Ap.apply(this,arguments)}function Rp(e,t){return t().catch((function(n){return Np(e,n,t)}))}function Op(e){return Pp.apply(this,arguments)}function Pp(){return Pp=pe(me().mark((function e(t){var n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gu(t),r=Xp(n),i=n.Uo.length>0?n.Uo[n.Uo.length-1].batchId:-1;case 2:if(!Dp(n)){e.next=19;break}return e.prev=3,e.next=6,md(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Uo.length&&r.ho(),e.abrupt("break",19);case 10:i=a.batchId,Lp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Np(n,e.t0);case 17:e.next=2;break;case 19:Mp(n)&&Up(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Pp.apply(this,arguments)}function Dp(e){return bp(e)&&e.Uo.length<10}function Lp(e,t){e.Uo.push(t);var n=Xp(e);n.co()&&n.bo&&n.vo(t.mutations)}function Mp(e){return bp(e)&&!Xp(e).oo()&&e.Uo.length>0}function Up(e){Xp(e).start()}function Fp(e){return jp.apply(this,arguments)}function jp(){return jp=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xp(t).Do();case 1:case"end":return e.stop()}}),e)}))),jp.apply(this,arguments)}function Vp(e){return Bp.apply(this,arguments)}function Bp(){return Bp=pe(me().mark((function e(t){var n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Xp(t),r=T(t.Uo);try{for(r.s();!(i=r.n()).done;)a=i.value,n.vo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function qp(e,t,n){return zp.apply(this,arguments)}function zp(){return zp=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Uo.shift(),a=Ff.from(i,n,r),e.next=3,Rp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Op(t);case 5:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}function Kp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Xp(t).bo,!e.t0){e.next=4;break}return e.next=4,function(){var e=pe(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Hc(i=n.code)||i===ku.ABORTED){e.next=7;break}return r=t.Uo.shift(),Xp(t).ao(),e.next=5,Rp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Op(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Mp(t)&&Up(t);case 5:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Wp(e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=pe(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=gu(t)).asyncQueue.verifyOperationInProgress(),hu("RemoteStore","RemoteStore received new credentials"),i=bp(r),r.Ko.add(3),e.next=6,dp(r);case 6:return i&&r.Qo.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Ko.delete(3),e.next=12,fp(r);case 12:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}function Qp(e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=pe(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gu(t),!n){e.next=7;break}return r.Ko.delete(2),e.next=5,fp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Ko.add(2),e.next=12,dp(r);case 12:r.Qo.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Yp.apply(this,arguments)}function Jp(e){return e.zo||(e.zo=function(e,t,n){var r=gu(e);return r.No(),new op(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:_p.bind(null,e),vr:Ep.bind(null,e),To:Sp.bind(null,e)}),e.Go.push(function(){var t=pe(me().mark((function t(n){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zo.ao(),wp(e)?kp(e):e.Qo.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zo.stop();case 6:xp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.zo}function Xp(e){return e.Ho||(e.Ho=function(e,t,n){var r=gu(e);return r.No(),new up(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:Fp.bind(null,e),vr:Kp.bind(null,e),So:Vp.bind(null,e),Vo:qp.bind(null,e)}),e.Go.push(function(){var t=pe(me().mark((function t(n){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Ho.ao(),t.next=4,Op(e);case 4:t.next=9;break;case 6:return t.next=8,e.Ho.stop();case 8:e.Uo.length>0&&(hu("RemoteStore","Stopping write stream with ".concat(e.Uo.length," pending writes")),e.Uo=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Ho}var $p=function(){function e(t,n,r,i,a){_(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new bu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return E(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wu(ku.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Zp(e,t){if(du("AsyncQueue","".concat(t,": ").concat(e)),Af(e))return new wu(ku.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ev=function(){function e(t){_(this,e),this.comparator=t?function(e,n){return t(e,n)||as.comparator(e.key,n.key)}:function(e,t){return as.comparator(e.key,t.key)},this.keyedMap=nl(),this.sortedSet=new Gc(this.comparator)}return E(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),tv=function(){function e(){_(this,e),this.Jo=new Gc(as.comparator)}return E(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jo.get(t);n?0!==e.type&&3===n.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==n.type?this.Jo=this.Jo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jo=this.Jo.remove(t):1===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):mu():this.Jo=this.Jo.insert(t,e)}},{key:"Yo",value:function(){var e=[];return this.Jo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),nv=function(){function e(t,n,r,i,a,o,u,s){_(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return E(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,ev.emptySet(n),a,r,i,!0,!1)}}]),e}(),rv=E((function e(){_(this,e),this.Xo=void 0,this.listeners=[]})),iv=E((function e(){_(this,e),this.queries=new Kh((function(e){return ac(e)}),ic),this.onlineState="Unknown",this.Zo=new Set}));function av(e,t){return ov.apply(this,arguments)}function ov(){return ov=pe(me().mark((function e(t,n){var r,i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new rv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xo=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Zp(e.t0,"Initialization of query '".concat(oc(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.tc(r.onlineState),o.Xo&&n.ec(o.Xo)&&fv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ov.apply(this,arguments)}function uv(e,t){return sv.apply(this,arguments)}function sv(){return sv=pe(me().mark((function e(t,n){var r,i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),sv.apply(this,arguments)}function cv(e,t){var n,r=gu(e),i=!1,a=T(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=T(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.ec(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Xo=o}}}catch(f){a.e(f)}finally{a.f()}i&&fv(r)}function lv(e,t,n){var r=gu(e),i=r.queries.get(t);if(i){var a,o=T(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function fv(e){e.Zo.forEach((function(e){e.next()}))}var hv=function(){function e(t,n,r){_(this,e),this.query=t,this.nc=n,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}return E(e,[{key:"ec",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new nv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.sc?this.rc(e)&&(this.nc.next(e),a=!0):this.oc(e,this.onlineState)&&(this.cc(e),a=!0),this.ic=e,a}},{key:"onError",value:function(e){this.nc.error(e)}},{key:"tc",value:function(e){this.onlineState=e;var t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}},{key:"oc",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.uc||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"rc",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"cc",value:function(e){e=nv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}]),e}(),dv=function(){function e(t,n){_(this,e),this.payload=t,this.byteLength=n}return E(e,[{key:"ac",value:function(){return"metadata"in this.payload}}]),e}(),pv=function(){function e(t){_(this,e),this.O=t}return E(e,[{key:"Gs",value:function(e){return Sl(this.O,e)}},{key:"js",value:function(e){return e.metadata.exists?Pl(this.O,e.document,!1):_s.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}},{key:"Qs",value:function(e){return _l(e)}}]),e}(),vv=function(){function e(t,n,r){_(this,e),this.hc=t,this.localStore=n,this.O=r,this.queries=[],this.documents=[],this.progress=mv(t)}return E(e,[{key:"lc",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"fc",value:function(e){var t,n=new Map,r=new pv(this.O),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Gs(a.metadata.name),s=T(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||al()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=pe(me().mark((function e(){var t,n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ed(this.localStore,new pv(this.O),this.documents,this.hc.id);case 2:t=e.sent,n=this.fc(this.documents),r=T(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Sd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new id(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function mv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var yv=E((function e(t){_(this,e),this.key=t})),gv=E((function e(t){_(this,e),this.key=t})),kv=function(){function e(t,n){_(this,e),this.query=t,this.dc=n,this._c=null,this.current=!1,this.wc=al(),this.mutatedKeys=al(),this.mc=sc(t),this.gc=new ev(this.mc)}return E(e,[{key:"yc",get:function(){return this.dc}},{key:"Ic",value:function(e,t){var n=this,r=t?t.Ec:new tv,i=t?t.gc:this.gc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Js(this.query)&&i.size===this.query.limit?i.last():null,c=Xs(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=uc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Tc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.mc(f,s)>0||c&&n.mc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Js(this.query)||Xs(this.query))for(;o.size>this.query.limit;){var l=Js(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{gc:o,Ec:r,ks:u,mutatedKeys:a}}},{key:"Tc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;var a=e.Ec.Yo();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mu()}};return n(e)-n(t)}(e.type,t.type)||r.mc(e.doc,t.doc)})),this.Ac(n);var o=t?this.Rc():[],u=0===this.wc.size&&this.current?1:0,s=u!==this._c;return this._c=u,0!==a.length||s?{snapshot:new nv(this.query,e.gc,i,a,e.mutatedKeys,0===u,s,!1),Pc:o}:{Pc:o}}},{key:"tc",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new tv,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}},{key:"bc",value:function(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}},{key:"Ac",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.dc=t.dc.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.dc=t.dc.delete(e)})),this.current=e.current)}},{key:"Rc",value:function(){var e=this;if(!this.current)return[];var t=this.wc;this.wc=al(),this.gc.forEach((function(t){e.bc(t.key)&&(e.wc=e.wc.add(t.key))}));var n=[];return t.forEach((function(t){e.wc.has(t)||n.push(new gv(t))})),this.wc.forEach((function(e){t.has(e)||n.push(new yv(e))})),n}},{key:"vc",value:function(e){this.dc=e.Ks,this.wc=al();var t=this.Ic(e.documents);return this.applyChanges(t,!0)}},{key:"Vc",value:function(){return nv.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}]),e}(),wv=E((function e(t,n,r){_(this,e),this.query=t,this.targetId=n,this.view=r})),bv=E((function e(t){_(this,e),this.key=t,this.Sc=!1})),xv=function(){function e(t,n,r,i,a,o){_(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Dc={},this.Cc=new Kh((function(e){return ac(e)}),ic),this.Nc=new Map,this.xc=new Set,this.kc=new Gc(as.comparator),this.Oc=new Map,this.Mc=new Rd,this.$c={},this.Fc=new Map,this.Bc=Rh.Je(),this.onlineState="Unknown",this.Lc=void 0}return E(e,[{key:"isPrimaryClient",get:function(){return!0===this.Lc}}]),e}();function _v(e,t){return Iv.apply(this,arguments)}function Iv(){return Iv=pe(me().mark((function e(t,n){var r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mm(t),!(o=r.Cc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Vc(),e.next=15;break;case 6:return e.next=8,yd(r.localStore,nc(n));case 8:return u=e.sent,r.isPrimaryClient&&vp(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Ev(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Iv.apply(this,arguments)}function Ev(e,t,n,r){return Tv.apply(this,arguments)}function Tv(){return Tv=pe(me().mark((function e(t,n,r,i){var a,o,u,s,c,l;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Uc=function(e,n,r){return function(){var e=pe(me().mark((function e(t,n,r,i){var a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ic(r),e.t0=a.ks,!e.t0){e.next=6;break}return e.next=5,wd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ic(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Wv(t,n.targetId,u.Pc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,wd(t.localStore,n,!0);case 3:return a=e.sent,o=new kv(n,a.Ks),u=o.Ic(a.documents),s=cl.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Wv(t,r,c.Pc),l=new wv(n,r,o),e.abrupt("return",(t.Cc.set(n,l),t.Nc.has(r)?t.Nc.get(r).push(n):t.Nc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}function Sv(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=pe(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gu(t),i=r.Cc.get(n),!((a=r.Nc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Nc.set(i.targetId,a.filter((function(e){return!ic(e,n)}))),void r.Cc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,gd(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),mp(r.remoteStore,i.targetId),Kv(r,i.targetId)})).catch(Mh);case 9:e.next=14;break;case 11:return Kv(r,i.targetId),e.next=14,gd(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Nv(e,t,n){return Av.apply(this,arguments)}function Av(){return Av=pe(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ym(t),e.prev=1,e.next=4,function(e,t){var n,r=gu(e),i=Mu.now(),a=t.reduce((function(e,t){return e.add(t.key)}),al());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Us.Es(e,a).next((function(a){n=a;var o,u=[],s=T(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Oc(c,n.get(c.key));null!=l&&u.push(new Mc(c.key,l,xs(l.value.mapValue),Sc.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.gs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.$c[e.currentUser.toKey()];r||(r=new Gc(Pu)),r=r.insert(t,n),e.$c[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Yv(i,a.changes);case 9:return e.next=11,Op(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Zp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Av.apply(this,arguments)}function Rv(e,t){return Ov.apply(this,arguments)}function Ov(){return Ov=pe(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gu(t),e.prev=1,e.next=4,pd(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Oc.get(t);n&&(yu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Sc=!0:e.modifiedDocuments.size>0?yu(n.Sc):e.removedDocuments.size>0&&(yu(n.Sc),n.Sc=!1))})),e.next=8,Yv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Mh(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Ov.apply(this,arguments)}function Pv(e,t,n){var r=gu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Cc.forEach((function(e,n){var r=n.view.tc(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=gu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=T(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.tc(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&fv(n)}(r.eventManager,t),i.length&&r.Dc.To(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Dv(e,t,n){return Lv.apply(this,arguments)}function Lv(){return Lv=pe(me().mark((function e(t,n,r){var i,a,o,u,s,c;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=gu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Oc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Gc(as.comparator)).insert(o,_s.newNoDocument(o,Uu.min())),s=al().add(o),c=new sl(Uu.min(),new Map,new Jc(Pu),u,s),e.next=9,Rv(i,c);case 9:i.kc=i.kc.remove(o),i.Oc.delete(n),Qv(i),e.next=16;break;case 14:return e.next=16,gd(i.localStore,n,!1).then((function(){return Kv(i,n,r)})).catch(Mh);case 16:case"end":return e.stop()}}),e)}))),Lv.apply(this,arguments)}function Mv(e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=pe(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gu(t),i=n.batch.batchId,e.prev=1,e.next=4,hd(r.localStore,n);case 4:return a=e.sent,zv(r,i,null),qv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Yv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Mh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Uv.apply(this,arguments)}function Fv(e,t,n){return jv.apply(this,arguments)}function jv(){return jv=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gu(t),e.prev=1,e.next=4,function(e,t){var n=gu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.gs.lookupMutationBatch(e,t).next((function(t){return yu(null!==t),r=t.keys(),n.gs.removeMutationBatch(e,t)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,zv(i,n,r),qv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Yv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Mh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),jv.apply(this,arguments)}function Vv(e,t){return Bv.apply(this,arguments)}function Bv(){return Bv=pe(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bp((r=gu(t)).remoteStore)||hu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=gu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.gs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Fc.get(i)||[]).push(n),r.Fc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Zp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Bv.apply(this,arguments)}function qv(e,t){(e.Fc.get(t)||[]).forEach((function(e){e.resolve()})),e.Fc.delete(t)}function zv(e,t,n){var r=gu(e),i=r.$c[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.$c[r.currentUser.toKey()]=i}}function Kv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e.Nc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Cc.delete(a),n&&e.Dc.qc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Nc.delete(t),e.isPrimaryClient&&e.Mc.si(t).forEach((function(t){e.Mc.containsKey(t)||Hv(e,t)}))}function Hv(e,t){e.xc.delete(t.path.canonicalString());var n=e.kc.get(t);null!==n&&(mp(e.remoteStore,n),e.kc=e.kc.remove(t),e.Oc.delete(n),Qv(e))}function Wv(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof yv?(e.Mc.addReference(a.key,t),Gv(e,a)):a instanceof gv?(hu("SyncEngine","Document no longer in limbo: "+a.key),e.Mc.removeReference(a.key,t),e.Mc.containsKey(a.key)||Hv(e,a.key)):mu()}}catch(o){i.e(o)}finally{i.f()}}function Gv(e,t){var n=t.key,r=n.path.canonicalString();e.kc.get(n)||e.xc.has(r)||(hu("SyncEngine","New document in limbo: "+n),e.xc.add(r),Qv(e))}function Qv(e){for(;e.xc.size>0&&e.kc.size<e.maxConcurrentLimboResolutions;){var t=e.xc.values().next().value;e.xc.delete(t);var n=new as(qu.fromString(t)),r=e.Bc.next();e.Oc.set(r,new bv(n)),e.kc=e.kc.insert(n,r),vp(e.remoteStore,new Vf(nc(Ys(n.path)),r,2,Au.A))}}function Yv(e,t,n){return Jv.apply(this,arguments)}function Jv(){return Jv=pe(me().mark((function e(t,n,r){var i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gu(t),a=[],o=[],u=[],e.t0=i.Cc.isEmpty(),e.t0){e.next=9;break}return i.Cc.forEach((function(e,t){u.push(i.Uc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=od.Ss(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Dc.To(a),e.next=9,function(){var e=pe(me().mark((function e(t,n){var r,i,a,o,u,s,c,l;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ef.forEach(n,(function(t){return Ef.forEach(t.vs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ef.forEach(t.Vs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Af(e.t0)){e.next=10;break}throw e.t0;case 10:hu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ms.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ms=r.Ms.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Xv(e,t){return $v.apply(this,arguments)}function $v(){return $v=pe(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=gu(t)).currentUser.isEqual(n)){e.next=11;break}return hu("SyncEngine","User change. New user:",n.toKey()),e.next=5,ld(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Fc.forEach((function(e){e.forEach((function(e){e.reject(new wu(ku.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Yv(r,i.qs);case 11:case"end":return e.stop()}}),e)}))),$v.apply(this,arguments)}function Zv(e,t){var n=gu(e),r=n.Oc.get(t);if(r&&r.Sc)return al().add(r.key);var i=al(),a=n.Nc.get(t);if(!a)return i;var o,u=T(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Cc.get(s);i=i.unionWith(c.view.yc)}}catch(l){u.e(l)}finally{u.f()}return i}function em(e,t){return tm.apply(this,arguments)}function tm(){return tm=pe(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gu(t),e.next=3,wd(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.vc(i),e.abrupt("return",(r.isPrimaryClient&&Wv(r,n.targetId,a.Pc),a));case 6:case"end":return e.stop()}}),e)}))),tm.apply(this,arguments)}function nm(e){return rm.apply(this,arguments)}function rm(){return rm=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gu(t),e.abrupt("return",xd(n.localStore).then((function(e){return Yv(n,e)})));case 2:case"end":return e.stop()}}),e)}))),rm.apply(this,arguments)}function im(e,t,n,r){return am.apply(this,arguments)}function am(){return am=pe(me().mark((function e(t,n,r,i){var a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gu(t),e.next=3,function(e,t){var n=gu(e),r=gu(n.gs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Ge(e,t).next((function(t){return t?n.Us.Es(e,t):Ef.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Op(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(zv(a,n,i||null),qv(a,n),function(e,t){gu(gu(e).gs).Qe(t)}(a.localStore,n)):mu();case 11:return e.next=13,Yv(a,o);case 13:e.next=16;break;case 15:hu("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),am.apply(this,arguments)}function om(e,t){return um.apply(this,arguments)}function um(){return um=pe(me().mark((function e(t,n){var r,i,a,o,u,s,c,l;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mm(r=gu(t)),ym(r),!0!==n||!0===r.Lc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,sm(r,i.toArray());case 5:return a=e.sent,r.Lc=!0,e.next=9,Qp(r.remoteStore,!0);case 9:o=T(a);try{for(o.s();!(u=o.n()).done;)s=u.value,vp(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Lc){e.next=25;break}return c=[],l=Promise.resolve(),r.Nc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Kv(r,t),gd(r.localStore,t,!0)})),mp(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,sm(r,c);case 21:return function(e){var t=gu(e);t.Oc.forEach((function(e,n){mp(t.remoteStore,n)})),t.Mc.ii(),t.Oc=new Map,t.kc=new Gc(as.comparator)}(r),r.Lc=!1,e.next=25,Qp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),um.apply(this,arguments)}function sm(e,t,n){return cm.apply(this,arguments)}function cm(){return cm=pe(me().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=gu(t),a=[],o=[],u=T(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Nc.get(c))||0===f.length){e.next=34;break}return e.next=11,yd(i.localStore,nc(f[0]));case 11:l=e.sent,h=T(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Cc.get(p),e.next=20,em(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,bd(i.localStore,c);case 36:return y=e.sent,e.next=39,yd(i.localStore,y);case 39:return l=e.sent,e.next=42,Ev(i,lm(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Dc.To(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),cm.apply(this,arguments)}function lm(e){return Qs(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function fm(e){var t=gu(e);return gu(gu(t.localStore).persistence).ds()}function hm(e,t,n,r){return dm.apply(this,arguments)}function dm(){return dm=pe(me().mark((function e(t,n,r,i){var a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=gu(t)).Lc){e.next=5;break}hu("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Nc.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,xd(a.localStore);case 11:return o=e.sent,u=sl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,Yv(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,gd(a.localStore,n,!0);case 18:return Kv(a,n,i),e.abrupt("break",21);case 20:mu();case 21:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}function pm(e,t,n){return vm.apply(this,arguments)}function vm(){return vm=pe(me().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=mm(t)).Lc){e.next=45;break}a=T(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Nc.has(u)){e.next=10;break}return hu("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,bd(i.localStore,u);case 12:return s=e.sent,e.next=15,yd(i.localStore,s);case 15:return c=e.sent,e.next=18,Ev(i,lm(s),c.targetId,!1);case 18:vp(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=T(r),e.prev=30,h=me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Nc.has(t),!e.t0){e.next=5;break}return e.next=5,gd(i.localStore,t,!1).then((function(){mp(i.remoteStore,t),Kv(i,t)})).catch(Mh);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),vm.apply(this,arguments)}function mm(e){var t=gu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dv.bind(null,t),t.Dc.To=cv.bind(null,t.eventManager),t.Dc.qc=lv.bind(null,t.eventManager),t}function ym(e){var t=gu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fv.bind(null,t),t}function gm(e,t,n){var r=gu(e);(function(){var e=pe(me().mark((function e(t,n,r){var i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=gu(e),r=_l(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Kn.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(mv(i)),a=new vv(i,t.localStore,n.O),e.next=14,n.Kc();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.lc(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Kc();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,Yv(t,s.ws,void 0);case 30:return e.next=32,function(e,t){var n=gu(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Kn.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),pu("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var km=function(){function e(){_(this,e),this.synchronizeTabs=!1}return E(e,[{key:"initialize",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.O=rp(t.databaseInfo.databaseId),this.sharedClientState=this.Gc(t),this.persistence=this.jc(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Qc(t),this.localStore=this.Wc(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){return null}},{key:"Wc",value:function(e){return cd(this.persistence,new ud,e.initialUser,this.O)}},{key:"jc",value:function(e){return new Ud(jd.bi,this.O)}},{key:"Gc",value:function(e){return new Yd}},{key:"terminate",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wm=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).zc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return E(n,[{key:"initialize",value:function(){var e=pe(me().mark((function e(t){var r=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(A(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,_d(this.localStore);case 4:return e.next=6,this.zc.initialize(this,t);case 6:return e.next=8,ym(this.zc.syncEngine);case 8:return e.next=10,Op(this.zc.remoteStore);case 10:return e.next=12,this.persistence.Hn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Wc",value:function(e){return cd(this.persistence,new ud,e.initialUser,this.O)}},{key:"Qc",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Vh(t,e.asyncQueue)}},{key:"jc",value:function(e){var t=rd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_h.withCacheSize(this.cacheSizeBytes):_h.DEFAULT;return new ed(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,tp(),np(),this.O,this.sharedClientState,!!this.forceOwnership)}},{key:"Gc",value:function(e){return new Yd}}]),n}(km),bm=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r,!1)).zc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return E(n,[{key:"initialize",value:function(){var e=pe(me().mark((function e(t){var r,i=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(A(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.zc.syncEngine,e.t0=this.sharedClientState instanceof Qd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={hr:im.bind(null,r),lr:hm.bind(null,r),dr:pm.bind(null,r),ds:fm.bind(null,r),ar:nm.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Hn(function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,om(i.zc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Gc",value:function(e){var t=tp();if(!Qd.Vt(t))throw new wu(ku.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(wm),xm=function(){function e(){_(this,e)}return E(e,[{key:"initialize",value:function(){var e=pe(me().mark((function e(t,n){var r=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Pv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Xv.bind(null,this.syncEngine),e.next=12,Qp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new iv}},{key:"createDatastore",value:function(e){var t,n=rp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new ep(t));return function(e,t,n,r){return new sp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Pv(o.syncEngine,e,0)},a=Xd.Vt()?new Xd:new Jd,new lp(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new xv(e,t,n,r,i,a);return o&&(u.Lc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gu(t),hu("RemoteStore","RemoteStore shutting down."),n.Ko.add(5),e.next=5,dp(n);case 5:n.jo.shutdown(),n.Qo.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function _m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return pe(me().mark((function r(){var i;return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Im=function(){function e(t){_(this,e),this.observer=t,this.muted=!1}return E(e,[{key:"next",value:function(e){this.observer.next&&this.Hc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Jc",value:function(){this.muted=!0}},{key:"Hc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Em=function(){function e(t,n){var r=this;_(this,e),this.Yc=t,this.O=n,this.metadata=new bu,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then((function(e){e&&e.ac()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return E(e,[{key:"close",value:function(){return this.Yc.cancel()}},{key:"getMetadata",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Zc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(){var e=pe(me().mark((function e(){var t,n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Xc.decode(t),r=Number(n),isNaN(r)&&this.eu("length string (".concat(n,") is not valid number")),e.next=9,this.nu(r);case 9:return i=e.sent,e.abrupt("return",new dv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"tu",value:function(){var e=pe(me().mark((function e(){var t,n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.su()<0)){e.next=7;break}return e.next=3,this.iu();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.su())<0&&this.eu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nu",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.iu();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.eu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){throw this.Yc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"iu",value:function(){var e=pe(me().mark((function e(){var t,n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Yc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Tm=function(){function e(t){_(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return E(e,[{key:"lookup",value:function(){var e=pe(me().mark((function e(t){var n,r=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new wu(ku.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=pe(me().mark((function e(t,n){var r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gu(t),i=Al(r.O)+"/documents",a={documents:n.map((function(e){return Tl(r.O,e)}))},e.next=5,r.Lr("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Dl(r.O,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());yu(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new qc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=pe(me().mark((function e(){var t,n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=as.fromPath(t);n.mutations.push(new zc(r,n.precondition(r)))})),e.next=7,function(){var e=pe(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gu(t),i=Al(r.O)+"/documents",a={writes:n.map((function(e){return Ll(r.O,e)}))},e.next=3,r.Mr("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mu();t=Uu.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new wu(ku.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Sc.updateTime(t):Sc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Uu.min()))throw new wu(ku.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sc.updateTime(t)}return Sc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Sm=function(){function e(t,n,r,i){_(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new ip(this.asyncQueue,"transaction_retry")}return E(e,[{key:"run",value:function(){this.ru-=1,this.ou()}},{key:"ou",value:function(){var e=this;this.ro.Hr(pe(me().mark((function t(){var n,r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Tm(e.datastore),(r=e.cu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.uu(t)}))}))})).catch((function(t){e.uu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"cu",value:function(e){try{var t=this.updateFunction(e);return!ns(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"uu",value:function(e){var t=this;this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget((function(){return t.ou(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"au",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Hc(t)}return!1}}]),e}(),Cm=function(){function e(t,n,r,i){var a=this;_(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=su.UNAUTHENTICATED,this.clientId=Ou.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return hu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return E(e,[{key:"getConfiguration",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new wu(ku.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new bu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(pe(me().mark((function n(){var r;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Zp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Nm(e,t){return Am.apply(this,arguments)}function Am(){return Am=pe(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),hu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ld(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Am.apply(this,arguments)}function Rm(e,t){return Om.apply(this,arguments)}function Om(){return Om=pe(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Pm(t);case 3:return r=e.sent,hu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Wp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Wp(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Om.apply(this,arguments)}function Pm(e){return Dm.apply(this,arguments)}function Dm(){return Dm=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return hu("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Nm(t,new km);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Dm.apply(this,arguments)}function Lm(e){return Mm.apply(this,arguments)}function Mm(){return Mm=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return hu("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Rm(t,new xm);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Mm.apply(this,arguments)}function Um(e){return Pm(e).then((function(e){return e.persistence}))}function Fm(e){return Pm(e).then((function(e){return e.localStore}))}function jm(e){return Lm(e).then((function(e){return e.remoteStore}))}function Vm(e){return Lm(e).then((function(e){return e.syncEngine}))}function Bm(e){return qm.apply(this,arguments)}function qm(){return qm=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=_v.bind(null,n.syncEngine),r.onUnlisten=Sv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),qm.apply(this,arguments)}function zm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bu;return e.asyncQueue.enqueueAndForget(pe(me().mark((function i(){return me().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Im({next:function(a){t.enqueueAndForget((function(){return uv(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new wu(ku.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new wu(ku.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new hv(Ys(n.path),a,{includeMetadataChanges:!0,uc:!0});return av(e,o)},i.next=3,Bm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Km(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bu;return e.asyncQueue.enqueueAndForget(pe(me().mark((function i(){return me().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Im({next:function(n){t.enqueueAndForget((function(){return uv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new wu(ku.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new hv(n,a,{includeMetadataChanges:!0,uc:!0});return av(e,o)},i.next=3,Bm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Hm=new Map;function Wm(e,t,n){if(!n)throw new wu(ku.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Gm(e,t,n,r){if(!0===t&&!0===r)throw new wu(ku.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Qm(e){if(!as.isDocumentKey(e))throw new wu(ku.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ym(e){if(as.isDocumentKey(e))throw new wu(ku.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Jm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":mu()}function Xm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wu(ku.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Jm(e);throw new wu(ku.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function $m(e,t){if(t<=0)throw new wu(ku.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Zm=function(){function e(t){var n;if(_(this,e),void 0===t.host){if(void 0!==t.ssl)throw new wu(ku.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new wu(ku.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Gm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return E(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),ey=function(){function e(t,n,r){_(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zm({}),this._settingsFrozen=!1,t instanceof ts?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new wu(ku.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ts(e.options.projectId)}(t))}return E(e,[{key:"app",get:function(){if(!this._app)throw new wu(ku.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new wu(ku.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new _u;switch(e.type){case"gapi":var t=e.client;return yu(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Su(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new wu(ku.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Hm.get(e);t&&(hu("ComponentProvider","Removing Datastore"),Hm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function ty(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Xm(e,ey))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&pu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=su.MOCK_USER;else{o=z(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new wu(ku.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new su(s)}e._authCredentials=new Iu(new xu(o,u))}}var ny=function(){function e(t,n,r){_(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return E(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new iy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ry=function(){function e(t,n,r){_(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return E(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),iy=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,Ys(i)))._path=i,a.type="collection",a}return E(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ny(this.firestore,null,new as(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ry);function ay(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=le(e),Wm("collection","path",t),e instanceof ey){var a=qu.fromString.apply(qu,[t].concat(r));return Ym(a),new iy(e,null,a)}if(!(e instanceof ny||e instanceof iy))throw new wu(ku.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(qu.fromString.apply(qu,[t].concat(r)));return Ym(o),new iy(e.firestore,null,o)}function oy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=le(e),1===arguments.length&&(t=Ou.R()),Wm("doc","path",t),e instanceof ey){var a=qu.fromString.apply(qu,[t].concat(r));return Qm(a),new ny(e,null,new as(a))}if(!(e instanceof ny||e instanceof iy))throw new wu(ku.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(qu.fromString.apply(qu,[t].concat(r)));return Qm(o),new ny(e.firestore,e instanceof iy?e.converter:null,new as(o))}function uy(e,t){return e=le(e),t=le(t),(e instanceof ny||e instanceof iy)&&(t instanceof ny||t instanceof iy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function sy(e,t){return e=le(e),t=le(t),e instanceof ry&&t instanceof ry&&e.firestore===t.firestore&&ic(e._query,t._query)&&e.converter===t.converter}var cy=function(){function e(){var t=this;_(this,e),this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new ip(this,"async_queue_retry"),this.yu=function(){var e=np();e&&hu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ro.Yr()};var n=np();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.yu)}return E(e,[{key:"isShuttingDown",get:function(){return this.fu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.pu(),this.Iu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.fu){this.fu=!0,this.mu=e||!1;var t=np();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}},{key:"enqueue",value:function(e){var t=this;if(this.pu(),this.fu)return new Promise((function(){}));var n=new bu;return this.Iu((function(){return t.fu&&t.mu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.lu.push(e),t.Eu()}))}},{key:"Eu",value:function(){var e=pe(me().mark((function e(){var t=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.lu.length){e.next=14;break}return e.prev=1,e.next=4,this.lu[0]();case 4:this.lu.shift(),this.ro.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Af(e.t0)){e.next=12;break}throw e.t0;case 12:hu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.lu.length>0&&this.ro.Hr((function(){return t.Eu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Iu",value:function(e){var t=this,n=this.hu.then((function(){return t.wu=!0,e().catch((function(e){t._u=e,t.wu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw du("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.wu=!1,e}))}));return this.hu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.pu(),this.gu.indexOf(e)>-1&&(t=0);var i=$p.createAndSchedule(this,e,t,n,(function(e){return r.Tu(e)}));return this.du.push(i),i}},{key:"pu",value:function(){this._u&&mu()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Au",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.hu,e.next=3,t;case 3:if(t!==this.hu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ru",value:function(e){var t,n=T(this.du);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.Au().then((function(){t.du.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.du);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Au()}))}},{key:"bu",value:function(e){this.gu.push(e)}},{key:"Tu",value:function(e){var t=this.du.indexOf(e);this.du.splice(t,1)}}]),e}();function ly(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var fy=function(){function e(){_(this,e),this._progressObserver={},this._taskCompletionResolver=new bu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return E(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),hy=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new cy,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return E(n,[{key:"_terminate",value:function(){return this._firestoreClient||py(this),this._firestoreClient.terminate()}}]),n}(ey);function dy(e){return e._firestoreClient||py(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function py(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new es(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Cm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function vy(e,t,n){var r=new bu;return e.asyncQueue.enqueue(pe(me().mark((function i(){return me().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Nm(e,n);case 3:return i.next=5,Rm(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===ku.FAILED_PRECONDITION||e.code===ku.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function my(e){return function(e){return e.asyncQueue.enqueue(pe(me().mark((function t(){var n,r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Um(e);case 2:return n=t.sent,t.next=5,jm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=gu(e);return t.Ko.delete(0),fp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(dy(e=Xm(e,hy)))}function yy(e){return function(e){return e.asyncQueue.enqueue(pe(me().mark((function t(){var n,r;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Um(e);case 2:return n=t.sent,t.next=5,jm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gu(t)).Ko.add(0),e.next=4,dp(n);case 4:n.Qo.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(dy(e=Xm(e,hy)))}function gy(e,t){var n=dy(e=Xm(e,hy)),r=new fy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Em(e,t)}(function(e,t){if(e instanceof Uint8Array)return _m(e,t);if(e instanceof ArrayBuffer)return _m(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,rp(t));e.asyncQueue.enqueueAndForget(pe(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gm,t.next=3,Vm(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function ky(e,t){return function(e,t){return e.asyncQueue.enqueue(pe(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=gu(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Kn.getNamedQuery(e,t)}))},n.next=3,Fm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(dy(e=Xm(e,hy)),t).then((function(t){return t?new ry(e,null,t.query):null}))}function wy(e){if(e._initialized||e._terminated)throw new wu(ku.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var by=function(){function e(){_(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new wu(ku.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ku(n)}return E(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var xy=function(){function e(t){_(this,e),this._byteString=t}return E(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Wu.fromBase64String(t))}catch(t){throw new wu(ku.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Wu.fromUint8Array(t))}}]),e}(),_y=E((function e(t){_(this,e),this._methodName=t})),Iy=function(){function e(t,n){if(_(this,e),!isFinite(t)||t<-90||t>90)throw new wu(ku.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new wu(ku.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return E(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Pu(this._lat,e._lat)||Pu(this._long,e._long)}}]),e}(),Ey=/^__.*__$/,Ty=function(){function e(t,n,r){_(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Mc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lc(e,this.data,t,this.fieldTransforms)}}]),e}(),Sy=function(){function e(t,n,r){_(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return new Mc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Cy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mu()}}var Ny=function(){function e(t,n,r,i,a,o){_(this,e),this.settings=t,this.databaseId=n,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return E(e,[{key:"path",get:function(){return this.settings.path}},{key:"Vu",get:function(){return this.settings.Vu}},{key:"Su",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Du",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.Nu(e),r}},{key:"xu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.vu(),r}},{key:"ku",value:function(e){return this.Su({path:void 0,Cu:!0})}},{key:"Ou",value:function(e){return Yy(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"vu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}},{key:"Nu",value:function(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(Cy(this.Vu)&&Ey.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}]),e}(),Ay=function(){function e(t,n,r){_(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.O=r||rp(t)}return E(e,[{key:"Fu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ny({Vu:e,methodName:t,$u:n,path:Ku.emptyPath(),Cu:!1,Mu:r},this.databaseId,this.O,this.ignoreUndefinedProperties)}}]),e}();function Ry(e){var t=e._freezeSettings(),n=rp(e._databaseId);return new Ay(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Oy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Fu(a.merge||a.mergeFields?2:0,t,n,i);Hy("Data must be an object, but it was:",o,r);var u,s,c=zy(r,o);if(a.merge)u=new Hu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=T(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=Wy(t,d,n);if(!o.contains(p))throw new wu(ku.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Jy(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Hu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Ty(new bs(c),u,s)}var Py=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Vu)throw 1===e.Vu?e.Ou("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ou("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(_y);function Dy(e,t,n){return new Ny({Vu:3,$u:t.settings.$u,methodName:e._methodName,Cu:n},t.databaseId,t.O,t.ignoreUndefinedProperties)}var Ly=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){return new Ec(e.path,new yc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(_y),My=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).Bu=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=Dy(this,e,!0),n=this.Bu.map((function(e){return qy(e,t)})),r=new gc(n);return new Ec(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(_y),Uy=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).Bu=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=Dy(this,e,!0),n=this.Bu.map((function(e){return qy(e,t)})),r=new wc(n);return new Ec(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(_y),Fy=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).Lu=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=new xc(e.O,hc(e.O,this.Lu));return new Ec(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(_y);function jy(e,t,n,r){var i=e.Fu(1,t,n);Hy("Data must be an object, but it was:",i,r);var a=[],o=bs.empty();ju(r,(function(e,r){var u=Qy(t,e,n);r=le(r);var s=i.xu(u);if(r instanceof Py)a.push(u);else{var c=qy(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Hu(a);return new Sy(o,u,i.fieldTransforms)}function Vy(e,t,n,r,i,a){var o=e.Fu(1,t,n),u=[Wy(t,r,n)],s=[i];if(a.length%2!=0)throw new wu(ku.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Wy(t,a[c])),s.push(a[c+1]);for(var l=[],f=bs.empty(),h=u.length-1;h>=0;--h)if(!Jy(l,u[h])){var d=u[h],p=s[h];p=le(p);var v=o.xu(d);if(p instanceof Py)l.push(d);else{var m=qy(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Hu(l);return new Sy(f,y,o.fieldTransforms)}function By(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qy(n,e.Fu(r?4:3,t))}function qy(e,t){if(Ky(e=le(e)))return Hy("Unsupported field value:",t,e),zy(e,t);if(e instanceof _y)return function(e,t){if(!Cy(t.Vu))throw t.Ou("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ou("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Cu&&4!==t.Vu)throw t.Ou("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=T(e);try{for(a.s();!(n=a.n()).done;){var o=qy(n.value,t.ku(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=le(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return hc(t.O,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Mu.fromDate(e);return{timestampValue:wl(t.O,n)}}if(e instanceof Mu){var r=new Mu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wl(t.O,r)}}if(e instanceof Iy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xy)return{bytesValue:bl(t.O,e._byteString)};if(e instanceof ny){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ou("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Il(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ou("Unsupported field value: ".concat(Jm(e)))}(e,t)}function zy(e,t){var n={};return Vu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ju(e,(function(e,r){var i=qy(r,t.Du(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ky(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Mu||e instanceof Iy||e instanceof xy||e instanceof ny||e instanceof _y)}function Hy(e,t,n){if(!Ky(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Jm(n);throw"an object"===r?t.Ou(e+" a custom object"):t.Ou(e+" "+r)}}function Wy(e,t,n){if((t=le(t))instanceof by)return t._internalPath;if("string"==typeof t)return Qy(e,t);throw Yy("Field path arguments must be of type string or ",e,!1,void 0,n)}var Gy=new RegExp("[~\\*/\\[\\]]");function Qy(e,t,n){if(t.search(Gy)>=0)throw Yy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return L(by,he(t.split(".")))._internalPath}catch(r){throw Yy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Yy(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new wu(ku.INVALID_ARGUMENT,u+e+s)}function Jy(e,t){return e.some((function(e){return e.isEqual(t)}))}var Xy=function(){function e(t,n,r,i,a){_(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return E(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ny(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new $y(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Zy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),$y=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){return Wn(A(n.prototype),"data",this).call(this)}}]),n}(Xy);function Zy(e,t){return"string"==typeof t?Qy(e,t):t instanceof by?t._internalPath:t._delegate._internalPath}var eg=function(){function e(t,n){_(this,e),this.hasPendingWrites=t,this.fromCache=n}return E(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),tg=function(e){N(n,e);var t=D(n);function n(e,r,i,a,o,u){var s;return _(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return E(n,[{key:"exists",value:function(){return Wn(A(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ng(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Zy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Xy),ng=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Wn(A(n.prototype),"data",this).call(this,e)}}]),n}(tg),rg=function(){function e(t,n,r,i){_(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new eg(i.hasPendingWrites,i.fromCache),this.query=r}return E(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ng(n._firestore,n._userDataWriter,r.key,r,new eg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wu(ku.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new ng(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ng(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ig(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function ig(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mu()}}function ag(e,t){return e instanceof tg&&t instanceof tg?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof rg&&t instanceof rg&&e._firestore===t._firestore&&sy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function og(e){if(Xs(e)&&0===e.explicitOrderBy.length)throw new wu(ku.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ug=E((function e(){_(this,e)}));function sg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var cg=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).Uu=e,a.qu=r,a.Ku=i,a.type="where",a}return E(n,[{key:"_apply",value:function(e){var t=Ry(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new wu(ku.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){wg(o,a);var s,c=[],l=T(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(kg(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=kg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||wg(o,a),u=By(n,"where",o,"in"===a||"not-in"===a);var h=Ps.create(i,a,u);return function(e,t){if(t.S()){var n=Zs(e);if(null!==n&&!n.isEqual(t.field))throw new wu(ku.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=$s(e);null!==r&&bg(e,t.field,r)}var i=function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new wu(ku.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new wu(ku.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new ry(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Gs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(ug);var lg=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).Uu=e,i.Gu=r,i.type="orderBy",i}return E(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new wu(ku.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new wu(ku.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new zs(t,n);return function(e,t){if(null===$s(e)){var n=Zs(e);null!==n&&bg(e,n,t.field)}}(e,r),r}(e._query,this.Uu,this.Gu);return new ry(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Gs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(ug);var fg=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a.ju=r,a.Qu=i,a}return E(n,[{key:"_apply",value:function(e){return new ry(e.firestore,e.converter,rc(e._query,this.ju,this.Qu))}}]),n}(ug);var hg=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return E(n,[{key:"_apply",value:function(e){var t=gg(e,this.type,this.Wu,this.zu);return new ry(e.firestore,e.converter,function(e,t){return new Gs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(ug);function dg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hg("startAt",t,!0)}function pg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hg("startAfter",t,!1)}var vg=function(e){N(n,e);var t=D(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return E(n,[{key:"_apply",value:function(e){var t=gg(e,this.type,this.Wu,this.zu);return new ry(e.firestore,e.converter,function(e,t){return new Gs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(ug);function mg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vg("endBefore",t,!1)}function yg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vg("endAt",t,!0)}function gg(e,t,n,r){if(n[0]=le(n[0]),n[0]instanceof Xy)return function(e,t,n,r,i){if(!r)throw new wu(ku.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=T(tc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ps(t,r.key));else{var c=r.data.field(s.field);if(Xu(c))throw new wu(ku.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new wu(ku.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new qs(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Ry(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new wu(ku.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new wu(ku.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ec(e)&&-1!==c.indexOf("/"))throw new wu(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(qu.fromString(c));if(!as.isDocumentKey(l))throw new wu(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new as(l);u.push(ps(t,f))}else{var h=By(n,r,c);u.push(h)}}return new qs(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function kg(e,t,n){if("string"==typeof(n=le(n))){if(""===n)throw new wu(ku.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ec(t)&&-1!==n.indexOf("/"))throw new wu(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(qu.fromString(n));if(!as.isDocumentKey(r))throw new wu(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ps(e,new as(r))}if(n instanceof ny)return ps(e,n._key);throw new wu(ku.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Jm(n),"."))}function wg(e,t){if(!Array.isArray(e)||0===e.length)throw new wu(ku.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new wu(ku.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function bg(e,t,n){if(!n.isEqual(t))throw new wu(ku.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var xg=function(){function e(){_(this,e)}return E(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mu()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return ju(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Iy(Yu(e.latitude),Yu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=$u(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Qu(e);return new Mu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=qu.fromString(e);yu(Ql(n));var r=new ts(n.get(1),n.get(3)),i=new as(n.popFirst(5));return r.isEqual(t)||du("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function _g(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Ig=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new xy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ny(this.firestore,null,t)}}]),n}(xg),Eg=function(){function e(t,n){_(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ry(t)}return E(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Tg(e,this._firestore),i=_g(r.converter,t,n),a=Oy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Sc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Tg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=le(t))||t instanceof by?Vy(this._dataReader,"WriteBatch.update",i._key,t,n,o):jy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Sc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Tg(e,this._firestore);return this._mutations=this._mutations.concat(new qc(t._key,Sc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new wu(ku.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Tg(e,t){if((e=le(e)).firestore!==t)throw new wu(ku.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Sg=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new xy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ny(this.firestore,null,t)}}]),n}(xg);function Cg(e){e=Xm(e,ny);var t=Xm(e.firestore,hy),n=dy(t),r=new Sg(t);return function(e,t){var n=new bu;return e.asyncQueue.enqueueAndForget(pe(me().mark((function r(){return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=gu(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Us.ys(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new wu(ku.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Zp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Fm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new tg(t,r,e._key,n,new eg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Ng(e){e=Xm(e,ry);var t=Xm(e.firestore,hy),n=dy(t),r=new Sg(t);return function(e,t){var n=new bu;return e.asyncQueue.enqueueAndForget(pe(me().mark((function r(){return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=pe(me().mark((function e(t,n,r){var i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wd(t,n,!0);case 3:i=e.sent,a=new kv(n,i.Ks),o=a.Ic(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Zp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Fm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new rg(t,r,e,n)}))}function Ag(e,t,n){e=Xm(e,ny);var r=Xm(e.firestore,hy),i=_g(e.converter,t,n);return Dg(r,[Oy(Ry(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Sc.none())])}function Rg(e,t,n){e=Xm(e,ny);for(var r=Xm(e.firestore,hy),i=Ry(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Dg(r,[("string"==typeof(t=le(t))||t instanceof by?Vy(i,"updateDoc",e._key,t,n,o):jy(i,"updateDoc",e._key,t)).toMutation(e._key,Sc.exists(!0))])}function Og(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=le(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||ly(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(ly(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof ny)l=Xm(e.firestore,hy),f=Ys(e._key.path),c={next:function(t){n[s]&&n[s](Lg(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Xm(e,ry);l=Xm(p.firestore,hy),f=p._query;var v=new Sg(l);c={next:function(e){n[s]&&n[s](new rg(l,v,p,e))},error:n[s+1],complete:n[s+2]},og(e._query)}return function(e,t,n,r){var i=new Im(r),a=new hv(t,i,n);return e.asyncQueue.enqueueAndForget(pe(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=av,t.next=3,Bm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Jc(),e.asyncQueue.enqueueAndForget(pe(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=uv,t.next=3,Bm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dy(l),f,h,c)}function Pg(e,t){return function(e,t){var n=new Im(t);return e.asyncQueue.enqueueAndForget(pe(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gu(e).Zo.add(t),t.next()},t.next=3,Bm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Jc(),e.asyncQueue.enqueueAndForget(pe(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gu(e).Zo.delete(t)},t.next=3,Bm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dy(e=Xm(e,hy)),ly(t)?t:{next:t})}function Dg(e,t){return function(e,t){var n=new bu;return e.asyncQueue.enqueueAndForget(pe(me().mark((function r(){return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Nv,r.next=3,Vm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(dy(e),t)}function Lg(e,t,n){var r=n.docs.get(t._key),i=new Sg(e);return new tg(e,i,t._key,r,new eg(n.hasPendingWrites,n.fromCache),t.converter)}var Mg=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r))._firestore=e,i}return E(n,[{key:"get",value:function(e){var t=this,r=Tg(e,this._firestore),i=new Sg(this._firestore);return Wn(A(n.prototype),"get",this).call(this,e).then((function(e){return new tg(t._firestore,i,r._key,e._document,new eg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){_(this,e),this._firestore=t,this._transaction=n,this._dataReader=Ry(t)}return E(e,[{key:"get",value:function(e){var t=this,n=Tg(e,this._firestore),r=new Ig(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return mu();var i=e[0];if(i.isFoundDocument())return new Xy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Xy(t._firestore,r,n._key,null,n.converter);throw mu()}))}},{key:"set",value:function(e,t,n){var r=Tg(e,this._firestore),i=_g(r.converter,t,n),a=Oy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Tg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=le(t))||t instanceof by?Vy(this._dataReader,"Transaction.update",i._key,t,n,o):jy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Tg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Ug(e,t){return function(e,t){var n=new bu;return e.asyncQueue.enqueueAndForget(pe(me().mark((function r(){var i;return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Lm(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Sm(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(dy(e=Xm(e,hy)),(function(n){return t(new Mg(e,n))}))}function Fg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new My("arrayUnion",t)}function jg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Uy("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){cu=e}(Je),Be(new ye("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new hy(i,new Eu(e.getProvider("auth-internal")),new Nu(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),nt(uu,"3.4.5",e),nt(uu,"3.4.5","esm2017")}();function Vg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new wu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Bg(){if("undefined"===typeof Uint8Array)throw new wu("unimplemented","Uint8Arrays are not available in this environment.")}function qg(){if("undefined"==typeof atob)throw new wu("unimplemented","Blobs are unavailable in Firestore in this environment.")}var zg=function(){function e(t){_(this,e),this._delegate=t}return E(e,[{key:"toBase64",value:function(){return qg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Bg(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return qg(),new e(xy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Bg(),new e(xy.fromUint8Array(t))}}]),e}();function Kg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Hg=function(){function e(){_(this,e)}return E(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){wy(e=Xm(e,hy));var n=dy(e),r=e._freezeSettings(),i=new xm;return vy(n,i,new wm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){wy(e=Xm(e,hy));var t=dy(e),n=e._freezeSettings(),r=new xm;return vy(t,r,new bm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new wu(ku.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new bu;return e._queue.enqueueAndForgetEvenWhileRestricted(pe(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sf.Vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Sf.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(rd(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Wg=function(){function e(t,n,r){var i=this;_(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ts||(this._appCompat=t)}return E(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||pu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ty(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return my(this._delegate)}},{key:"disableNetwork",value:function(){return yy(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Gm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new bu;return e.asyncQueue.enqueueAndForget(pe(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Vv,n.next=3,Vm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(dy(e=Xm(e,hy)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Pg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new wu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new ok(this,ay(this._delegate,e))}catch(t){throw $g(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Xg(this,oy(this._delegate,e))}catch(t){throw $g(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new rk(this,function(e,t){if(e=Xm(e,ey),Wm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new wu(ku.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ry(e,null,function(e){return new Gs(qu.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw $g(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Ug(this._delegate,(function(n){return e(new Qg(t,n))}))}},{key:"batch",value:function(){var e=this;return dy(this._delegate),new Yg(new Eg(this._delegate,(function(t){return Dg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return gy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return ky(this._delegate,e).then((function(e){return e?new rk(t,e):null}))}}]),e}(),Gg=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new zg(new xy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Xg.forKey(t,this.firestore,null)}}]),n}(xg);var Qg=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Gg(t)}return E(e,[{key:"get",value:function(e){var t=this,n=uk(e);return this._delegate.get(n).then((function(e){return new tk(t._firestore,new tg(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=uk(e);return n?(Vg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=uk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=uk(e);return this._delegate.delete(t),this}}]),e}(),Yg=function(){function e(t){_(this,e),this._delegate=t}return E(e,[{key:"set",value:function(e,t,n){var r=uk(e);return n?(Vg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=uk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=uk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Jg=function(){function e(t,n,r){_(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return E(e,[{key:"fromFirestore",value:function(e,t){var n=new ng(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new nk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Gg(t),n),i.set(n,a)),a}}]),e}();Jg.INSTANCES=new WeakMap;var Xg=function(){function e(t,n){_(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Gg(t)}return E(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new ok(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new ok(this.firestore,ay(this._delegate,e))}catch(t){throw $g(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=le(e))instanceof ny&&uy(this._delegate,e)}},{key:"set",value:function(e,t){t=Vg("DocumentReference.set",t);try{return t?Ag(this._delegate,e,t):Ag(this._delegate,e)}catch(n){throw $g(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Rg(this._delegate,e):Rg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw $g(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Dg(Xm(e.firestore,hy),[new qc(e._key,Sc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Zg(n),a=ek(n,(function(t){return new tk(e.firestore,new tg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Og(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Cg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Xm(e,ny);var t=Xm(e.firestore,hy);return zm(dy(t),e._key,{source:"server"}).then((function(n){return Lg(t,e,n)}))}(this._delegate):function(e){e=Xm(e,ny);var t=Xm(e.firestore,hy);return zm(dy(t),e._key).then((function(n){return Lg(t,e,n)}))}(this._delegate),t.then((function(e){return new tk(n.firestore,new tg(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Jg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new wu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ny(n._delegate,r,new as(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ny(n._delegate,r,t))}}]),e}();function $g(e,t,n){return e.message=e.message.replace(t,n),e}function Zg(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Kg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function ek(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Kg(e[0])?e[0]:Kg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var tk=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"ref",get:function(){return new Xg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return ag(this._delegate,e._delegate)}}]),e}(),nk=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||mu()}(void 0!==t),t}}]),n}(tk),rk=function(){function e(t,n){_(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Gg(t)}return E(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,sg(this._delegate,function(e,t,n){var r=t,i=Zy("where",e);return new cg(i,r,n)}(t,n,r)))}catch(i){throw $g(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,sg(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Zy("orderBy",e);return new lg(n,t)}(t,n)))}catch(r){throw $g(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,sg(this._delegate,function(e){return $m("limit",e),new fg("limit",e,"F")}(t)))}catch(n){throw $g(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,sg(this._delegate,function(e){return $m("limitToLast",e),new fg("limitToLast",e,"L")}(t)))}catch(n){throw $g(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,sg(this._delegate,dg.apply(void 0,arguments)))}catch(t){throw $g(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,sg(this._delegate,pg.apply(void 0,arguments)))}catch(t){throw $g(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,sg(this._delegate,mg.apply(void 0,arguments)))}catch(t){throw $g(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,sg(this._delegate,yg.apply(void 0,arguments)))}catch(t){throw $g(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return sy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Ng(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Xm(e,ry);var t=Xm(e.firestore,hy),n=dy(t),r=new Sg(t);return Km(n,e._query,{source:"server"}).then((function(n){return new rg(t,r,e,n)}))}(this._delegate):function(e){e=Xm(e,ry);var t=Xm(e.firestore,hy),n=dy(t),r=new Sg(t);return og(e._query),Km(n,e._query).then((function(n){return new rg(t,r,e,n)}))}(this._delegate),t.then((function(e){return new ak(n.firestore,new rg(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Zg(n),a=ek(n,(function(t){return new ak(e.firestore,new rg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Og(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Jg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),ik=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new nk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),ak=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"query",get:function(){return new rk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new nk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new ik(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new nk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return ag(this._delegate,e._delegate)}}]),e}(),ok=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return E(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Xg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Xg(this.firestore,void 0===e?oy(this._delegate):oy(this._delegate,e))}catch(t){throw $g(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Xm(e.firestore,hy),r=oy(e),i=_g(e.converter,t);return Dg(n,[Oy(Ry(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Sc.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Xg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return uy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Jg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(rk);function uk(e){return Xm(e,ny)}var sk,ck=function(){function e(){_(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=L(by,n)}return E(e,[{key:"isEqual",value:function(e){return(e=le(e))instanceof by&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ku.keyField().canonicalString())}}]),e}(),lk=function(){function e(t){_(this,e),this._delegate=t}return E(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Ly("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Py("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Fg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=jg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Fy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),fk={Firestore:Wg,GeoPoint:Iy,Timestamp:Mu,Blob:zg,Transaction:Qg,WriteBatch:Yg,DocumentReference:Xg,DocumentSnapshot:tk,Query:rk,QueryDocumentSnapshot:nk,QuerySnapshot:ak,CollectionReference:ok,FieldPath:ck,FieldValue:lk,setLogLevel:function(e){!function(e){lu.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ye("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},fk)))})(sk=ft,(function(e,t){return new Wg(e,t,new Hg)})),sk.registerVersion("@firebase/firestore-compat","0.1.14");function hk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var dk;Object.create;var pk="facebook.com",vk="github.com",mk="google.com",yk="password",gk="twitter.com",kk="EMAIL_SIGNIN",wk="PASSWORD_RESET",bk="RECOVER_EMAIL",xk="REVERT_SECOND_FACTOR_ADDITION",_k="VERIFY_AND_CHANGE_EMAIL",Ik="VERIFY_EMAIL";function Ek(){return x({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Tk=function(){var e;return x(e={},"admin-restricted-operation","This operation is restricted to administrators only."),x(e,"argument-error",""),x(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),x(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),x(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),x(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),x(e,"cordova-not-ready","Cordova framework is not ready."),x(e,"cors-unsupported","This browser is not supported."),x(e,"credential-already-in-use","This credential is already associated with a different user account."),x(e,"custom-token-mismatch","The custom token corresponds to a different audience."),x(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),x(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),x(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),x(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),x(e,"email-already-in-use","The email address is already in use by another account."),x(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),x(e,"expired-action-code","The action code has expired."),x(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),x(e,"internal-error","An internal AuthError has occurred."),x(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),x(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),x(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),x(e,"invalid-auth-event","An internal AuthError has occurred."),x(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),x(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),x(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),x(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),x(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),x(e,"invalid-email","The email address is badly formatted."),x(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),x(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),x(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),x(e,"invalid-credential","The supplied auth credential is malformed or has expired."),x(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),x(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),x(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),x(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),x(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),x(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),x(e,"wrong-password","The password is invalid or the user does not have a password."),x(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),x(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),x(e,"invalid-provider-id","The specified provider ID is invalid."),x(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),x(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),x(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),x(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),x(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),x(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),x(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),x(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),x(e,"missing-continue-uri","A continue URL must be provided in the request."),x(e,"missing-iframe-start","An internal AuthError has occurred."),x(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),x(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),x(e,"missing-multi-factor-info","No second factor identifier is provided."),x(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),x(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),x(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),x(e,"app-deleted","This instance of FirebaseApp has been deleted."),x(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),x(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),x(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),x(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),x(e,"no-auth-event","An internal AuthError has occurred."),x(e,"no-such-provider","User was not linked to an account with the given provider."),x(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),x(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),x(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),x(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),x(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),x(e,"provider-already-linked","User can only be linked to one identity for the given provider."),x(e,"quota-exceeded","The project's quota for this operation has been exceeded."),x(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),x(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),x(e,"rejected-credential","The request contains malformed or mismatching credentials."),x(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),x(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),x(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),x(e,"timeout","The operation has timed out."),x(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),x(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),x(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),x(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),x(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),x(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),x(e,"unverified-email","The operation requires a verified email."),x(e,"user-cancelled","The user did not grant your application the permissions it requested."),x(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),x(e,"user-disabled","The user account has been disabled by an administrator."),x(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),x(e,"user-signed-out",""),x(e,"weak-password","The password must be 6 characters long or more."),x(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),x(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Sk=Ek,Ck=new $("auth","Firebase",Ek()),Nk=new Ae("@firebase/auth");function Ak(e){if(Nk.logLevel<=be.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nk.error.apply(Nk,["Auth (".concat(Je,"): ").concat(e)].concat(n))}}function Rk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Lk.apply(void 0,[e].concat(n))}function Ok(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Lk.apply(void 0,[e].concat(n))}function Pk(e,t,n){var r=Object.assign(Object.assign({},Sk()),x({},t,n));return new $("auth","Firebase",r).create(t,{appName:e.name})}function Dk(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Rk(e,"argument-error"),Pk(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Lk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=he(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(he(o)))}return Ck.create.apply(Ck,[e].concat(n))}function Mk(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Lk.apply(void 0,[t].concat(r))}}function Uk(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Ak(t),new Error(t)}function Fk(e,t){e||Uk(t)}var jk=new Map;function Vk(e){Fk(e instanceof Function,"Expected a class definition");var t=jk.get(e);return t?(Fk(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,jk.set(e,t),t)}function Bk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qk(){return"http:"===zk()||"https:"===zk()}function zk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Kk=function(){function e(t,n){_(this,e),this.shortDelay=t,this.longDelay=n,Fk(n>t,"Short delay should be less than long delay!"),this.isMobile=H()||Q()}return E(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qk()||G()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Hk(e,t){Fk(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Wk=function(){function e(){_(this,e)}return E(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Uk("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Uk("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Uk("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Gk=(x(dk={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),x(dk,"MISSING_CUSTOM_TOKEN","internal-error"),x(dk,"INVALID_IDENTIFIER","invalid-email"),x(dk,"MISSING_CONTINUE_URI","internal-error"),x(dk,"INVALID_PASSWORD","wrong-password"),x(dk,"MISSING_PASSWORD","internal-error"),x(dk,"EMAIL_EXISTS","email-already-in-use"),x(dk,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),x(dk,"INVALID_IDP_RESPONSE","invalid-credential"),x(dk,"INVALID_PENDING_TOKEN","invalid-credential"),x(dk,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),x(dk,"MISSING_REQ_TYPE","internal-error"),x(dk,"EMAIL_NOT_FOUND","user-not-found"),x(dk,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),x(dk,"EXPIRED_OOB_CODE","expired-action-code"),x(dk,"INVALID_OOB_CODE","invalid-action-code"),x(dk,"MISSING_OOB_CODE","internal-error"),x(dk,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),x(dk,"INVALID_ID_TOKEN","invalid-user-token"),x(dk,"TOKEN_EXPIRED","user-token-expired"),x(dk,"USER_NOT_FOUND","user-token-expired"),x(dk,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),x(dk,"INVALID_CODE","invalid-verification-code"),x(dk,"INVALID_SESSION_INFO","invalid-verification-id"),x(dk,"INVALID_TEMPORARY_PROOF","invalid-credential"),x(dk,"MISSING_SESSION_INFO","missing-verification-id"),x(dk,"SESSION_EXPIRED","code-expired"),x(dk,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),x(dk,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),x(dk,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),x(dk,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),x(dk,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),x(dk,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),x(dk,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),x(dk,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),x(dk,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),x(dk,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),x(dk,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),dk),Qk=new Kk(3e4,6e4);function Yk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Jk(e,t,n,r){return Xk.apply(this,arguments)}function Xk(){return Xk=pe(me().mark((function e(t,n,r,i){var a,o=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",$k(t,a,pe(me().mark((function e(){var a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=ie(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Wk.fetch()(nw(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Xk.apply(this,arguments)}function $k(e,t,n){return Zk.apply(this,arguments)}function Zk(){return Zk=pe(me().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Gk),n),e.prev=2,a=new rw(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw iw(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw iw(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw iw(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Pk(t,p,d);case 30:Rk(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof X)){e.next=37;break}throw e.t0;case 37:Rk(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),Zk.apply(this,arguments)}function ew(e,t,n,r){return tw.apply(this,arguments)}function tw(){return tw=pe(me().mark((function e(t,n,r,i){var a,o,u=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Jk(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Rk(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),tw.apply(this,arguments)}function nw(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Hk(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var rw=function(){function e(t){var n=this;_(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Ok(n.auth,"network-request-failed"))}),Qk.get())}))}return E(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function iw(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Ok(e,t,r);return i.customData._tokenResponse=n,i}function aw(e,t){return ow.apply(this,arguments)}function ow(){return ow=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),ow.apply(this,arguments)}function uw(e,t){return sw.apply(this,arguments)}function sw(){return sw=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),sw.apply(this,arguments)}function cw(e,t){return lw.apply(this,arguments)}function lw(){return lw=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),lw.apply(this,arguments)}function fw(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function hw(){return hw=pe(me().mark((function e(t){var n,r,i,a,o,u,s=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=le(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Mk((a=pw(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:fw(dw(a.auth_time)),issuedAtTime:fw(dw(a.iat)),expirationTime:fw(dw(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function dw(e){return 1e3*Number(e)}function pw(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Ak("JWT malformed, contained fewer than 3 sections"),null;try{var a=V(r);return a?JSON.parse(a):(Ak("Failed to decode base64 JWT payload"),null)}catch(o){return Ak("Caught error parsing JWT payload as JSON",o),null}}function vw(e,t){return mw.apply(this,arguments)}function mw(){return mw=pe(me().mark((function e(t,n){var r=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof X&&yw(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),mw.apply(this,arguments)}function yw(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var gw=function(){function e(t){_(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return E(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(pe(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),kw=function(){function e(t,n){_(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return E(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=fw(this.lastLoginAt),this.creationTime=fw(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ww(e){return bw.apply(this,arguments)}function bw(){return bw=pe(me().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,vw(t,cw(r,{idToken:i}));case 6:Mk(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Iw(o.providerUserInfo):[],s=_w(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new kw(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function xw(){return(xw=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=le(t),e.next=3,ww(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _w(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(he(n),he(t))}function Iw(e){return e.map((function(e){var t=e.providerId,n=hk(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ew(e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=pe(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$k(t,{},pe(me().mark((function e(){var r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=nw(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Wk.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}var Sw=function(){function e(){_(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return E(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Mk(e.idToken,"internal-error"),Mk("undefined"!==typeof e.idToken,"internal-error"),Mk("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=pw(e);return Mk(t,"internal-error"),Mk("undefined"!==typeof t.exp,"internal-error"),Mk("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=pe(me().mark((function e(t){var n,r=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Mk(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=pe(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ew(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Uk("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Mk("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Mk("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Mk("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Cw(e,t){Mk("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Nw=function(){function e(t){_(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=hk(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?he(a.providerData):[],this.metadata=new kw(a.createdAt||void 0,a.lastLoginAt||void 0)}return E(e,[{key:"getIdToken",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vw(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Mk(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return hw.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return xw.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Mk(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Mk(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=pe(me().mark((function e(t){var n,r,i=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ww(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,vw(this,aw(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Mk(k&&_,t,"internal-error");var I=Sw.fromJSON(this.name,_);Mk("string"===typeof k,t,"internal-error"),Cw(f,t.name),Cw(h,t.name),Mk("boolean"===typeof w,t,"internal-error"),Mk("boolean"===typeof b,t,"internal-error"),Cw(d,t.name),Cw(p,t.name),Cw(v,t.name),Cw(m,t.name),Cw(y,t.name),Cw(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=pe(me().mark((function t(n,r){var i,a,o,u=arguments;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Sw).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ww(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Aw=function(){function e(){_(this,e),this.type="NONE",this.storage={}}return E(e,[{key:"_isAvailable",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Aw.type="NONE";var Rw=Aw;function Ow(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Pw=function(){function e(t,n,r){_(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ow(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ow("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return E(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Nw._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=pe(me().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Vk(Rw),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Vk(Rw),u=Ow(i,n.config.apiKey,n.name),s=null,c=T(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Nw._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Dw(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Fw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Lw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Vw(t))return"Blackberry";if(Bw(t))return"Webos";if(Mw(t))return"Safari";if((t.includes("chrome/")||Uw(t))&&!t.includes("edge/"))return"Chrome";if(jw(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Lw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/firefox\//i.test(e)}function Mw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Uw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/crios\//i.test(e)}function Fw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/iemobile/i.test(e)}function jw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/android/i.test(e)}function Vw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/blackberry/i.test(e)}function Bw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/webos/i.test(e)}function qw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/iphone|ipad|ipod/i.test(e)}function zw(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return qw(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Kw(){return Y()&&10===document.documentMode}function Hw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return qw(e)||jw(e)||Bw(e)||Vw(e)||/windows phone/i.test(e)||Fw(e)}function Ww(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Dw(K());break;case"Worker":t="".concat(Dw(K()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Je,"/").concat(r)}var Gw=function(){function e(t,n){_(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yw(this),this.idTokenSubscription=new Yw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ck,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return E(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Vk(t)),this._initializationPromise=this.queue(pe(me().mark((function r(){var i,a;return me().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Pw.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=pe(me().mark((function e(t){var n,r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Mk(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ww(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?le(t):null)&&Mk(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=pe(me().mark((function e(t){var n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Mk(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(pe(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Vk(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new $("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=pe(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Mk(n=t&&Vk(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Pw.create(this,[Vk(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=pe(me().mark((function e(t){var n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Mk(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Mk(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ww(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qw(e){return le(e)}var Yw=function(){function e(t){var n=this;_(this,e),this.auth=t,this.observer=null,this.addObserver=ue((function(e){return n.observer=e}))}return E(e,[{key:"next",get:function(){return Mk(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Jw(e,t,n){var r=Qw(e);Mk(r._canInitEmulator,r,"emulator-config-failed"),Mk(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Xw(t),o=function(e){var t=Xw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:$w(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:$w(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Xw(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $w(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Zw=function(){function e(t,n){_(this,e),this.providerId=t,this.signInMethod=n}return E(e,[{key:"toJSON",value:function(){return Uk("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Uk("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Uk("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Uk("not implemented")}}]),e}();function eb(e,t){return tb.apply(this,arguments)}function tb(){return tb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:resetPassword",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),tb.apply(this,arguments)}function nb(e,t){return rb.apply(this,arguments)}function rb(){return rb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),rb.apply(this,arguments)}function ib(e,t){return ab.apply(this,arguments)}function ab(){return ab=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:update",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}function ob(e,t){return ub.apply(this,arguments)}function ub(){return ub=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ew(t,"POST","/v1/accounts:signInWithPassword",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),ub.apply(this,arguments)}function sb(e,t){return cb.apply(this,arguments)}function cb(){return cb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:sendOobCode",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function lb(e,t){return fb.apply(this,arguments)}function fb(){return fb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sb(t,n));case 1:case"end":return e.stop()}}),e)}))),fb.apply(this,arguments)}function hb(e,t){return db.apply(this,arguments)}function db(){return db=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sb(t,n));case 1:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function pb(e,t){return vb.apply(this,arguments)}function vb(){return vb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sb(t,n));case 1:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function mb(e,t){return yb.apply(this,arguments)}function yb(){return yb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sb(t,n));case 1:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function gb(e,t){return kb.apply(this,arguments)}function kb(){return kb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ew(t,"POST","/v1/accounts:signInWithEmailLink",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),kb.apply(this,arguments)}function wb(e,t){return bb.apply(this,arguments)}function bb(){return bb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ew(t,"POST","/v1/accounts:signInWithEmailLink",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),bb.apply(this,arguments)}var xb=function(e){N(n,e);var t=D(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return E(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ob(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",gb(t,{email:this._email,oobCode:this._password}));case 5:Rk(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",nb(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",wb(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Rk(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Zw);function _b(e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ew(t,"POST","/v1/accounts:signInWithIdp",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}var Eb=function(e){N(n,e);var t=D(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return E(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return _b(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_b(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_b(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ie(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rk("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=hk(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Zw);function Tb(e,t){return Sb.apply(this,arguments)}function Sb(){return Sb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:sendVerificationCode",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sb.apply(this,arguments)}function Cb(){return Cb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ew(t,"POST","/v1/accounts:signInWithPhoneNumber",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cb.apply(this,arguments)}function Nb(){return Nb=pe(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ew(t,"POST","/v1/accounts:signInWithPhoneNumber",Yk(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw iw(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}var Ab=x({},"USER_NOT_FOUND","user-not-found");function Rb(){return Rb=pe(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ew(t,"POST","/v1/accounts:signInWithPhoneNumber",Yk(t,r),Ab));case 2:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}var Ob=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this,"phone","phone")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Cb.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Nb.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Rb.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Zw);var Pb=function(){function e(t){var n,r,i,a,o,u;_(this,e);var s=ae(oe(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Mk(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return E(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ae(oe(e)).link,n=t?ae(oe(t)).deep_link_id:null,r=ae(oe(e)).deep_link_id;return(r?ae(oe(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(dy){return null}}}]),e}();var Db=function(){function e(){_(this,e),this.providerId=e.PROVIDER_ID}return E(e,null,[{key:"credential",value:function(e,t){return xb._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Pb.parseLink(t);return Mk(n,"argument-error"),xb._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Db.PROVIDER_ID="password",Db.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Db.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Lb=function(){function e(t){_(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return E(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Mb=function(e){N(n,e);var t=D(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).scopes=[],e}return E(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return he(this.scopes)}}]),n}(Lb),Ub=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.apply(this,arguments)}return E(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Mk(e.idToken||e.accessToken,"argument-error"),Eb._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Mk("providerId"in t&&"signInMethod"in t,"argument-error"),Eb._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Mb),Fb=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.call(this,"facebook.com")}return E(n,null,[{key:"credential",value:function(e){return Eb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(dy){return null}}}]),n}(Mb);Fb.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fb.PROVIDER_ID="facebook.com";var jb=function(e){N(n,e);var t=D(n);function n(){var e;return _(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return E(n,null,[{key:"credential",value:function(e,t){return Eb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(dy){return null}}}]),n}(Mb);jb.GOOGLE_SIGN_IN_METHOD="google.com",jb.PROVIDER_ID="google.com";var Vb=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.call(this,"github.com")}return E(n,null,[{key:"credential",value:function(e){return Eb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(dy){return null}}}]),n}(Mb);Vb.GITHUB_SIGN_IN_METHOD="github.com",Vb.PROVIDER_ID="github.com";var Bb=function(e){N(n,e);var t=D(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return E(n,[{key:"_getIdTokenResponse",value:function(e){return _b(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_b(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_b(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Zw),qb=function(e){N(n,e);var t=D(n);function n(e){return _(this,n),Mk(e.startsWith("saml."),"argument-error"),t.call(this,e)}return E(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Bb.fromJSON(e);return Mk(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Bb._create(r,n)}catch(i){return null}}}]),n}(Lb),zb=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.call(this,"twitter.com")}return E(n,null,[{key:"credential",value:function(e,t){return Eb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(dy){return null}}}]),n}(Mb);function Kb(e,t){return Hb.apply(this,arguments)}function Hb(){return Hb=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ew(t,"POST","/v1/accounts:signUp",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hb.apply(this,arguments)}zb.TWITTER_SIGN_IN_METHOD="twitter.com",zb.PROVIDER_ID="twitter.com";var Wb=function(){function e(t){_(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return E(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=pe(me().mark((function t(n,r,i){var a,o,u,s,c=arguments;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Nw._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Gb(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=pe(me().mark((function t(n,r,i){var a;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Gb(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Gb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Qb(){return Qb=pe(me().mark((function e(t){var n,r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qw(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Wb({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Kb(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Wb._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Qb.apply(this,arguments)}var Yb=function(e){N(n,e);var t=D(n);function n(e,r,i,a){var o,u;return _(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(S(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return E(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(X);function Jb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Yb._fromErrorAndOperation(e,n,t,r);throw n}))}function Xb(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function $b(e,t){return Zb.apply(this,arguments)}function Zb(){return Zb=pe(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=le(t),e.next=3,nx(!0,r,n);case 3:return e.t0=uw,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Xb(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function ex(e,t){return tx.apply(this,arguments)}function tx(){return tx=pe(me().mark((function e(t,n){var r,i,a=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=vw,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Wb._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),tx.apply(this,arguments)}function nx(e,t,n){return rx.apply(this,arguments)}function rx(){return(rx=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ww(n);case 2:i=Xb(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Mk(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ix(e,t){return ax.apply(this,arguments)}function ax(){return ax=pe(me().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,vw(t,Jb(i,a,n,t),r);case 6:return Mk((o=e.sent).idToken,i,"internal-error"),Mk(u=pw(o.idToken),i,"internal-error"),s=u.sub,Mk(t.uid===s,i,"user-mismatch"),e.abrupt("return",Wb._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Rk(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ax.apply(this,arguments)}function ox(e,t){return ux.apply(this,arguments)}function ux(){return ux=pe(me().mark((function e(t,n){var r,i,a,o,u=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Jb(t,i,n);case 4:return a=e.sent,e.next=7,Wb._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}function sx(e,t){return cx.apply(this,arguments)}function cx(){return cx=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ox(Qw(t),n));case 1:case"end":return e.stop()}}),e)}))),cx.apply(this,arguments)}function lx(e,t){return fx.apply(this,arguments)}function fx(){return(fx=pe(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=le(t),e.next=3,nx(!1,r,n.providerId);case 3:return e.abrupt("return",ex(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return(dx=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ix(le(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function px(e,t){return vx.apply(this,arguments)}function vx(){return vx=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ew(t,"POST","/v1/accounts:signInWithCustomToken",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}function mx(){return mx=pe(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qw(t),e.next=3,px(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Wb._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}var yx=function(){function e(t,n){_(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return E(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?gx._fromServerResponse(e,t):Rk(e,"internal-error")}}]),e}(),gx=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return E(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(yx);function kx(e,t,n){var r;Mk((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Mk("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Mk(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Mk(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function wx(){return wx=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=le(t),a={requestType:"PASSWORD_RESET",email:n},r&&kx(i,a,r),e.next=5,hb(i,a);case 5:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function bx(){return bx=pe(me().mark((function e(t,n,r){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eb(le(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),bx.apply(this,arguments)}function xx(){return xx=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ib(le(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function _x(e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=pe(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=le(t),e.next=3,eb(r,{oobCode:n});case 3:i=e.sent,Mk(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Mk(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Mk(i.mfaInfo,r,"internal-error");case 13:Mk(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=yx._fromServerResponse(Qw(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Ex(){return Ex=pe(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_x(le(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}function Tx(e,t,n){return Sx.apply(this,arguments)}function Sx(){return Sx=pe(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qw(t),e.next=3,Kb(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Wb._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Cx(){return Cx=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=le(t),a={requestType:"EMAIL_SIGNIN",email:n},Mk(r.handleCodeInApp,i,"argument-error"),r&&kx(i,a,r),e.next=6,pb(i,a);case 6:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Nx(){return Nx=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=le(t),Mk((a=Db.credentialWithLink(n,r||Bk()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",sx(i,a));case 4:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:createAuthUri",Yk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Ox(){return Ox=pe(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qk()?Bk():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ax(le(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Px(){return(Px=pe(me().mark((function e(t,n){var r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=le(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&kx(r.auth,a,n),e.next=8,lb(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dx(){return(Dx=pe(me().mark((function e(t,n,r){var i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=le(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&kx(i.auth,o,r),e.next=8,mb(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lx(e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Ux(){return(Ux=pe(me().mark((function e(t,n){var r,i,a,o,u,s,c;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=le(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,vw(a,Lx(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fx(e,t,n){return jx.apply(this,arguments)}function jx(){return jx=pe(me().mark((function e(t,n,r){var i,a,o,u;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,vw(t,nb(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}var Vx=E((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Bx=function(e){N(n,e);var t=D(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this,e,r,i)).username=a,o}return E(n)}(Vx),qx=function(e){N(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"facebook.com",r)}return E(n)}(Vx),zx=function(e){N(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return E(n)}(Bx),Kx=function(e){N(n,e);var t=D(n);function n(e,r){return _(this,n),t.call(this,e,"google.com",r)}return E(n)}(Vx),Hx=function(e){N(n,e);var t=D(n);function n(e,r,i){return _(this,n),t.call(this,e,"twitter.com",r,i)}return E(n)}(Bx);function Wx(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=pw(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Vx(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new qx(a,i);case"github.com":return new zx(a,i);case"google.com":return new Kx(a,i);case"twitter.com":return new Hx(a,i,e.screenName||null);case"custom":case"anonymous":return new Vx(a,null);default:return new Vx(a,r,i)}}(n)}var Gx=function(){function e(t,n){_(this,e),this.type=t,this.credential=n}return E(e,[{key:"toJSON",value:function(){return{multiFactorSession:x({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Qx=function(){function e(t,n,r){_(this,e),this.session=t,this.hints=n,this.signInResolver=r}return E(e,[{key:"resolveSignIn",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Qw(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return yx._fromServerResponse(r,e)}));Mk(i.mfaPendingCredential,r,"internal-error");var o=Gx._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=pe(me().mark((function e(t){var a,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Wb._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Mk(n.user,r,"internal-error"),e.abrupt("return",Wb._forOperation(n.user,n.operationType,u));case 17:Rk(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Yx(e,t){return Jk(e,"POST","/v2/accounts/mfaEnrollment:start",Yk(e,t))}function Jx(e,t){return Jk(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Yk(e,t))}var Xx=function(){function e(t){var n=this;_(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return yx._fromServerResponse(t.auth,e)})))}))}return E(e,[{key:"getSession",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Gx,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=pe(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,vw(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=pe(me().mark((function e(t){var n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,vw(this.user,Jx(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),$x=new WeakMap;var Zx="__sak",e_=function(){function e(t,n){_(this,e),this.storageRetriever=t,this.type=n}return E(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Zx,"1"),this.storage.removeItem(Zx),Promise.resolve(!0)):Promise.resolve(!1)}catch(dy){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var t_=function(e){N(n,e);var t=D(n);function n(){var e;return _(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=K();return Mw(e)||qw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Hw(),e._shouldAllowMigration=!0,e}return E(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Kw()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=pe(me().mark((function e(t,r){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(A(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=pe(me().mark((function e(t){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(A(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(A(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(e_);t_.type="LOCAL";var n_=t_,r_=function(e){N(n,e);var t=D(n);function n(){return _(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return E(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(e_);r_.type="SESSION";var i_=r_;function a_(e){return Promise.all(e.map(function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var o_=function(){function e(t){_(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return E(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=pe(me().mark((function e(t){var n,r,i,a,o,u,s,c;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,a_(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function u_(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}o_.receivers=[];var s_=function(){function e(t){_(this,e),this.target=t,this.handlers=new Set}return E(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=pe(me().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=u_("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function c_(){return window}function l_(){return"undefined"!==typeof c_().WorkerGlobalScope&&"function"===typeof c_().importScripts}function f_(){return h_.apply(this,arguments)}function h_(){return(h_=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function d_(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var p_="firebaseLocalStorageDb",v_="firebaseLocalStorage",m_="fbase_key",y_=function(){function e(t){_(this,e),this.request=t}return E(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function g_(e,t){return e.transaction([v_],t?"readwrite":"readonly").objectStore(v_)}function k_(){var e=indexedDB.deleteDatabase(p_);return new y_(e).toPromise()}function w_(){var e=indexedDB.open(p_,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(v_,{keyPath:m_})}catch(r){n(r)}})),e.addEventListener("success",pe(me().mark((function n(){var r;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(v_)){n.next=12;break}return r.close(),n.next=5,k_();case 5:return n.t0=t,n.next=8,w_();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function b_(e,t,n){return x_.apply(this,arguments)}function x_(){return x_=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g_(t,!0).put((x(i={},m_,n),x(i,"value",r),i)),e.abrupt("return",new y_(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),x_.apply(this,arguments)}function __(e,t){return I_.apply(this,arguments)}function I_(){return I_=pe(me().mark((function e(t,n){var r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g_(t,!1).get(n),e.next=3,new y_(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function E_(e,t){var n=g_(e,!0).delete(t);return new y_(n).toPromise()}var T_=function(){function e(){_(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return E(e,[{key:"_openDb",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,w_();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l_()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=pe(me().mark((function e(){var t=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=o_._getInstance(l_()?self:null),this.receiver._subscribe("keyChanged",function(){var e=pe(me().mark((function e(n,r){var i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=pe(me().mark((function e(){var t,n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f_();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new s_(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&d_()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,w_();case 5:return t=e.sent,e.next=8,b_(t,Zx,"1");case 8:return e.next=10,E_(t,Zx);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=pe(me().mark((function e(t,n){var r=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return b_(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return __(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=pe(me().mark((function e(t){var n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return E_(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=pe(me().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=g_(e,!1).getAll();return new y_(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=T(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(pe(me().mark((function t(){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();T_.type="LOCAL";var S_=T_;function C_(e,t){return Jk(e,"POST","/v2/accounts/mfaSignIn:start",Yk(e,t))}function N_(e){return A_.apply(this,arguments)}function A_(){return A_=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jk(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function R_(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Ok("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function O_(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var P_=1e12,D_=function(){function e(t){_(this,e),this.auth=t,this.counter=P_,this._widgets=new Map}return E(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new L_(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||P_;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||P_;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||P_,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),L_=function(){function e(t,n,r){var i=this;_(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Mk(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return E(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var M_=O_("rcb"),U_=new Kk(3e4,6e4),F_="https://www.google.com/recaptcha/api.js?",j_=function(){function e(){_(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!c_().grecaptcha}return E(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Mk(V_(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(c_().grecaptcha):new Promise((function(r,i){var a=c_().setTimeout((function(){i(Ok(e,"network-request-failed"))}),U_.get());c_()[M_]=function(){c_().clearTimeout(a),delete c_()[M_];var o=c_().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Ok(e,"internal-error"))},R_("".concat(F_,"?").concat(ie({onload:M_,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Ok(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!c_().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function V_(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var B_=function(){function e(){_(this,e)}return E(e,[{key:"load",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new D_(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),q_="recaptcha",z_={theme:"light",type:"image"},K_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},z_),r=arguments.length>2?arguments[2]:void 0;_(this,e),this.parameters=n,this.type=q_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qw(r),this.isInvisible="invisible"===this.parameters.size,Mk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Mk(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new B_:new j_,this.validateStartingState()}return E(e,[{key:"verify",value:function(){var e=pe(me().mark((function e(){var t,n,r,i=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Mk(!this.parameters.sitekey,this.auth,"argument-error"),Mk(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Mk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=c_()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Mk(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=pe(me().mark((function e(){var t,n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mk(qk()&&!l_(),this.auth,"internal-error"),e.next=3,H_();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,N_(this.auth);case 8:Mk(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Mk(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function H_(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var W_=function(){function e(t,n){_(this,e),this.verificationId=t,this.onConfirmation=n}return E(e,[{key:"confirm",value:function(e){var t=Ob._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function G_(){return G_=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qw(t),e.next=3,X_(i,n,le(r));case 3:return a=e.sent,e.abrupt("return",new W_(a,(function(e){return sx(i,e)})));case 5:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}function Q_(e,t,n){return Y_.apply(this,arguments)}function Y_(){return(Y_=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=le(t),e.next=3,nx(!1,i,"phone");case 3:return e.next=5,X_(i.auth,n,le(r));case 5:return a=e.sent,e.abrupt("return",new W_(a,(function(e){return lx(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J_(){return(J_=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=le(t),e.next=3,X_(i.auth,n,le(r));case 3:return a=e.sent,e.abrupt("return",new W_(a,(function(e){return hx(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X_(e,t,n){return $_.apply(this,arguments)}function $_(){return $_=pe(me().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Mk("string"===typeof a,t,"argument-error"),Mk(r.type===q_,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Mk("enroll"===u.type,t,"internal-error"),e.next=13,Yx(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Mk("signin"===u.type,t,"internal-error"),Mk(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,C_(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Tb(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),$_.apply(this,arguments)}function Z_(){return(Z_=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ex(le(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eI=function(){function e(t){_(this,e),this.providerId=e.PROVIDER_ID,this.auth=Qw(t)}return E(e,[{key:"verifyPhoneNumber",value:function(e,t){return X_(this.auth,e,le(t))}}],[{key:"credential",value:function(e,t){return Ob._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ob._fromTokenResponse(n,r):null}}]),e}();function tI(e,t){return t?Vk(t):(Mk(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}eI.PROVIDER_ID="phone",eI.PHONE_SIGN_IN_METHOD="phone";var nI=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this,"custom","custom")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return _b(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return _b(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return _b(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Zw);function rI(e){return ox(e.auth,new nI(e),e.bypassAuthState)}function iI(e){var t=e.auth,n=e.user;return Mk(n,t,"internal-error"),ix(n,new nI(e),e.bypassAuthState)}function aI(e){return oI.apply(this,arguments)}function oI(){return oI=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Mk(r=t.user,n,"internal-error"),e.abrupt("return",ex(r,new nI(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),oI.apply(this,arguments)}var uI=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return E(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=pe(me().mark((function t(n,r){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=pe(me().mark((function e(t){var n,r,i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rI;case"linkViaPopup":case"linkViaRedirect":return aI;case"reauthViaPopup":case"reauthViaRedirect":return iI;default:Rk(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Fk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Fk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),sI=new Kk(2e3,1e4);function cI(e,t,n){return lI.apply(this,arguments)}function lI(){return lI=pe(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qw(t),Dk(t,n,Lb),a=tI(i,r),o=new pI(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),lI.apply(this,arguments)}function fI(){return(fI=pe(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dk((i=le(t)).auth,n,Lb),a=tI(i.auth,r),o=new pI(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hI(e,t,n){return dI.apply(this,arguments)}function dI(){return(dI=pe(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dk((i=le(t)).auth,n,Lb),a=tI(i.auth,r),o=new pI(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pI=function(e){N(n,e);var t=D(n);function n(e,r,i,a,o){var u;return _(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=S(u),u}return E(n,[{key:"executeNotNull",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Mk(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=pe(me().mark((function e(){var t,n=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fk(1===this.filter.length,"Popup operations only handle one event"),t=u_(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Ok(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Ok(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Ok(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,sI.get())}()}}]),n}(uI);pI.currentPopupAction=null;var vI=new Map,mI=function(e){N(n,e);var t=D(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return E(n,[{key:"execute",value:function(){var e=pe(me().mark((function e(){var t,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=vI.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,yI(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Wn(A(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:vI.set(this.auth._key(),t);case 21:return this.bypassAuthState||vI.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=pe(me().mark((function e(t){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Wn(A(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Wn(A(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(uI);function yI(e,t){return gI.apply(this,arguments)}function gI(){return gI=pe(me().mark((function e(t,n){var r,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xI(n),i=bI(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}function kI(e,t){return wI.apply(this,arguments)}function wI(){return wI=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bI(t)._set(xI(n),"true"));case 1:case"end":return e.stop()}}),e)}))),wI.apply(this,arguments)}function bI(e){return Vk(e._redirectPersistence)}function xI(e){return Ow("pendingRedirect",e.config.apiKey,e.name)}function _I(e,t,n){return function(e,t,n){return II.apply(this,arguments)}(e,t,n)}function II(){return II=pe(me().mark((function e(t,n,r){var i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qw(t),Dk(t,n,Lb),a=tI(i,r),e.next=5,kI(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),II.apply(this,arguments)}function EI(e,t,n){return function(e,t,n){return TI.apply(this,arguments)}(e,t,n)}function TI(){return(TI=pe(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dk((i=le(t)).auth,n,Lb),a=tI(i.auth,r),e.next=5,kI(a,i.auth);case 5:return e.next=7,PI(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SI(e,t,n){return function(e,t,n){return CI.apply(this,arguments)}(e,t,n)}function CI(){return(CI=pe(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dk((i=le(t)).auth,n,Lb),a=tI(i.auth,r),e.next=5,nx(!1,i,n.providerId);case 5:return e.next=7,kI(a,i.auth);case 7:return e.next=9,PI(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NI(e,t){return AI.apply(this,arguments)}function AI(){return AI=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qw(t)._initializationPromise;case 2:return e.abrupt("return",RI(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),AI.apply(this,arguments)}function RI(e,t){return OI.apply(this,arguments)}function OI(){return OI=pe(me().mark((function e(t,n){var r,i,a,o,u,s=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Qw(t),a=tI(i,n),o=new mI(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),OI.apply(this,arguments)}function PI(e){return DI.apply(this,arguments)}function DI(){return(DI=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u_("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var LI=function(){function e(t){_(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return E(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!UI(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ok(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(MI(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(MI(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function MI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function UI(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function FI(e){return jI.apply(this,arguments)}function jI(){return jI=pe(me().mark((function e(t){var n,r=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Jk(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),jI.apply(this,arguments)}var VI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BI=/^https?/;function qI(){return qI=pe(me().mark((function e(t){var n,r,i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,FI(t);case 4:n=e.sent,r=n.authorizedDomains,i=T(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!zI(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Rk(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),qI.apply(this,arguments)}function zI(e){var t=Bk(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!BI.test(r))return!1;if(VI.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var KI=new Kk(3e4,6e4);function HI(){var e=c_().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=he(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var WI=null;function GI(e){return WI=WI||function(e){return new Promise((function(t,n){var r,i,a;function o(){HI(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){HI(),n(Ok(e,"network-request-failed"))},timeout:KI.get()})}if(null===(i=null===(r=c_().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=c_().gapi)||void 0===a?void 0:a.load)){var u=O_("iframefcb");return c_()[u]=function(){gapi.load?o():n(Ok(e,"network-request-failed"))},R_("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw WI=null,e}))}(e),WI}var QI=new Kk(5e3,15e3),YI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XI(e){var t=e.config;Mk(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Hk(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Je},i=JI.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ie(r).slice(1))}function $I(e){return ZI.apply(this,arguments)}function ZI(){return ZI=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GI(t);case 2:return n=e.sent,Mk(r=c_().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:XI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YI,dontclear:!0},(function(e){return new Promise(function(){var n=pe(me().mark((function n(r,i){var a,o,u;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){c_().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Ok(t,"network-request-failed"),o=c_().setTimeout((function(){i(a)}),QI.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ZI.apply(this,arguments)}var eE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tE="_blank",nE="http://localhost",rE=function(){function e(t){_(this,e),this.window=t,this.associatedEvent=null}return E(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function iE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},eE),{width:r.toString(),height:i.toString(),top:a,left:o}),l=K().toLowerCase();n&&(u=Uw(l)?tE:n),Lw(l)&&(t=t||nE,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(zw(l)&&"_self"!==u)return aE(t||"",u),new rE(null);var h=window.open(t||"",u,f);Mk(h,e,"popup-blocked");try{h.focus()}catch(d){}return new rE(h)}function aE(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var oE="__/auth/handler",uE="emulator/auth/handler";function sE(e,t,n,r,i,a){Mk(e.config.authDomain,e,"auth-domain-config-required"),Mk(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Je,eventId:i};if(t instanceof Lb){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Mb){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(oE);return Hk(t,uE)}(e),"?").concat(ie(p).slice(1))}var cE="webStorageSupport",lE=function(){function e(){_(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i_,this._completeRedirectFn=RI}return E(e,[{key:"_openPopup",value:function(){var e=pe(me().mark((function e(t,n,r,i){var a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fk(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=sE(t,n,r,Bk(),i),e.abrupt("return",iE(t,o,u_()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=pe(me().mark((function e(t,n,r,i){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=sE(t,n,r,Bk(),i),c_().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Fk(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$I(t);case 2:return n=e.sent,r=new LI(t),n.register("authEvent",(function(e){return Mk(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(cE,{type:cE},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Rk(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return qI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Hw()||Mw()||qw()}}]),e}(),fE=lE,hE=function(){function e(t){_(this,e),this.factorId=t}return E(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Uk("unexpected MultiFactorSessionType")}}}]),e}(),dE=function(e){N(n,e);var t=D(n);function n(e){var r;return _(this,n),(r=t.call(this,"phone")).credential=e,r}return E(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Jk(e,"POST","/v2/accounts/mfaEnrollment:finalize",Yk(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Jk(e,"POST","/v2/accounts/mfaSignIn:finalize",Yk(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(hE),pE=function(){function e(){_(this,e)}return E(e,null,[{key:"assertion",value:function(e){return dE._fromCredential(e)}}]),e}();pE.FACTOR_ID="phone";var vE,mE="@firebase/auth",yE="0.19.9",gE=function(){function e(t){_(this,e),this.auth=t,this.internalListeners=new Map}return E(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Mk(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function kE(){return window}vE="Browser",Be(new ye("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Mk(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Mk(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:vE,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ww(vE)},r=new Gw(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vk);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Be(new ye("auth-internal",(function(e){return function(e){return new gE(e)}(Qw(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),nt(mE,yE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(vE)),nt(mE,yE,"esm2017");function wE(e,t,n){return bE.apply(this,arguments)}function bE(){return bE=pe(me().mark((function e(t,n,r){var i,a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kE(),o=a.BuildInfo,Fk(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,SE(n.sessionId);case 4:return u=e.sent,s={},qw()?s.ibi=o.packageName:jw()?s.apn=o.packageName:Rk(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",sE(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),bE.apply(this,arguments)}function xE(){return xE=pe(me().mark((function e(t){var n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kE(),r=n.BuildInfo,i={},qw()?i.iosBundleId=r.packageName:jw()?i.androidPackageName=r.packageName:Rk(t,"operation-not-supported-in-this-environment"),e.next=5,FI(t,i);case 5:case"end":return e.stop()}}),e)}))),xE.apply(this,arguments)}function _E(e){var t=kE().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function IE(e,t,n){return EE.apply(this,arguments)}function EE(){return EE=pe(me().mark((function e(t,n,r){var i,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kE(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Ok(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),jw()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),EE.apply(this,arguments)}function TE(e){var t,n,r,i,a,o,u,s,c,l,f=kE();Mk("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Mk("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Mk("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Mk("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Mk("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function SE(e){return CE.apply(this,arguments)}function CE(){return(CE=pe(me().mark((function e(t){var n,r,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=NE(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NE(e){if(Fk(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var AE=function(e){N(n,e);var t=D(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return E(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Wn(A(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(LI);function RE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:ME(),postBody:null,tenantId:e.tenantId,error:Ok(e,"no-auth-event")}}function OE(e,t){return UE()._set(FE(e),t)}function PE(e){return DE.apply(this,arguments)}function DE(){return DE=pe(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UE()._get(FE(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,UE()._remove(FE(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),DE.apply(this,arguments)}function LE(e,t){var n,r,i=function(e){var t=jE(e),n=t.link?decodeURIComponent(t.link):void 0,r=jE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return jE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=jE(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Ok(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ME(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function UE(){return Vk(n_)}function FE(e){return Ow("authEvent",e.config.apiKey,e.name)}function jE(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||fe(t)||o(t)||u();r[0];return ae(r.slice(1).join("?"))}var VE=function(){function e(){_(this,e),this._redirectPersistence=i_,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=RI}return E(e,[{key:"_initialize",value:function(){var e=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new AE(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Rk(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=pe(me().mark((function e(t,n,r,i){var a,o,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TE(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),vI.clear(),e.next=10,this._originValidation(t);case 10:return o=RE(t,r,i),e.next=13,OE(t,o);case 13:return e.next=15,wE(t,o,n);case 15:return u=e.sent,e.next=18,_E(u);case 18:return s=e.sent,e.abrupt("return",IE(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return xE.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=kE(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(pe(me().mark((function n(){return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,PE(e);case 2:t.onEvent(qE());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=pe(me().mark((function n(r){var i,a;return me().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,PE(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=LE(i,r.url)),t.onEvent(a||qE());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");kE().handleOpenURL=function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),BE=VE;function qE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ok("no-auth-event")}}function zE(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function KE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return!("file:"!==zE()&&"ionic:"!==zE()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function HE(){return Y()&&11===(null===document||void 0===document?void 0:document.documentMode)}function WE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return/Edge\/\d+/.test(e)}function GE(){try{var e=self.localStorage,t=u_();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();return HE()||WE(e)}()||J()}catch(n){return QE()&&J()}return!1}function QE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function YE(){return("http:"===zE()||"https:"===zE()||G()||KE())&&!(Q()||W())&&GE()&&!QE()}function JE(){return KE()&&"undefined"!==typeof document}function XE(){return $E.apply(this,arguments)}function $E(){return($E=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(JE()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ZE={LOCAL:"local",NONE:"none",SESSION:"session"},eT=Mk,tT="persistence";function nT(e,t){eT(Object.values(ZE).includes(t),e,"invalid-persistence-type"),Q()?eT(t!==ZE.SESSION,e,"unsupported-persistence-type"):W()?eT(t===ZE.NONE,e,"unsupported-persistence-type"):QE()?eT(t===ZE.NONE||t===ZE.LOCAL&&J(),e,"unsupported-persistence-type"):eT(t===ZE.NONE||GE(),e,"unsupported-persistence-type")}function rT(e){return iT.apply(this,arguments)}function iT(){return iT=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=aT(),r=Ow(tT,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),iT.apply(this,arguments)}function aT(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var oT=Mk,uT=function(){function e(){_(this,e),this.browserResolver=Vk(fE),this.cordovaResolver=Vk(BE),this.underlyingResolver=null,this._redirectPersistence=i_,this._completeRedirectFn=RI}return E(e,[{key:"_initialize",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=pe(me().mark((function e(t,n,r,i){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=pe(me().mark((function e(t,n,r,i){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return JE()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return oT(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,XE();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function sT(e){return e.unwrap()}function cT(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new pT(e,function(e,t){var n,r=le(e),i=t;return Mk(t.customData.operationType,r,"argument-error"),Mk(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Qx._fromError(r,i)}(e,t));else if(r){var i=lT(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function lT(e){var t=(e instanceof X?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof X)&&"temporaryProof"in t&&"phoneNumber"in t)return eI.credentialFromResult(e);var n,r=t.providerId;if(!r||r===yk)return null;switch(r){case mk:n=jb;break;case pk:n=Fb;break;case vk:n=Vb;break;case gk:n=zb;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Bb._create(r,u):Eb._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ub(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof X?n.credentialFromError(e):n.credentialFromResult(e)}function fT(e,t){return t.catch((function(t){throw t instanceof X&&cT(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,lT(t)),additionalUserInfo:Wx(e),user:vT.getOrCreate(r)}}))}function hT(e,t){return dT.apply(this,arguments)}function dT(){return dT=pe(me().mark((function e(t,n){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return fT(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),dT.apply(this,arguments)}var pT=function(){function e(t,n){_(this,e),this.resolver=n,this.auth=t.wrapped()}return E(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return fT(sT(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),vT=function(){function e(t){_(this,e),this._delegate=t,this.multiFactor=function(e){var t=le(e);return $x.has(t)||$x.set(t,Xx._fromUser(t)),$x.get(t)}(t)}return E(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fT(this.auth,lx(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hT(this.auth,Q_(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fT(this.auth,hI(this._delegate,t,uT)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rT(Qw(this.auth));case 2:return e.abrupt("return",SI(this._delegate,t,uT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fT(this.auth,hx(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return hT(this.auth,function(e,t,n){return J_.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return fT(this.auth,function(e,t,n){return fI.apply(this,arguments)}(this._delegate,e,uT))}},{key:"reauthenticateWithRedirect",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rT(Qw(this.auth));case 2:return e.abrupt("return",EI(this._delegate,t,uT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Px.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$b(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Fx(le(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Fx(le(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Z_.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ux.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Dx.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();vT.USER_MAP=new WeakMap;var mT=Mk,yT=function(){function e(t,n){if(_(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;mT(r,"invalid-api-key",{appName:t.name}),mT(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?uT:void 0;this._delegate=n.initialize({options:{persistence:kT(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Tk),this.linkUnderlyingAuth()}return E(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?vT.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Jw(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return xx.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return _x(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return bx.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=pe(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fT(this._delegate,Tx(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ox.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Pb.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=pe(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mT(YE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,NI(this._delegate,uT);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",fT(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Qw(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=gT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=gT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Cx.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return wx.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=pe(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nT(this._delegate,t),e.t0=t,e.next=e.t0===ZE.SESSION?4:e.t0===ZE.LOCAL?6:e.t0===ZE.NONE?11:13;break;case 4:return n=i_,e.abrupt("break",14);case 6:return e.next=8,Vk(S_)._isAvailable();case 8:return r=e.sent,n=r?S_:n_,e.abrupt("break",14);case 11:return n=Rw,e.abrupt("break",14);case 13:return e.abrupt("return",Rk("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return fT(this._delegate,function(e){return Qb.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return fT(this._delegate,sx(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return fT(this._delegate,function(e,t){return mx.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return fT(this._delegate,function(e,t,n){return sx(le(e),Db.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return fT(this._delegate,function(e,t,n){return Nx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return hT(this._delegate,function(e,t,n){return G_.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mT(YE(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",fT(this._delegate,cI(this._delegate,t,uT)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=pe(me().mark((function e(t){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mT(YE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,rT(this._delegate);case 3:return e.abrupt("return",_I(this._delegate,t,uT));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ex.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function gT(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&vT.getOrCreate(e))},error:t,complete:n}}function kT(e,t){var n=function(e,t){var n=aT();if(!n)return[];var r=Ow(tT,e,t);switch(n.getItem(r)){case ZE.NONE:return[Rw];case ZE.LOCAL:return[S_,i_];case ZE.SESSION:return[i_];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(S_)||n.push(S_),"undefined"!==typeof window)for(var r=0,i=[n_,i_];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Rw)||n.push(Rw),n}yT.Persistence=ZE;var wT=function(){function e(){_(this,e),this.providerId="phone",this._delegate=new eI(sT(ft.auth()))}return E(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return eI.credential(e,t)}}]),e}();wT.PHONE_SIGN_IN_METHOD=eI.PHONE_SIGN_IN_METHOD,wT.PROVIDER_ID=eI.PROVIDER_ID;var bT=Mk,xT=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ft.app();_(this,e),bT(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new K_(t,n,i.auth()),this.type=this._delegate.type}return E(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new ye("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new yT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:kk,PASSWORD_RESET:wk,RECOVER_EMAIL:bk,REVERT_SECOND_FACTOR_ADDITION:xk,VERIFY_AND_CHANGE_EMAIL:_k,VERIFY_EMAIL:Ik}},EmailAuthProvider:Db,FacebookAuthProvider:Fb,GithubAuthProvider:Vb,GoogleAuthProvider:jb,OAuthProvider:Ub,SAMLAuthProvider:qb,PhoneAuthProvider:wT,PhoneMultiFactorGenerator:pE,RecaptchaVerifier:xT,TwitterAuthProvider:zb,Auth:yT,AuthCredential:Zw,Error:X}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.9")}(ft);var _T=function(){function e(t,n,r){_(this,e),this._delegate=t,this.task=n,this.ref=r}return E(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),IT=function(){function e(t,n){_(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return E(e,[{key:"snapshot",get:function(){return new _T(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new _T(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new _T(e,i,i._ref))}:{next:t.next?function(e){return t.next(new _T(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),ET=function(){function e(t,n){_(this,e),this._delegate=t,this._service=n}return E(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new TT(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new TT(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),TT=function(){function e(t,n){_(this,e),this._delegate=t,this.storage=n}return E(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return An(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new IT(jn(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Ft(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new IT(new xn(this._delegate,new qt(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Bn(this._delegate).then((function(t){return new ET(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Tn(e=le(e),t)}(this._delegate,e||void 0).then((function(e){return new ET(e,t.storage)}))}},{key:"getMetadata",value:function(){return Vn(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Sn(e=le(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return Cn(le(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Nn(le(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw wt(e)}}]),e}(),ST=function(){function e(t,n){_(this,e),this.app=t,this._delegate=n}return E(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(CT(e))throw gt("ref() expected a child path but got a URL, use refFromURL instead.");return new TT(qn(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!CT(e))throw gt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{It.makeFromUrl(e,this._delegate.host)}catch(t){throw gt("refFromUrl() expected a valid full URL but got an invalid one.")}return new TT(qn(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};zn(this._delegate,e,t,n)}}]),e}();function CT(e){return/^[A-Za-z]+:\/\//.test(e)}function NT(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new ST(r,i)}!function(e){var t={TaskState:vn,TaskEvent:pn,StringFormat:Mt,Storage:ST,Reference:TT};e.INTERNAL.registerComponent(new ye("storage-compat",NT,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.10")}(ft);var AT=ft.initializeApp({apiKey:"AIzaSyCR1VRHDoBM3sS_0FJavH_t7dgg5vclhOM",authDomain:"instaclone-32cc7.firebaseapp.com",databaseURL:"https://instaclone-32cc7-default-rtdb.europe-west1.firebasedatabase.app",projectId:"instaclone-32cc7",storageBucket:"instaclone-32cc7.appspot.com",messagingSenderId:"632496129875",appId:"1:632496129875:web:acece57d554d2dd8d643a6",measurementId:"G-L0LZYTJ06D"}).firestore(),RT=ft.auth(),OT=n(184);var PT=function(e){var n=e.setShowAvatar,r=e.avatarsArray,i=s((0,t.useState)(),2),a=i[0],o=i[1],u=ft.storage(),c=ft.auth().currentUser;return(0,OT.jsx)("div",{className:"absolute right-0 bottom-16 flex items-center justify-center text-sm  animate-fadeIn z-[2] ",children:(0,OT.jsxs)("div",{className:"relative flex flex-col items-center justify-center w-64 p-4 pb-8 space-y-4 text-sm border border-b-0 rounded-lg rounded-b-none bg-slate-50 text-slate-500 animate-slideInBottomFast",children:[(0,OT.jsx)(g,{onClick:function(){return n(!1)},className:"absolute top-0 right-0 w-8 h-8 p-1 m-2 cursor-pointer text-slate-400"}),(0,OT.jsx)("span",{className:"animate-slideInBottomFaster",children:"Choose an avatar"}),(0,OT.jsxs)("label",{className:"flex items-center justify-center w-48 h-10 text-white truncate bg-blue-400 rounded-md shadow-lg cursor-pointer animate-slideInBottomFast",children:[a?(0,OT.jsx)("span",{className:"w-32 text-center truncate",children:a.name}):"Select an image",(0,OT.jsx)("input",{onChange:function(e){e.target.files[0]&&o(e.target.files[0])},className:"hidden w-full h-full",type:"file"})]}),a&&(0,OT.jsx)("button",{onClick:function(){var e=[];if(r.forEach((function(t){e.push(t.details.username)})),a&&!e.includes(c.displayName))try{u.ref("/avatars/".concat(a.name)).put(a).then((function(){u.ref("/avatars").child(a.name).getDownloadURL().then((function(e){AT.collection("avatars").add({imageUrl:e,username:c.displayName}),console.log("Image uploaded to DB")})),console.log("Uploaded successfully")}))}catch(t){console.log(t)}finally{n(!1)}else console.log("Prevented avatar upload")},className:"flex items-center justify-center w-48 h-10 text-white bg-blue-500 rounded-md shadow-lg animate-slideInBottomFaster",children:"Upload avatar"})]})})};function DT(e){var n=e.avatarsArray,r=ft.auth().currentUser.displayName,i=s((0,t.useState)(),2),a=i[0],o=i[1],u=s((0,t.useState)(!1),2),c=u[0],l=u[1];return(0,t.useEffect)((function(){n&&n.forEach((function(e){if(e.details.username===r)return o(e.details.imageUrl)}))}),[n,r]),(0,OT.jsx)("div",{className:"fixed w-full max-w-2xl bottom-0 pb-4 bg-slate-50 border rounded-t-md z-[20]",children:(0,OT.jsxs)("div",{className:"z-10 flex items-center justify-between px-6 pt-4 text-2xl ",children:[(0,OT.jsx)(y,{className:"z-10"}),(0,OT.jsx)(b,{className:"z-10"}),(0,OT.jsx)(k,{className:"z-10"}),(0,OT.jsx)("div",{className:"z-10 flex w-8 h-8 overflow-hidden border rounded-full cursor-pointer",children:a?(0,OT.jsx)("div",{onClick:function(){return l(!c)},className:"z-10 flex w-8 h-8 overflow-hidden border rounded-full cursor-pointer select-none",children:(0,OT.jsx)("img",{alt:"user avatar",className:"object-cover w-full select-none",src:a})}):(0,OT.jsx)("span",{onClick:function(){return l(!c)},className:"z-10 flex items-center justify-center w-full h-full text-xl uppercase select-none",children:r&&r.charAt(0)})}),c&&(0,OT.jsx)(PT,{setShowAvatar:l,avatarsArray:n})]})})}function LT(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}}]})(e)}function MT(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M53.12 199.94l400-151.39a8 8 0 0110.33 10.33l-151.39 400a8 8 0 01-15-.34l-67.4-166.09a16 16 0 00-10.11-10.11L53.46 215a8 8 0 01-.34-15.06zM460 52L227 285"}}]})(e)}function UT(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M262.29 192.31a64 64 0 1057.4 57.4 64.13 64.13 0 00-57.4-57.4zM416.39 256a154.34 154.34 0 01-1.53 20.79l45.21 35.46a10.81 10.81 0 012.45 13.75l-42.77 74a10.81 10.81 0 01-13.14 4.59l-44.9-18.08a16.11 16.11 0 00-15.17 1.75A164.48 164.48 0 01325 400.8a15.94 15.94 0 00-8.82 12.14l-6.73 47.89a11.08 11.08 0 01-10.68 9.17h-85.54a11.11 11.11 0 01-10.69-8.87l-6.72-47.82a16.07 16.07 0 00-9-12.22 155.3 155.3 0 01-21.46-12.57 16 16 0 00-15.11-1.71l-44.89 18.07a10.81 10.81 0 01-13.14-4.58l-42.77-74a10.8 10.8 0 012.45-13.75l38.21-30a16.05 16.05 0 006-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 00-6.07-13.94l-38.19-30A10.81 10.81 0 0149.48 186l42.77-74a10.81 10.81 0 0113.14-4.59l44.9 18.08a16.11 16.11 0 0015.17-1.75A164.48 164.48 0 01187 111.2a15.94 15.94 0 008.82-12.14l6.73-47.89A11.08 11.08 0 01213.23 42h85.54a11.11 11.11 0 0110.69 8.87l6.72 47.82a16.07 16.07 0 009 12.22 155.3 155.3 0 0121.46 12.57 16 16 0 0015.11 1.71l44.89-18.07a10.81 10.81 0 0113.14 4.58l42.77 74a10.8 10.8 0 01-2.45 13.75l-38.21 30a16.05 16.05 0 00-6.05 14.08c.33 4.14.55 8.3.55 12.47z"}}]})(e)}function FT(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 2H6c-1.103 0-2 .897-2 2v18l8-4.572L20 22V4c0-1.103-.897-2-2-2zm0 16.553-6-3.428-6 3.428V4h12v14.553z"}}]})(e)}var jT=function(e){var n=e.timestamp,r=s((0,t.useState)(),2),i=r[0],a=r[1],o=s((0,t.useState)(Date.now()),2),u=o[0],c=o[1];return(0,t.useEffect)((function(){var e=setInterval((function(){return c(Date.now())}),1e3);if(n){var t=n.toDate(),r=Math.round((new Date).getTime()/1e3)-(t=Math.round(t.getTime()/1e3)),i=Math.floor(r/3600),o=Math.floor(r%3600/60),u=i>0?i+(1===i?" hour ":" hours "):"",s=o>0?o+(1===o?" minute ":" minutes "):"";if(r<3600)a(s<1?"Just a moment ago.":s+" ago");else if(i<24)a(u+" ago");else if(i<=720){var l=Math.round(i/24);a(l+" day".concat(l>1?"s":""," ago"))}else if(i>720){a(n.toDate().toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}return function(){a(),c(Date.now())}}return function(){clearInterval(e)}}),[u,n]),(0,OT.jsx)("div",{className:"text-xs text-neutral-400",children:i})};var VT=function(e){var t=e.likedBy,n=e.closeModal;return(0,OT.jsx)("div",{className:"absolute flex items-center justify-center w-full h-full backdrop-blur-sm bg-black-rgba animate-fadeIn ease-smooth",children:(0,OT.jsxs)("div",{className:"relative flex  items-center justify-center w-64 h-64 overflow-hidden rounded-md shadow-md bg-slate-50 shadow-neutral-600",children:[(0,OT.jsx)(g,{onClick:n,className:"absolute top-0 right-0 z-10 w-8 h-8 m-1 cursor-pointer text-slate-400"}),(0,OT.jsx)("div",{className:"absolute top-0 flex flex-col items-center justify-center w-full h-12 border ",children:"Likes"}),(0,OT.jsx)("div",{className:"flex flex-col",children:t.map((function(e,t){return(0,OT.jsx)("span",{className:"font-bold",children:e},t)}))})]})})};var BT=function(e){var t=e.error,n=e.setShowError;return(0,OT.jsx)("div",{className:"fixed flex items-center justify-center w-screen h-screen top-0 left-0 ",children:(0,OT.jsxs)("div",{className:"flex flex-col relative  w-full max-w-xs p-4 bg-slate-50 shadow-lg z-10 rounded-lg ",children:[(0,OT.jsx)("div",{className:"flex justify-center items-center w-full border-b pb-2 text-red-800",children:"ERROR"}),(0,OT.jsx)(g,{onClick:function(){n(!1)},className:"absolute top-0 right-0 w-8 h-8 p-1 text-slate-500 cursor-pointer z-10"}),(0,OT.jsx)("span",{className:"pt-4 text-center",children:t})]})})};var qT=function(e){var n=e.id,r=e.comments,i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)([]),2),c=u[0],l=u[1],f=s((0,t.useState)(!1),2),h=f[0],d=f[1],p=ft.auth().currentUser.displayName,v=(0,t.useRef)();function m(){return y.apply(this,arguments)}function y(){return(y=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>10)){e.next=3;break}return d(!0),e.abrupt("return");case 3:if(!v.current.value){e.next=7;break}return l([].concat(he(c),[{user:p,content:a}])),e.next=7,AT.collection("posts").doc(n).update({comments:[].concat(he(c),[{user:p,content:a}])});case 7:v.current.value="";case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,t.useEffect)((function(){r&&l(r)}),[r]),(0,OT.jsxs)("div",{className:"",children:[h&&(0,OT.jsx)(BT,{error:"Too many comments. Try again later in case someone regrets theirs. Had to stop somewhere, right?",setShowError:d}),(0,OT.jsxs)("div",{className:"absolute h-fit bottom-0 left-0 flex w-full",children:[(0,OT.jsx)("textarea",{ref:v,maxLength:120,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){!function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),m())}(e)},placeholder:"Add a comment...",className:" w-full h-10 px-3 focus:h-12 focus:py-3 py-[11px] focus:text-sm border-t resize-none focus:outline-slate-300 placeholder:text-slate-300 text-xs transition-all duration-200"}),a?(0,OT.jsx)("button",{onClick:m,className:"flex items-center justify-center text-sky-400 text-sm  px-5 border-x border-t bg-neutral-50 cursor-pointer hover:bg-slate-100 transition-all duration-200 hover:text-sky-600 hover:shadow-sm",children:"Post"}):(0,OT.jsx)("button",{disabled:!0,className:"flex items-center justify-center text-sky-200 text-sm  px-5 border-x border-t bg-neutral-50",children:"Post"})]}),(0,OT.jsx)("div",{className:" max-h-[6rem] overflow-y-auto overflow-x-hidden",children:c.map((function(e,t){return(0,OT.jsxs)("div",{className:"flex COMMENT",children:[(0,OT.jsx)("a",{href:"/",className:"mr-1 font-bold lowercase",children:e.user}),(0,OT.jsx)("div",{className:"break-word max-w-[80vw]",children:e.content})]},t)}))})]})};var zT,KT=function(e){var t=e.children;return(0,OT.jsx)("ul",{className:"SETT absolute top-[56px] right-0 z-20 w-56 cursor-pointer border border-t-0 border-l-0 shadow-md bg-slate-50 rounded-b-md text-md animate-slideInTop overflow-hidden",children:t})};function HT(e){var n,r=e.username,i=e.image,a=e.description,o=e.likes,u=e.timestamp,c=e.id,l=e.likedBy,f=e.comments,h=e.avatarsArray,d=s((0,t.useState)(o),2),p=d[0],v=d[1],y=s((0,t.useState)(r),2),g=y[0],w=y[1],b=s((0,t.useState)(!1),2),x=b[0],_=b[1],I=s((0,t.useState)(!1),2),E=I[0],T=I[1],S=s((0,t.useState)(),2),C=S[0],N=S[1],A=(0,t.useRef)(null),R=ft.auth().currentUser.displayName;function O(){var e=ft.firestore();if(l.includes(g)){var t=l.filter((function(e){return e!==g}));e.collection("posts").doc(c).update({likes:o-1,likedBy:t}).then(v(o-1)).then(_(!1))}else e.collection("posts").doc(c).update({likes:o+1,likedBy:[].concat(he(l),[g])}).then(v(o+1)).then(_(!0))}function P(){return D.apply(this,arguments)}function D(){return(D=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(!E);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){alert("Oops! Feature not yet implemented.")}return n=A,(0,t.useEffect)((function(){function e(e){n.current&&n.current.contains(e.target)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[n]),(0,t.useEffect)((function(){return l.includes(g)?_(!0):_(!1),ft.auth().currentUser&&w(ft.auth().currentUser.displayName),function(){w(""),_(!1)}}),[g,l]),(0,t.useEffect)((function(){h&&h.forEach((function(e){if(e.details.username===g){if(g!==r)return;N(e.details.imageUrl)}}))}),[h,g,r]),(0,OT.jsxs)("div",{className:"relative flex flex-col w-full pb-16 my-6 text-sm transition-none duration-200 border rounded-md shadow-md bg-slate-50 shadow-slate-100",children:[(0,OT.jsxs)("div",{className:"flex items-center justify-between w-full p-4 lg:p-6 z-[20]",children:[(0,OT.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,OT.jsx)("div",{className:"z-10 flex w-8 h-8 overflow-hidden border rounded-full cursor-pointer",children:C?(0,OT.jsx)("img",{alt:"user avatar",className:"object-cover w-full",src:C}):(0,OT.jsx)("span",{className:"flex items-center justify-center w-full h-full text-xl uppercase",children:r.charAt(0)})}),(0,OT.jsx)("span",{className:"font-bold lowercase",children:r})]}),(0,OT.jsx)("div",{ref:A,children:r===R&&(0,OT.jsx)(m,{onClick:function(){window.confirm("Are you sure you want to delete the post?")&&AT.collection("posts").doc(c).delete().then((function(){console.log("Post deleted")})).catch((function(e){console.log("Error removing document: ",e)}))},className:"w-9 h-9 p-1 cursor-pointer text-slate-700 hover:text-neutral-500 hover:scale-110 transition-all duration-200"})})]}),(0,OT.jsxs)("div",{className:"relative flex items-center justify-center bg-slate-50",children:[(0,OT.jsx)("img",{alt:"",src:i,className:"object-scale-down max-h-[26rem] h-full lg:max-h-[35rem] rounded-md select-none"}),E&&(0,OT.jsx)(VT,{likedBy:l,closeModal:P})]}),(0,OT.jsxs)("div",{className:"flex items-center justify-between w-full  px-4 py-3 text-2xl lg:px-6",children:[(0,OT.jsxs)("div",{className:"flex space-x-6 ",children:[x?(0,OT.jsx)("div",{onClick:O,className:"flex items-center justify-center w-6 h-6",children:(0,OT.jsx)(LT,{className:"text-red-600 transition-all duration-200 cursor-pointer md:hover:scale-125 md:hover:text-red-200"})}):(0,OT.jsx)(k,{className:"transition-all duration-200 cursor-pointer md:hover:scale-125 md:hover:text-red-600",onClick:O}),(0,OT.jsx)(MT,{onClick:L})]}),(0,OT.jsx)(FT,{onClick:L})]}),(0,OT.jsxs)("div",{className:"flex flex-col px-4 select-none lg:px-6",children:[(0,OT.jsxs)("div",{onClick:P,className:"font-bold cursor-pointer w-16",children:[0!==p?p:"No"," ",1===p?"like":"likes"]}),(0,OT.jsxs)("div",{className:"flex",children:[(0,OT.jsx)("a",{href:"/",className:"mr-1 font-bold lowercase ",children:r}),(0,OT.jsx)("div",{className:"break-word max-w-[40ch] md:max-w-[75ch] mb-1",children:a})]}),(0,OT.jsx)("div",{className:"mb-2 ml-3",children:(0,OT.jsx)(qT,{id:c,comments:f})}),(0,OT.jsx)(jT,{timestamp:u})]})]})}function WT(){return WT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WT.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(zT||(zT={}));var GT=function(e){return e};var QT="beforeunload",YT="popstate";function JT(e){e.preventDefault(),e.returnValue=""}function XT(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function $T(){return Math.random().toString(36).substr(2,8)}function ZT(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function eS(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function tS(e,t){if(!e)throw new Error(t)}var nS=(0,t.createContext)(null);var rS=(0,t.createContext)(null);var iS=(0,t.createContext)({outlet:null,matches:[]});function aS(e){return function(e){var n=(0,t.useContext)(iS).outlet;if(n)return(0,t.createElement)(dS.Provider,{value:e},n);return n}(e.context)}function oS(e){tS(!1)}function uS(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?zT.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;lS()&&tS(!1);var h=TS(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=eS(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,w=void 0===k?"":k,b=p.state,x=void 0===b?null:b,_=p.key,I=void 0===_?"default":_,E=(0,t.useMemo)((function(){var e=IS(m,h);return null==e?null:{pathname:e,search:g,hash:w,state:x,key:I}}),[h,m,g,w,x,I]);return null==E?null:(0,t.createElement)(nS.Provider,{value:d},(0,t.createElement)(rS.Provider,{children:a,value:{location:E,navigationType:s}}))}function sS(e){var n=e.children,r=e.location;return function(e,n){lS()||tS(!1);var r=(0,t.useContext)(iS).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var u,s=fS();if(n){var c,l="string"===typeof n?eS(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||tS(!1),u=l}else u=s;var f=u.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=IS(("string"===typeof t?eS(t):t).pathname||"/",n);if(null==r)return null;var i=mS(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=wS(i[o],r);return a}(e,{pathname:h});0;return bS(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:ES([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:ES([o,e.pathnameBase])})})),r)}(vS(n),r)}function cS(e){lS()||tS(!1);var n=(0,t.useContext)(nS),r=n.basename,i=n.navigator,a=pS(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?eS(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):ES([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function lS(){return null!=(0,t.useContext)(rS)}function fS(){return lS()||tS(!1),(0,t.useContext)(rS).location}function hS(){lS()||tS(!1);var e=(0,t.useContext)(nS),n=e.basename,r=e.navigator,i=(0,t.useContext)(iS).matches,a=fS().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=_S(e,JSON.parse(o),a);"/"!==n&&(i.pathname=ES([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}var dS=(0,t.createContext)(null);function pS(e){var n=(0,t.useContext)(iS).matches,r=fS().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return _S(e,JSON.parse(i),r)}),[e,i,r])}function vS(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==oS&&tS(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=vS(e.props.children)),n.push(r)}else n.push.apply(n,vS(e.props.children))})),n}function mS(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||tS(!1),a.relativePath=a.relativePath.slice(r.length));var o=ES([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&tS(!1),mS(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:kS(o,e.index),routesMeta:u})})),t}var yS=/^:\w+$/,gS=function(e){return"*"===e};function kS(e,t){var n=e.split("/"),r=n.length;return n.some(gS)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!gS(e)})).reduce((function(e,t){return e+(yS.test(t)?3:""===t?1:10)}),r)}function wS(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=xS({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:ES([i,l.pathname]),pathnameBase:ES([i,l.pathnameBase]),route:f}),"/"!==l.pathnameBase&&(i=ES([i,l.pathnameBase]))}return a}function bS(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(iS.Provider,{children:void 0!==i.route.element?i.route.element:(0,t.createElement)(aS,null),value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function xS(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function _S(e,t,n){var r,i="string"===typeof e?eS(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?eS(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:SS(a),hash:CS(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function IS(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var ES=function(e){return e.join("/").replace(/\/\/+/g,"/")},TS=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},SS=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},CS=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},NS=function(){return NS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},NS.apply(this,arguments)},AS=function(e){return{display:e?"flex":"none"}},RS=function(e){var n=e.height,r=void 0===n?80:n,i=e.width,a=void 0===i?80:i,o=e.radius,u=void 0===o?1:o,s=e.color,c=void 0===s?"green":s,l=e.ariaLabel,f=void 0===l?"tail-spin-loading":l,h=e.wrapperStyle,d=e.wrapperClass,p=e.visible,v=void 0===p||p;return t.createElement("div",{style:NS(NS({},AS(v)),h),className:d,"data-testid":"tail-spin-loading"},t.createElement("svg",{width:a,height:r,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg","aria-label":f,"data-testid":"tail-spin-svg"},t.createElement("defs",null,t.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},t.createElement("stop",{stopColor:c,stopOpacity:"0",offset:"0%"}),t.createElement("stop",{stopColor:c,stopOpacity:".631",offset:"63.146%"}),t.createElement("stop",{stopColor:c,offset:"100%"}))),t.createElement("g",{fill:"none",fillRule:"evenodd"},t.createElement("g",{transform:"translate(1 1)"},t.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:c,strokeWidth:"2"},t.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),t.createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:u},t.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"}))))))};function OS(){return(0,OT.jsx)("div",{children:(0,OT.jsx)(RS,{color:"#3383FF",width:"50"})})}function PS(e){var n=e.avatarsArray,r=s((0,t.useState)([]),2),i=r[0],a=r[1],o=s((0,t.useState)(!1),2),u=o[0],c=o[1],l=ft.auth().currentUser,f=hS();return(0,t.useEffect)((function(){if(!l)return console.log("No user was detected - returning to sign in..."),void f("/",{replace:!0});c(!0);try{console.log("loading..."),AT.collection("posts").onSnapshot((function(e){a(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}catch(e){alert(e),c(!1)}finally{console.log("loaded.")}return c(!1),function(){a([])}}),[l,f]),(0,OT.jsx)(OT.Fragment,{children:u?(0,OT.jsx)("div",{className:"mt-64",children:(0,OT.jsx)(OS,{})}):(0,OT.jsxs)("div",{className:"w-full max-w-2xl pb-32 mt-14 space-y-6 overflow-hidden md:space-y-10 lg:space-y-16",children:[l&&i.map((function(e){var t=e.post,r=e.id;return(0,OT.jsx)(HT,{id:r,username:t.username,avatar:t.avatar,image:t.imageUrl,description:t.description,likes:t.likes,timestamp:t.timestamp,likedBy:t.likedBy,comments:t.comments,avatarsArray:n},r)})),(0,OT.jsx)("span",{className:"pt-16 flex items-center justify-center w-full text-sm text-slate-400 select-none",children:"You've reached the end."})]})})}function DS(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M12 6C12.5523 6 13 6.44772 13 7V11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H13V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V13H7C6.44772 13 6 12.5523 6 12C6 11.4477 6.44772 11 7 11H11V7C11 6.44772 11.4477 6 12 6Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M5 22C3.34315 22 2 20.6569 2 19V5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5ZM4 19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19Z",fill:"currentColor"}}]})(e)}function LS(e){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"}}]}]})(e)}var MS=t.createContext(),US=AT;function FS(){return(0,t.useContext)(MS)}function jS(e){var n=e.children,r=s((0,t.useState)(),2),i=r[0],a=r[1],o=s((0,t.useState)(!0),2),u=o[0],c=o[1],l=hS();(0,t.useEffect)((function(){return RT.onAuthStateChanged((function(e){a(e),c(!1)}))}),[]);var f={currentUser:i,signup:function(e,t,n){return RT.createUserWithEmailAndPassword(e,t).then((function(e){var t=e.user;return console.log(n," signed up."),t.updateProfile({displayName:n,avatar:""})}))},login:function(e,t){return RT.signInWithEmailAndPassword(e,t)},logout:function(){console.log(ft.auth().currentUser.displayName,"logged out..."),l("/",{replace:!0}),ft.auth().signOut().catch((function(e){}))},database:US};return(0,OT.jsx)(MS.Provider,{value:f,children:!u&&n})}function VS(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M457.6 140.2l-82.5-4-4.8-53.8c-1-11.3-11.1-19.2-22.9-18.3L51.5 88.4c-11.8 1-20.3 10.5-19.4 21.7l21.2 235.8c1 11.3 11.2 19.2 22.9 18.3l15-1.2-2.4 45.8c-.6 12.6 9.2 22.8 22.4 23.5L441.3 448c13.2.6 24.1-8.6 24.8-21.2L480 163.5c.6-12.5-9.3-22.7-22.4-23.3zm-354.9 5.3l-7.1 134.8L78.1 305 62 127v-.5-.5c1-5 4.4-9 9.6-9.4l261-21.4c5.2-.4 9.7 3 10.5 7.9 0 .2.3.2.3.4 0 .1.3.2.3.4l2.7 30.8-219-10.5c-13.2-.4-24.1 8.8-24.7 21.3zm334 236.9l-84.8-99.5-37.4 34.3-69.2-80.8-122.7 130.7L133 168v-.4c1-5.4 6.2-9.3 11.9-9l291.2 14c5.8.3 10.3 4.7 10.4 10.2 0 .2.3.3.3.5l-10.1 199.1z"}},{tag:"path",attr:{d:"M384 256c17.6 0 32-14.4 32-32s-14.3-32-32-32c-17.6 0-32 14.3-32 32s14.3 32 32 32z"}}]})(e)}function BS(e){return p({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}},{tag:"path",attr:{d:"M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"}}]})(e)}function qS(e){var n=e.setUploadOpen,r=s((0,t.useState)(""),2),i=r[0],a=r[1],o=s((0,t.useState)(!1),2),u=o[0],c=o[1],l=s((0,t.useState)(!1),2),f=l[0],h=l[1],d=s((0,t.useState)(null),2),p=d[0],v=d[1],m=(0,t.useRef)(),y=ft.storage(),k=ft.auth().currentUser;function w(){return(w=pe(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.ref("/images/".concat(p.name)).put(p).then((function(){y.ref("/images").child(p.name).getDownloadURL().then((function(e){AT.collection("posts").add({timestamp:ft.firestore.FieldValue.serverTimestamp(),description:i,imageUrl:e,username:k.displayName,likes:0,likedBy:[],comments:[]}),console.log("Image uploaded to DB"),c(!1),h(!0),setTimeout((function(){h(!1),n(!1)}),600)}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(e){var t=e.target.files[0];e.target.files[0]&&v(t)};return(0,OT.jsxs)("div",{className:"absolute flex flex-col top-14 right-0 p-6 min-w-[240px] max-w-[19rem] w-[100vw] h-[410px] items-center justify-center bg-slate-50 rounded-t-none rounded-xl space-y-2 shadow-md animate-slideInTop z-30",children:[(0,OT.jsx)(g,{onClick:function(){return n(!1)},className:"absolute top-0 right-0 w-12 h-12 p-2 m-2 mr-0 cursor-pointer text-slate-600 hover:text-neutral-400 hover:scale-110 transition-all duration-300"}),(0,OT.jsx)("div",{className:"px-4 pb-4 text-sm text-center text-slate-500",children:"Select an image, add a caption and upload"}),f?(0,OT.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,OT.jsx)(BS,{className:"text-[40px] mb-4 text-blue-500 animate-ping"}),(0,OT.jsx)("span",{className:"text-blue-500",children:"Image uploaded."})]}):(0,OT.jsx)("div",{children:u?(0,OT.jsx)(OS,{}):(0,OT.jsx)(VS,{className:"text-[100px] text-slate-300"})}),(0,OT.jsx)("textarea",{ref:m,className:"h-16 max-w-xs w-full p-3 text-sm resize-none focus:outline-slate-300 rounded-md border",maxLength:80,placeholder:"Enter image caption...",onChange:function(e){return a(e.target.value)}}),!p&&(0,OT.jsxs)("label",{className:"flex items-center justify-center w-full max-w-xs h-10 text-sm text-white bg-blue-500 rounded-md shadow-md cursor-pointer",children:["Select an image",(0,OT.jsx)("input",{className:"hidden border",type:"file",onChange:b})]}),p&&(0,OT.jsxs)("div",{className:"flex flex-col items-center justify-center w-full  animate-fadeIn",children:[(0,OT.jsxs)("label",{className:"flex items-center justify-center max-w-xs w-full h-10 text-sm border bg-white focus:border-blue-500 text-neutral-400 rounded-md shadow-md cursor-pointer overflow-hidden truncate hover:border-2 hover:border-slate-400",children:[(0,OT.jsx)("span",{className:"flex items-center justify-center w-full p-4 ",children:p.name}),(0,OT.jsx)("input",{className:"hidden border",type:"file",onChange:b})]}),(0,OT.jsx)("div",{className:"flex items-center justify-center w-full mt-4 text-sm",children:(0,OT.jsx)("button",{onClick:function(){null!=p?(m.current.value="",c(!0),function(){w.apply(this,arguments)}()):alert("Please select an image.")},className:"flex w-full max-w-[10rem] h-10 items-center justify-center bg-blue-500  text-white rounded-md shadow-md cursor-pointer animate-fadeIn",children:"Upload"})})]})]})}function zS(e){var n,r=e.username,i=s((0,t.useState)(!1),2),a=i[0],o=i[1],u=s((0,t.useState)(!1),2),c=u[0],l=u[1],f=FS().logout,h=(0,t.useRef)(null);return n=h,(0,t.useEffect)((function(){function e(e){n.current&&!n.current.contains(e.target)&&(o(!1),l(!1))}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[n]),(0,OT.jsxs)("nav",{className:"navbar fixed flex top-0 w-full max-w-2xl px-3 py-2 justify-between items-center border rounded-b-md bg-slate-50 z-[30] select-none",children:[(0,OT.jsx)("span",{className:"text-4xl font-logofont",children:"Instalike"}),r,(0,OT.jsxs)("div",{className:"flex space-x-6 text-2xl",children:[!c&&(0,OT.jsx)(DS,{onClick:function(){l(!0)},className:"transition-all duration-300 hover:scale-110 hover:text-neutral-400 z-[20] cursor-pointer"}),a?(0,OT.jsx)(LS,{className:"transition-all duration-200 cursor-pointer hover:scale-110 hover:text-slate-500 opacity-0 z-0 pointer-events-none"}):(0,OT.jsx)(LS,{className:"z-40 transition-all duration-200 cursor-pointer hover:scale-110 hover:text-slate-500",onClick:function(){return o(!a)}})]}),c&&(0,OT.jsx)("div",{className:"absolute top-0 right-0",ref:h,children:(0,OT.jsx)(qS,{setUploadOpen:l})}),a&&(0,OT.jsx)(KT,{children:(0,OT.jsxs)("div",{ref:h,children:[(0,OT.jsxs)("li",{className:"flex items-center p-4 space-x-2 font-sans h-14 animate-slideInTop border-l hover:bg-slate-100 transition-all duration-200",children:[(0,OT.jsx)(UT,{}),(0,OT.jsx)("span",{children:"Settings"})]}),(0,OT.jsxs)("li",{onClick:f,className:"flex items-center p-4 space-x-2 h-14 animate-slideInTopFast border-l hover:bg-slate-100 transition-all duration-200 z-10",children:[(0,OT.jsx)(w,{}),(0,OT.jsx)("span",{children:"Log out"})]})]})})]})}function KS(){return KS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KS.apply(this,arguments)}function HS(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var WS=["onClick","reloadDocument","replace","state","target","to"];function GS(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,GT({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(YT,(function(){if(a)f.call(a),a=null;else{var e=zT.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){y(-1*o)}},y(o))}}else m(e)}}));var o=zT.Pop,u=i(),s=u[0],c=u[1],l=XT(),f=XT();function h(e){return"string"===typeof e?e:ZT(e)}function d(e,t){return void 0===t&&(t=null),GT(WT({pathname:c.pathname,hash:"",search:""},"string"===typeof e?eS(e):e,{state:t,key:$T()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},h(e)]}function v(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function y(e){r.go(e)}null==s&&(s=0,r.replaceState(WT({},r.state,{idx:s}),""));var g={get action(){return o},get location(){return c},createHref:h,push:function e(t,i){var a=zT.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var u=p(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(f){n.location.assign(l)}m(a)}},replace:function e(t,n){var i=zT.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),m(i)}},go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(QT,JT),function(){t(),f.length||n.removeEventListener(QT,JT)}}};return g}({window:i}));var o=a.current,u=s((0,t.useState)({action:o.action,location:o.location}),2),c=u[0],l=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(l)}),[o]),(0,t.createElement)(uS,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:o})}var QS=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=HS(e,WS),f=cS(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=hS(),s=fS(),c=pS(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||ZT(s)===ZT(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",KS({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));function YS(){var e=FS().login,n=s((0,t.useState)(),2),r=n[0],i=n[1],a=s((0,t.useState)(),2),o=a[0],u=a[1],c=s((0,t.useState)(!1),2),l=c[0],f=c[1],h=s((0,t.useState)(null),2),d=h[0],p=h[1],v=hS();function m(){return(m=pe(me().mark((function t(n){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),p(null),f(!0),t.prev=3,t.next=6,e(r,o);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),f(!1),p("Incorrect username or password.");case 12:ft.auth().currentUser&&(console.log(ft.auth().currentUser.displayName,"logged in."),f(!1),v("/feed"));case 13:case"end":return t.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}return(0,t.useEffect)((function(){ft.auth().currentUser&&v("/feed")}),[v]),(0,OT.jsxs)("div",{className:"fixed z-10 flex flex-col items-center justify-center w-screen h-screen px-5 bg-slate-50",children:[(0,OT.jsxs)("div",{className:"flex flex-col items-center justify-center w-[90%] max-w-96",children:[(0,OT.jsx)("h1",{className:"mb-4 text-5xl transition-all duration-300 font-logofont",children:"Instalike"}),d&&(0,OT.jsx)("div",{className:"mb-4 text-red-600",children:d}),l?(0,OT.jsx)("div",{className:"",children:(0,OT.jsx)(OS,{})}):(0,OT.jsxs)("form",{className:"flex flex-col items-center justify-center w-full space-y-4 text-sm ",children:[(0,OT.jsx)("input",{className:"w-full h-10 max-w-sm px-2 border rounded-md bg-slate-100",name:"email",type:"email",placeholder:"Email or username",onChange:function(e){i(e.target.value)}}),(0,OT.jsx)("input",{className:"w-full h-10 max-w-sm px-2 border rounded-md bg-slate-100",name:"password",type:"password",placeholder:"Password",onChange:function(e){u(e.target.value)}}),(0,OT.jsx)("div",{className:"flex justify-end w-full max-w-sm text-xs font-bold text-blue-400",children:"Forgot password?"}),(0,OT.jsx)("button",{to:"/feed",type:"submit",className:"flex items-center justify-center w-full h-10 max-w-sm text-white bg-blue-500 rounded-md shadow-md hover:bg-blue-400 transition-all duration-200",onClick:function(e){return m.apply(this,arguments)},children:"Sign in"})]})]}),(0,OT.jsxs)("div",{className:"absolute bottom-0 flex items-center justify-center w-full h-16 space-x-1 text-sm border-t bg-slate-50",children:[(0,OT.jsx)("span",{className:"text-slate-400",children:"Don't have an account?"}),(0,OT.jsx)(QS,{to:"/sign-up",className:"font-bold text-blue-500",children:"Sign Up"})]})]})}function JS(){return(0,OT.jsx)("div",{className:"flex w-full h-full justify-center items-center text-4xl mt-64",children:"User Profile"})}function XS(){var e=FS().signup,n=s((0,t.useState)(),2),r=n[0],i=n[1],a=s((0,t.useState)(),2),o=a[0],u=a[1],c=s((0,t.useState)(),2),l=c[0],f=c[1],h=ft.auth().currentUser,d=hS();function p(){return(p=pe(me().mark((function t(n){return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,e(o,l,r);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log("Failed to create an account");case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}return(0,t.useEffect)((function(){h&&d("/")})),(0,OT.jsxs)("div",{className:"flex flex-col items-center justify-center w-screen h-screen p-4 overflow-hidden bg-slate-50",children:[(0,OT.jsxs)("div",{className:"flex relative flex-col items-center justify-center w-[90%] max-w-sm animate-slideInTop animate-fadeIn ease text-sm",children:[(0,OT.jsx)("h1",{className:"mb-4 text-5xl font-logofont",children:"Instalike"}),(0,OT.jsxs)("form",{className:"flex flex-col items-center justify-center w-full space-y-4",children:[(0,OT.jsx)("input",{className:"w-full h-10 max-w-sm px-2 border rounded-md bg-slate-100",type:"email",name:"email",placeholder:"Email",onChange:function(e){u(e.target.value)}}),(0,OT.jsx)("input",{className:"w-full h-10 max-w-sm px-2 border rounded-md bg-slate-100",type:"text",name:"username",placeholder:"Username",onChange:function(e){i(e.target.value)}}),(0,OT.jsx)("input",{className:"w-full h-10 max-w-sm px-2 border rounded-md bg-slate-100",type:"password",name:"password",placeholder:"Password",onChange:function(e){f(e.target.value)}}),(0,OT.jsx)("span",{className:"w-full ",children:(0,OT.jsx)("button",{type:"submit",className:"flex items-center justify-center w-full h-10 max-w-sm mt-6 text-white bg-blue-500  rounded-md shadow-md hover:bg-blue-400 transition-all duration-200",onClick:function(e){return p.apply(this,arguments)},children:"Sign Up"})})]})]}),(0,OT.jsxs)("div",{className:"absolute bottom-0 flex items-center justify-center w-full h-16 space-x-1 text-sm border-t bg-slate-50",children:[(0,OT.jsx)("span",{className:"text-slate-400",children:"Already have an account?"}),(0,OT.jsx)(QS,{to:"/",className:"font-bold text-blue-500",children:"Sign In"})]})]})}var $S=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(""),2),c=u[0],l=u[1],f=s((0,t.useState)(),2),h=f[0],d=f[1],p=s((0,t.useState)(),2),v=p[0],m=p[1];(0,t.useEffect)((function(){AT.collection("avatars").onSnapshot((function(e){d(e.docs.map((function(e){return{id:e.id,details:e.data()}})))}))}),[]),(0,t.useEffect)((function(){if(h){var e=[];h.forEach((function(t){e.push(t.details.username),m([].concat(e,[t.details.username]))}))}}),[h]);var y={email:n,password:a,setEmail:r,setPassword:o,setUsername:l};return(0,OT.jsx)(GS,{children:(0,OT.jsx)(jS,{children:(0,OT.jsx)("div",{className:"h-full min-h-screen overflow-hidden bg-slate-50 text-slate-800",children:(0,OT.jsxs)(sS,{children:[(0,OT.jsx)(oS,{exact:!0,path:"/",element:(0,OT.jsx)(YS,{})}),(0,OT.jsx)(oS,{exact:!0,path:"/sign-up",element:(0,OT.jsx)(XS,{authProps:y})}),(0,OT.jsx)(oS,{exact:!0,path:"/feed/*",element:(0,OT.jsxs)("div",{className:"relative flex items-center justify-center w-screen h-full",children:[(0,OT.jsx)(zS,{username:c}),(0,OT.jsxs)(sS,{children:[(0,OT.jsx)(oS,{exact:!0,path:"/",element:(0,OT.jsx)(PS,{avatarsArray:h})}),(0,OT.jsx)(oS,{exact:!0,path:"/user",element:(0,OT.jsx)(JS,{})})]}),(0,OT.jsx)(DT,{avatarUsers:v,avatarsArray:h,username:c})]})}),(0,OT.jsx)(oS,{exact:!0,path:"/upload",element:(0,OT.jsx)(qS,{username:c})})]})})})})};r.render((0,OT.jsx)(t.StrictMode,{children:(0,OT.jsx)($S,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.ae1bc0ef.js.map